library(palmerpenguins)
library(ggplot2)
ggplot(data=penguins,aes(x=flipper_length_mm,y=body_mass_g)) +
geom_point()
#| eval: false
murders |> group_by(region) |>
mutate(region_pop = sum(population), n = n())
library(tidyvese)
library(tidyverse)
#| eval: false
murders |> group_by(region) |>
mutate(region_pop = sum(population), n = n())
library(dslabs)
#| eval: false
murders |> group_by(region) |>
mutate(region_pop = sum(population), n = n())
#| eval: false
murders |> group_by(region) |>
mutate(region_pop = sum(population), n = n()) \> head(2)
#| eval: false
murders |> group_by(region) |>
mutate(region_pop = sum(population), n = n()) |> head(2)
murders |>
summarize(rate = sum(total)/sum(population)*100000) |>
class()
murders |> arrange(rate) |> head()
head(murders)
head(murders,2)
murders |> mutate(rate= = sum(total)/sum(population)*100000 ) |>
murders |> mutate(rate= sum(total)/sum(population)*100000 ) |>
arrange(rate) |> head()
##if you don't have ThemePark installed run this
library(remotes)
> remotes::install_github("https://github.com/MatthewBJane/ThemePark.git")
##if you don't have ThemePark installed run this
library(remotes)
> remotes::install_github("https://github.com/MatthewBJane/ThemePark.git")
##if you don't have ThemePark installed run this
library(remotes)
remotes::install_github("https://github.com/MatthewBJane/ThemePark.git")
##if you don't have ThemePark installed run this
library(remotes)
>remotes::install_github("https://github.com/MatthewBJane/ThemePark.git")
library(dplyr)
library(ggplot2)
library(dslabs)
library(lattice)
library(dslabs)
library(ggthemes)
library(ggrepel)
r <- murders |>
summarize(pop = sum(population), tot = sum(total)) |>
mutate(rate = tot/pop*10^6) |> pull(rate)
target <- murders |> ggplot(aes(x = population/10^6, y = total, label = abb)) +
geom_abline(intercept = log10(r), lty = 2, col = "darkgrey") +
geom_point(aes(color = region), size = 3) +
geom_text_repel() +
scale_x_log10() +
scale_y_log10() +
xlab("Populations in millions (log scale)") +
ylab("Total number of murders (log scale)") +
ggtitle("US Gun Murders in 2010") +
scale_color_discrete(name = "Region") +
theme_economist()
print(target)
r
murders |>
summarize(pop = sum(population), tot = sum(total))
murders |>
summarize(pop = sum(population), tot = sum(total)) |>
mutate(rate = tot/pop*10^6)
target
p + geom_point(aes(population/10^6, total))
p <- ggplot(data = murders)
class(p)
p + geom_point(aes(population/10^6, total))
p_test <- p + geom_text(aes(population/10^6, total, label = abb))
p_test <- p + geom_text(aes(population/10^6, total), label = abb)
p_test <- p + geom_text(aes(population/10^6, total), label = murders$abb)
pl <- xyplot(total ~ population/10^6 | region, data = murders, #group by region
type = c("p", "g"), xlab = "Population/10^6", ylab = "Total", # points +grid
strip = strip.custom(strip.names = TRUE, var.name = "region"), layout=c(2,2))
# strip: title bar in each panel
print(pl)
pl <- xyplot(total ~ population/10^6 | region, data = murders, #group by region
type = c("p", "g"), xlab = "Population/10^6", ylab = "Total", # points +grid
strip = strip.custom(strip.names = FALSE, var.name = "region"), layout=c(2,2))
# strip: title bar in each panel
print(pl)
pl <- xyplot(total ~ population/10^6 | region, data = murders, #group by region
type = c("p", "g"), xlab = "Population/10^6", ylab = "Total", # points +grid
strip = strip.custom(strip.names = TRUE), layout=c(2,2))
# strip: title bar in each panel
print(pl)
pl <- xyplot(total ~ population/10^6 | region, data = murders, #group by region
type = c("p", "g"), xlab = "Population/10^6", ylab = "Total", # points +grid
strip = strip.custom(strip.names = FALSE), layout=c(2,2))
# strip: title bar in each panel
print(pl)
pl <- xyplot(total ~ population/10^6 | region, data = murders, #group by region
type = c("p", "g"), xlab = "Population/10^6", ylab = "Total", # points +grid
layout=c(2,2))
# strip: title bar in each panel
print(pl)
pl <- xyplot(total ~ population/10^6 | region, data = murders, #group by region
type = c("p", "g"), xlab = "Population/10^6", ylab = "Total", # points +grid
strip = strip.custom(strip.names = TRUE, var.name = "region"), layout=c(2,2))
# strip: title bar in each panel. strip.names=TRUE: show the var.name "region"
print(pl)
pg <- ggplot(murders, aes(population/10^6, total)) + geom_point(shape = 1) +
facet_wrap(~region) + theme(aspect.ratio = 1)
print(pg)
pg <- ggplot(murders, aes(population/10^6, total)) + geom_point(shape = 1) +
facet_wrap(~region)
print(pg)
pg <- ggplot(murders, aes(population/10^6, total)) + geom_point(shape = 16) +
facet_wrap(~region) + theme(aspect.ratio = 1)
print(pg)
pg <- ggplot(murders, aes(population/10^6, total)) + geom_point(shape = 1) +
facet_wrap(~region) + theme(aspect.ratio = 1)
print(pg)
pg <- ggplot(murders, aes(population/10^6, total)) + geom_point() +
facet_wrap(~region) + theme(aspect.ratio = 1)
print(pg)
# shape =1: open circles; shape=16: filled circles
#| code-line-numbers: "1"
p + geom_point(aes(population/10^6, total), size = 3) +
geom_text(aes(population/10^6, total, label = abb))
#| code-line-numbers: "1"
p + geom_point(aes(population/10^6, total), size = murders$region) +
geom_text(aes(population/10^6, total, label = abb))
#| code-line-numbers: "1"
p + geom_point(aes(population/10^6, total), size = 3) +
geom_text(aes(population/10^6, total, label = abb))
?geom_points
??geom_points
head(murders)
#| eval: false
library(ggthemes)
library(ggrepel)
r <- murders |>
summarize(rate = sum(total) /  sum(population) * 10^6) |>
pull(rate)
murders |> ggplot(aes(population/10^6, total, label = abb)) +
geom_abline(intercept = log10(r), lty = 2, color = "darkgrey") +
geom_point(aes(col = region), size = 3) +
geom_text_repel() +
scale_x_log10() +
scale_y_log10() +
labs(x = "Populations in millions (log scale)",
y = "Total number of murders (log scale)",
title = "US Gun Murders in 2010",
color = "Region") +
theme_economist()
#| eval: false
library(gridExtra)
p1 <- murders |>
ggplot(aes(log10(population))) +
geom_histogram()
p2 <- murders |>
gplot(aes(log10(population), log10(total))) +
geom_point()
#| eval: false
library(gridExtra)
p1 <- murders |>
ggplot(aes(log10(population))) +
geom_histogram()
p2 <- murders |>
ggplot(aes(log10(population), log10(total))) +
geom_point()
grid.arrange(p1, p2, ncol = 2)
path <- system.file("extdata", package = "dslabs")
filename <- "life-expectancy-and-fertility-two-countries-example.csv"
filename <-  file.path(path, filename)
raw_dat <- read_csv(filename)
select(raw_dat, 1:5)
dir <- system.file(package = "dslabs")
file_path <- file.path(dir, "extdata/murders.csv")
file.copy(file_path, "murders.csv")
# file.copy(from, to), returns TRUE/FALSE (success/failure)
file.remove("murders.csv")
#| message: false
#| warning: false
x <- read.table("murders.csv", sep = "\t")
x <- read.csv("murders.csv")
class(x)
str(x)
#| message: false
#| warning: false
library(readr)
x <- read_csv("murders.csv")
x <- read_delim("murders.csv", delim = "\t")
head(x)
#| message: false
#| warning: false
library(readr)
x <- read_csv("murders.csv") >|head(2)
#| message: false
#| warning: false
library(readr)
x <- read_csv("murders.csv") |> head(2)
x <- read_delim("murders.csv", delim = "\t") |> head(2)
#| message: false
#| warning: false
library(readr)
read_csv("murders.csv") |> head(2)
read_delim("murders.csv", delim = "\t") |> head(2)
library(readxl)
fn <- file.path(dir, "extdata/2010_bigfive_regents.xls")
read_xls(fn) |> head(2)
library(data.table)
x <- fread("murders.csv")
dir <- system.file(package = "dslabs")
file_path <- file.path(dir, "extdata/murders.csv")
file.copy(file_path, "murders.csv")
# file.copy(from, to), returns TRUE/FALSE (success/failure)
library(data.table)
x <- fread("murders.csv")
class(x)
knitr::opts_chunk$set(echo = TRUE)
for (i in seq_len(length(Analyzed_fac))) {
# ---- First page (tables + plots) ----
print(table_individual(i, ls, "avg"))
print(ls[, i]$plot)
print(table_individual(i, ls_r, "r_avg"))
print(ls_r[, i]$plot)
# Page break
cat("\\newpage\n")
# ---- Second page (distribution plots) ----
print(ls_dist[, i]$bargraph)
print(ls_dist[, i]$linegraph)
# Clear + spacer page (except after last iteration)
if (i < length(Analyzed_fac)) {
cat("\\clearpage\n\\newpage\n\\mbox{}\n")
}
}
