<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.398">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="keywords" content="Wrangling">

<title>STAT 3000 - Dates And Times</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Dates And Times</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
    <a href="https://github.com/ywanglab/STAT3000" title="GitHub" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../slides/00-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 0-Intro</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../slides/01-unix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 1-Unix</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../slides/02-rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 2-RStudio &amp; Quarto</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../slides/04-git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3-Git &amp; GitHub</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../psets/hw1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HW-1</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../slides/05-r-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Basics</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#dates-and-times" id="toc-dates-and-times" class="nav-link active" data-scroll-target="#dates-and-times">dates and times</a></li>
  <li><a href="#parsing-dates-and-times" id="toc-parsing-dates-and-times" class="nav-link" data-scroll-target="#parsing-dates-and-times">Parsing dates and times</a></li>
  <li><a href="#the-date-data-type" id="toc-the-date-data-type" class="nav-link" data-scroll-target="#the-date-data-type">The date data type</a></li>
  <li><a href="#casting" id="toc-casting" class="nav-link" data-scroll-target="#casting">Casting</a></li>
  <li><a href="#the-date-data-type-1" id="toc-the-date-data-type-1" class="nav-link" data-scroll-target="#the-date-data-type-1">The date data type</a></li>
  <li><a href="#change-date-labels" id="toc-change-date-labels" class="nav-link" data-scroll-target="#change-date-labels">Change date labels</a></li>
  <li><a href="#the-lubridate-package" id="toc-the-lubridate-package" class="nav-link" data-scroll-target="#the-lubridate-package">The lubridate package</a></li>
  <li><a href="#extract-year-month-day" id="toc-extract-year-month-day" class="nav-link" data-scroll-target="#extract-year-month-day">Extract year, month, day</a></li>
  <li><a href="#the-lubridate-package-1" id="toc-the-lubridate-package-1" class="nav-link" data-scroll-target="#the-lubridate-package-1">The lubridate package</a></li>
  <li><a href="#convert-strings-to-dates-ymd" id="toc-convert-strings-to-dates-ymd" class="nav-link" data-scroll-target="#convert-strings-to-dates-ymd">Convert strings to dates: <code>ymd</code></a></li>
  <li><a href="#iso-8601-date-format" id="toc-iso-8601-date-format" class="nav-link" data-scroll-target="#iso-8601-date-format">ISO 8601 Date Format</a></li>
  <li><a href="#tackle-confusion" id="toc-tackle-confusion" class="nav-link" data-scroll-target="#tackle-confusion">Tackle confusion</a></li>
  <li><a href="#time" id="toc-time" class="nav-link" data-scroll-target="#time">time</a></li>
  <li><a href="#all-time-zones" id="toc-all-time-zones" class="nav-link" data-scroll-target="#all-time-zones">All time zones</a></li>
  <li><a href="#extract-hours-minutes-and-seconds" id="toc-extract-hours-minutes-and-seconds" class="nav-link" data-scroll-target="#extract-hours-minutes-and-seconds">Extract hours, minutes, and seconds</a></li>
  <li><a href="#parse-strongs-to-hms" id="toc-parse-strongs-to-hms" class="nav-link" data-scroll-target="#parse-strongs-to-hms">Parse strongs to hms</a></li>
  <li><a href="#more-on-make-date" id="toc-more-on-make-date" class="nav-link" data-scroll-target="#more-on-make-date">More on <code>make-date</code></a></li>
  <li><a href="#round-date-or-time" id="toc-round-date-or-time" class="nav-link" data-scroll-target="#round-date-or-time">Round date or time</a></li>
  <li><a href="#the-lubridate-package-2" id="toc-the-lubridate-package-2" class="nav-link" data-scroll-target="#the-lubridate-package-2">The lubridate package</a></li>
  <li><a href="#other-functions" id="toc-other-functions" class="nav-link" data-scroll-target="#other-functions">Other functions</a></li>
  <li><a href="#dates-and-times-with-data.table" id="toc-dates-and-times-with-data.table" class="nav-link" data-scroll-target="#dates-and-times-with-data.table">Dates and times with data.table</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/ywanglab/STAT3000/blob/main/slides/12-dates-and-times.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="12-dates-and-times.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Dates And Times</h1>
<p class="subtitle lead"><a href="http://rafalab.dfci.harvard.edu/dsbook-part-1/wrangling/dates-and-times.html" class="uri">http://rafalab.dfci.harvard.edu/dsbook-part-1/wrangling/dates-and-times.html</a></p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>Wrangling</p>
  </div>
</div>

</header>


<section id="dates-and-times" class="level2">
<h2 class="anchored" data-anchor-id="dates-and-times">dates and times</h2>
<ul>
<li><p>We have described three main types of vectors: numeric, character, and logical.</p></li>
<li><p>we often encounter variables that are dates.</p></li>
<li><p>Although we can represent a date with a string, for example <code>November 2, 2017</code>, once we pick a reference day, referred to as the <em>epoch</em>, they can be converted to numbers by calculating the number of days since the epoch.</p></li>
<li><p>In R and Unix, <code>epoch = January 1, 1970</code>.</p></li>
</ul>
</section>
<section id="parsing-dates-and-times" class="level2">
<h2 class="anchored" data-anchor-id="parsing-dates-and-times">Parsing dates and times</h2>
<ul>
<li><p>If I tell you it’s November 2, 2017, you know what this means immediately.</p></li>
<li><p>If I tell you it’s day 17204, you will be quite confused.</p></li>
<li><p>Similar problems arise with times and even more complications can appear due to time zones.</p></li>
<li><p>For this reason, R defines a data type just for dates and times.</p></li>
</ul>
</section>
<section id="the-date-data-type" class="level2">
<h2 class="anchored" data-anchor-id="the-date-data-type">The date data type</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs) </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>polls_us_election_2016<span class="sc">$</span>startdate <span class="sc">|&gt;</span> <span class="fu">head</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-11-03" "2016-11-01" "2016-11-02" "2016-11-04" "2016-11-03"
[6] "2016-11-03"</code></pre>
</div>
</div>
<ul>
<li>The dates look like strings, but they are not:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(polls_us_election_2016<span class="sc">$</span>startdate) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
<ul>
<li>when we convert them to numbers:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(polls_us_election_2016<span class="sc">$</span>startdate) <span class="sc">|&gt;</span> <span class="fu">head</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17108 17106 17107 17109 17108 17108</code></pre>
</div>
</div>
<ul>
<li>It turns them into days since the epoch.</li>
</ul>
</section>
<section id="casting" class="level2">
<h2 class="anchored" data-anchor-id="casting">Casting</h2>
<ul>
<li><p><code>as.Date</code> converts characters into dates.</p></li>
<li><p>So to see that the epoch is day 0 we can type</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="st">"1970-01-01"</span>) <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<ul>
<li>Plotting functions, such as those in ggplot, are aware of the date format.</li>
</ul>
</section>
<section id="the-date-data-type-1" class="level2">
<h2 class="anchored" data-anchor-id="the-date-data-type-1">The date data type</h2>
<ul>
<li>Scatterplots use the numeric representation to assign positions, but include the string in the labels:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>polls_us_election_2016 <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(startdate <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2016</span>, <span class="dv">6</span>, <span class="dv">1</span>)) <span class="sc">|&gt;</span> <span class="co">#2026-06-01</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pollster <span class="sc">==</span> <span class="st">"Ipsos"</span> <span class="sc">&amp;</span> state <span class="sc">==</span> <span class="st">"U.S."</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(startdate, rawpoll_clinton)) <span class="sc">+</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="12-dates-and-times_files/figure-revealjs/rawpolls-vs-time-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="change-date-labels" class="level2">
<h2 class="anchored" data-anchor-id="change-date-labels">Change date labels</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Plot</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>polls_us_election_2016 <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(startdate <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2016</span>, <span class="dv">6</span>, <span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pollster <span class="sc">==</span> <span class="st">"Ipsos"</span> <span class="sc">&amp;</span> state <span class="sc">==</span> <span class="st">"U.S."</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(startdate, rawpoll_clinton)) <span class="sc">+</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"2 weeks"</span>, <span class="at">date_labels =</span> <span class="st">"%b %d"</span>) <span class="sc">+</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">as.Date</span>(<span class="st">"2016-10-28"</span>), <span class="at">linetype =</span> <span class="st">"dashed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>place tick marks every two weeks on the x-axis (can be “1 month”, “3 day”)</li>
<li><code>%b</code>: abbreviated month (Jan, Feb)</li>
<li><code>d</code>: day of month (01-31)</li>
</ul>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="12-dates-and-times_files/figure-revealjs/rawpolls-vs-time-2-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="the-lubridate-package" class="level2">
<h2 class="anchored" data-anchor-id="the-lubridate-package">The lubridate package</h2>
<ul>
<li>The <strong>lubridate</strong> package provides tools to work with date and times.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2002</span>) </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">sample</span>(polls_us_election_2016<span class="sc">$</span>startdate, <span class="dv">10</span>) <span class="sc">|&gt;</span> <span class="fu">sort</span>() </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># default replace = FALSE</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>dates </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2016-05-31" "2016-08-08" "2016-08-19" "2016-09-22" "2016-09-27"
 [6] "2016-10-12" "2016-10-24" "2016-10-26" "2016-10-29" "2016-10-30"</code></pre>
</div>
</div>
</section>
<section id="extract-year-month-day" class="level2">
<h2 class="anchored" data-anchor-id="extract-year-month-day">Extract year, month, day</h2>
<ul>
<li>The functions <code>year</code>, <code>month</code> and <code>day</code> extract those values:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">date =</span> dates, <span class="at">month =</span> <span class="fu">month</span>(dates), <span class="at">day =</span> <span class="fu">day</span>(dates), <span class="at">year =</span> <span class="fu">year</span>(dates)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   date       month   day  year
   &lt;date&gt;     &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
 1 2016-05-31     5    31  2016
 2 2016-08-08     8     8  2016
 3 2016-08-19     8    19  2016
 4 2016-09-22     9    22  2016
 5 2016-09-27     9    27  2016
 6 2016-10-12    10    12  2016
 7 2016-10-24    10    24  2016
 8 2016-10-26    10    26  2016
 9 2016-10-29    10    29  2016
10 2016-10-30    10    30  2016</code></pre>
</div>
</div>
</section>
<section id="the-lubridate-package-1" class="level2">
<h2 class="anchored" data-anchor-id="the-lubridate-package-1">The lubridate package</h2>
<ul>
<li>We can also extract the month labels:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">month</span>(dates, <span class="at">label =</span> <span class="cn">TRUE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] May Aug Aug Sep Sep Oct Oct Oct Oct Oct
12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec</code></pre>
</div>
</div>
</section>
<section id="convert-strings-to-dates-ymd" class="level2">
<h2 class="anchored" data-anchor-id="convert-strings-to-dates-ymd">Convert strings to dates: <code>ymd</code></h2>
<ul>
<li>The function <code>ymd</code> assumes the dates are in the format YYYY-MM-DD and tries to parse as well as possible.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20090101</span>, <span class="st">"2009-01-02"</span>, <span class="st">"2009 01 03"</span>, <span class="st">"2009-1-4"</span>, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>       <span class="st">"2009-1, 5"</span>, <span class="st">"Created on 2009 1 6"</span>, <span class="st">"200901 !!! 07"</span>) </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(x) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2009-01-01" "2009-01-02" "2009-01-03" "2009-01-04" "2009-01-05"
[6] "2009-01-06" "2009-01-07"</code></pre>
</div>
</div>
</section>
<section id="iso-8601-date-format" class="level2">
<h2 class="anchored" data-anchor-id="iso-8601-date-format">ISO 8601 Date Format</h2>
<ul>
<li><p>A further complication comes from the fact that dates often come in different formats in which the order of year, month, and day are different.</p></li>
<li><p>The preferred format YYYY-MM-DD: the ISO 8601.</p></li>
</ul>
</section>
<section id="tackle-confusion" class="level2">
<h2 class="anchored" data-anchor-id="tackle-confusion">Tackle confusion</h2>
<ul>
<li><p>But, what if “09/01/02”? This could be September 1, 2002 or January 2, 2009 or January 9, 2002.</p></li>
<li><p>In these cases, examining the entire vector of dates and determine the format. Then</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"09/01/02"</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(x) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2009-01-02"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mdy</span>(x) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2002-09-01"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(x) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2002-01-09"</code></pre>
</div>
</div>
</section>
<section id="time" class="level2">
<h2 class="anchored" data-anchor-id="time">time</h2>
<ul>
<li><p>In base R, get the current time by <code>Sys.time()</code>.</p></li>
<li><p>The <strong>lubridate</strong> package, <code>now</code>, that permits you to define the time zone:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2026-01-22 12:04:37 CST"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>(<span class="st">"GMT"</span>) <span class="co">#Greenwich Mean Time =UTC+0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2026-01-22 18:04:37 GMT"</code></pre>
</div>
</div>
<ul>
<li>GMT: older term based on the solar time at Greenwich, London (0 deg longitude);</li>
<li>UTC: Modern term (based on atomic clocks)</li>
</ul>
</section>
<section id="all-time-zones" class="level2">
<h2 class="anchored" data-anchor-id="all-time-zones">All time zones</h2>
<ul>
<li>You can see all the available time zones with:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OlsonNames</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Africa/Abidjan"                   "Africa/Accra"                    
  [3] "Africa/Addis_Ababa"               "Africa/Algiers"                  
  [5] "Africa/Asmara"                    "Africa/Asmera"                   
  [7] "Africa/Bamako"                    "Africa/Bangui"                   
  [9] "Africa/Banjul"                    "Africa/Bissau"                   
 [11] "Africa/Blantyre"                  "Africa/Brazzaville"              
 [13] "Africa/Bujumbura"                 "Africa/Cairo"                    
 [15] "Africa/Casablanca"                "Africa/Ceuta"                    
 [17] "Africa/Conakry"                   "Africa/Dakar"                    
 [19] "Africa/Dar_es_Salaam"             "Africa/Djibouti"                 
 [21] "Africa/Douala"                    "Africa/El_Aaiun"                 
 [23] "Africa/Freetown"                  "Africa/Gaborone"                 
 [25] "Africa/Harare"                    "Africa/Johannesburg"             
 [27] "Africa/Juba"                      "Africa/Kampala"                  
 [29] "Africa/Khartoum"                  "Africa/Kigali"                   
 [31] "Africa/Kinshasa"                  "Africa/Lagos"                    
 [33] "Africa/Libreville"                "Africa/Lome"                     
 [35] "Africa/Luanda"                    "Africa/Lubumbashi"               
 [37] "Africa/Lusaka"                    "Africa/Malabo"                   
 [39] "Africa/Maputo"                    "Africa/Maseru"                   
 [41] "Africa/Mbabane"                   "Africa/Mogadishu"                
 [43] "Africa/Monrovia"                  "Africa/Nairobi"                  
 [45] "Africa/Ndjamena"                  "Africa/Niamey"                   
 [47] "Africa/Nouakchott"                "Africa/Ouagadougou"              
 [49] "Africa/Porto-Novo"                "Africa/Sao_Tome"                 
 [51] "Africa/Timbuktu"                  "Africa/Tripoli"                  
 [53] "Africa/Tunis"                     "Africa/Windhoek"                 
 [55] "America/Adak"                     "America/Anchorage"               
 [57] "America/Anguilla"                 "America/Antigua"                 
 [59] "America/Araguaina"                "America/Argentina/Buenos_Aires"  
 [61] "America/Argentina/Catamarca"      "America/Argentina/ComodRivadavia"
 [63] "America/Argentina/Cordoba"        "America/Argentina/Jujuy"         
 [65] "America/Argentina/La_Rioja"       "America/Argentina/Mendoza"       
 [67] "America/Argentina/Rio_Gallegos"   "America/Argentina/Salta"         
 [69] "America/Argentina/San_Juan"       "America/Argentina/San_Luis"      
 [71] "America/Argentina/Tucuman"        "America/Argentina/Ushuaia"       
 [73] "America/Aruba"                    "America/Asuncion"                
 [75] "America/Atikokan"                 "America/Atka"                    
 [77] "America/Bahia"                    "America/Bahia_Banderas"          
 [79] "America/Barbados"                 "America/Belem"                   
 [81] "America/Belize"                   "America/Blanc-Sablon"            
 [83] "America/Boa_Vista"                "America/Bogota"                  
 [85] "America/Boise"                    "America/Buenos_Aires"            
 [87] "America/Cambridge_Bay"            "America/Campo_Grande"            
 [89] "America/Cancun"                   "America/Caracas"                 
 [91] "America/Catamarca"                "America/Cayenne"                 
 [93] "America/Cayman"                   "America/Chicago"                 
 [95] "America/Chihuahua"                "America/Coral_Harbour"           
 [97] "America/Cordoba"                  "America/Costa_Rica"              
 [99] "America/Creston"                  "America/Cuiaba"                  
[101] "America/Curacao"                  "America/Danmarkshavn"            
[103] "America/Dawson"                   "America/Dawson_Creek"            
[105] "America/Denver"                   "America/Detroit"                 
[107] "America/Dominica"                 "America/Edmonton"                
[109] "America/Eirunepe"                 "America/El_Salvador"             
[111] "America/Ensenada"                 "America/Fort_Nelson"             
[113] "America/Fort_Wayne"               "America/Fortaleza"               
[115] "America/Glace_Bay"                "America/Godthab"                 
[117] "America/Goose_Bay"                "America/Grand_Turk"              
[119] "America/Grenada"                  "America/Guadeloupe"              
[121] "America/Guatemala"                "America/Guayaquil"               
[123] "America/Guyana"                   "America/Halifax"                 
[125] "America/Havana"                   "America/Hermosillo"              
[127] "America/Indiana/Indianapolis"     "America/Indiana/Knox"            
[129] "America/Indiana/Marengo"          "America/Indiana/Petersburg"      
[131] "America/Indiana/Tell_City"        "America/Indiana/Vevay"           
[133] "America/Indiana/Vincennes"        "America/Indiana/Winamac"         
[135] "America/Indianapolis"             "America/Inuvik"                  
[137] "America/Iqaluit"                  "America/Jamaica"                 
[139] "America/Jujuy"                    "America/Juneau"                  
[141] "America/Kentucky/Louisville"      "America/Kentucky/Monticello"     
[143] "America/Knox_IN"                  "America/Kralendijk"              
[145] "America/La_Paz"                   "America/Lima"                    
[147] "America/Los_Angeles"              "America/Louisville"              
[149] "America/Lower_Princes"            "America/Maceio"                  
[151] "America/Managua"                  "America/Manaus"                  
[153] "America/Marigot"                  "America/Martinique"              
[155] "America/Matamoros"                "America/Mazatlan"                
[157] "America/Mendoza"                  "America/Menominee"               
[159] "America/Merida"                   "America/Metlakatla"              
[161] "America/Mexico_City"              "America/Miquelon"                
[163] "America/Moncton"                  "America/Monterrey"               
[165] "America/Montevideo"               "America/Montreal"                
[167] "America/Montserrat"               "America/Nassau"                  
[169] "America/New_York"                 "America/Nipigon"                 
[171] "America/Nome"                     "America/Noronha"                 
[173] "America/North_Dakota/Beulah"      "America/North_Dakota/Center"     
[175] "America/North_Dakota/New_Salem"   "America/Nuuk"                    
[177] "America/Ojinaga"                  "America/Panama"                  
[179] "America/Pangnirtung"              "America/Paramaribo"              
[181] "America/Phoenix"                  "America/Port-au-Prince"          
[183] "America/Port_of_Spain"            "America/Porto_Acre"              
[185] "America/Porto_Velho"              "America/Puerto_Rico"             
[187] "America/Punta_Arenas"             "America/Rainy_River"             
[189] "America/Rankin_Inlet"             "America/Recife"                  
[191] "America/Regina"                   "America/Resolute"                
[193] "America/Rio_Branco"               "America/Rosario"                 
[195] "America/Santa_Isabel"             "America/Santarem"                
[197] "America/Santiago"                 "America/Santo_Domingo"           
[199] "America/Sao_Paulo"                "America/Scoresbysund"            
[201] "America/Shiprock"                 "America/Sitka"                   
[203] "America/St_Barthelemy"            "America/St_Johns"                
[205] "America/St_Kitts"                 "America/St_Lucia"                
[207] "America/St_Thomas"                "America/St_Vincent"              
[209] "America/Swift_Current"            "America/Tegucigalpa"             
[211] "America/Thule"                    "America/Thunder_Bay"             
[213] "America/Tijuana"                  "America/Toronto"                 
[215] "America/Tortola"                  "America/Vancouver"               
[217] "America/Virgin"                   "America/Whitehorse"              
[219] "America/Winnipeg"                 "America/Yakutat"                 
[221] "America/Yellowknife"              "Antarctica/Casey"                
[223] "Antarctica/Davis"                 "Antarctica/DumontDUrville"       
[225] "Antarctica/Macquarie"             "Antarctica/Mawson"               
[227] "Antarctica/McMurdo"               "Antarctica/Palmer"               
[229] "Antarctica/Rothera"               "Antarctica/South_Pole"           
[231] "Antarctica/Syowa"                 "Antarctica/Troll"                
[233] "Antarctica/Vostok"                "Arctic/Longyearbyen"             
[235] "Asia/Aden"                        "Asia/Almaty"                     
[237] "Asia/Amman"                       "Asia/Anadyr"                     
[239] "Asia/Aqtau"                       "Asia/Aqtobe"                     
[241] "Asia/Ashgabat"                    "Asia/Ashkhabad"                  
[243] "Asia/Atyrau"                      "Asia/Baghdad"                    
[245] "Asia/Bahrain"                     "Asia/Baku"                       
[247] "Asia/Bangkok"                     "Asia/Barnaul"                    
[249] "Asia/Beirut"                      "Asia/Bishkek"                    
[251] "Asia/Brunei"                      "Asia/Calcutta"                   
[253] "Asia/Chita"                       "Asia/Choibalsan"                 
[255] "Asia/Chongqing"                   "Asia/Chungking"                  
[257] "Asia/Colombo"                     "Asia/Dacca"                      
[259] "Asia/Damascus"                    "Asia/Dhaka"                      
[261] "Asia/Dili"                        "Asia/Dubai"                      
[263] "Asia/Dushanbe"                    "Asia/Famagusta"                  
[265] "Asia/Gaza"                        "Asia/Harbin"                     
[267] "Asia/Hebron"                      "Asia/Ho_Chi_Minh"                
[269] "Asia/Hong_Kong"                   "Asia/Hovd"                       
[271] "Asia/Irkutsk"                     "Asia/Istanbul"                   
[273] "Asia/Jakarta"                     "Asia/Jayapura"                   
[275] "Asia/Jerusalem"                   "Asia/Kabul"                      
[277] "Asia/Kamchatka"                   "Asia/Karachi"                    
[279] "Asia/Kashgar"                     "Asia/Kathmandu"                  
[281] "Asia/Katmandu"                    "Asia/Khandyga"                   
[283] "Asia/Kolkata"                     "Asia/Krasnoyarsk"                
[285] "Asia/Kuala_Lumpur"                "Asia/Kuching"                    
[287] "Asia/Kuwait"                      "Asia/Macao"                      
[289] "Asia/Macau"                       "Asia/Magadan"                    
[291] "Asia/Makassar"                    "Asia/Manila"                     
[293] "Asia/Muscat"                      "Asia/Nicosia"                    
[295] "Asia/Novokuznetsk"                "Asia/Novosibirsk"                
[297] "Asia/Omsk"                        "Asia/Oral"                       
[299] "Asia/Phnom_Penh"                  "Asia/Pontianak"                  
[301] "Asia/Pyongyang"                   "Asia/Qatar"                      
[303] "Asia/Qostanay"                    "Asia/Qyzylorda"                  
[305] "Asia/Rangoon"                     "Asia/Riyadh"                     
[307] "Asia/Saigon"                      "Asia/Sakhalin"                   
[309] "Asia/Samarkand"                   "Asia/Seoul"                      
[311] "Asia/Shanghai"                    "Asia/Singapore"                  
[313] "Asia/Srednekolymsk"               "Asia/Taipei"                     
[315] "Asia/Tashkent"                    "Asia/Tbilisi"                    
[317] "Asia/Tehran"                      "Asia/Tel_Aviv"                   
[319] "Asia/Thimbu"                      "Asia/Thimphu"                    
[321] "Asia/Tokyo"                       "Asia/Tomsk"                      
[323] "Asia/Ujung_Pandang"               "Asia/Ulaanbaatar"                
[325] "Asia/Ulan_Bator"                  "Asia/Urumqi"                     
[327] "Asia/Ust-Nera"                    "Asia/Vientiane"                  
[329] "Asia/Vladivostok"                 "Asia/Yakutsk"                    
[331] "Asia/Yangon"                      "Asia/Yekaterinburg"              
[333] "Asia/Yerevan"                     "Atlantic/Azores"                 
[335] "Atlantic/Bermuda"                 "Atlantic/Canary"                 
[337] "Atlantic/Cape_Verde"              "Atlantic/Faeroe"                 
[339] "Atlantic/Faroe"                   "Atlantic/Jan_Mayen"              
[341] "Atlantic/Madeira"                 "Atlantic/Reykjavik"              
[343] "Atlantic/South_Georgia"           "Atlantic/St_Helena"              
[345] "Atlantic/Stanley"                 "Australia/ACT"                   
[347] "Australia/Adelaide"               "Australia/Brisbane"              
[349] "Australia/Broken_Hill"            "Australia/Canberra"              
[351] "Australia/Currie"                 "Australia/Darwin"                
[353] "Australia/Eucla"                  "Australia/Hobart"                
[355] "Australia/LHI"                    "Australia/Lindeman"              
[357] "Australia/Lord_Howe"              "Australia/Melbourne"             
[359] "Australia/North"                  "Australia/NSW"                   
[361] "Australia/Perth"                  "Australia/Queensland"            
[363] "Australia/South"                  "Australia/Sydney"                
[365] "Australia/Tasmania"               "Australia/Victoria"              
[367] "Australia/West"                   "Australia/Yancowinna"            
[369] "Brazil/Acre"                      "Brazil/DeNoronha"                
[371] "Brazil/East"                      "Brazil/West"                     
[373] "Canada/Atlantic"                  "Canada/Central"                  
[375] "Canada/Eastern"                   "Canada/Mountain"                 
[377] "Canada/Newfoundland"              "Canada/Pacific"                  
[379] "Canada/Saskatchewan"              "Canada/Yukon"                    
[381] "CET"                              "Chile/Continental"               
[383] "Chile/EasterIsland"               "CST6CDT"                         
[385] "Cuba"                             "EET"                             
[387] "Egypt"                            "Eire"                            
[389] "EST"                              "EST5EDT"                         
[391] "Etc/GMT"                          "Etc/GMT-0"                       
[393] "Etc/GMT-1"                        "Etc/GMT-10"                      
[395] "Etc/GMT-11"                       "Etc/GMT-12"                      
[397] "Etc/GMT-13"                       "Etc/GMT-14"                      
[399] "Etc/GMT-2"                        "Etc/GMT-3"                       
[401] "Etc/GMT-4"                        "Etc/GMT-5"                       
[403] "Etc/GMT-6"                        "Etc/GMT-7"                       
[405] "Etc/GMT-8"                        "Etc/GMT-9"                       
[407] "Etc/GMT+0"                        "Etc/GMT+1"                       
[409] "Etc/GMT+10"                       "Etc/GMT+11"                      
[411] "Etc/GMT+12"                       "Etc/GMT+2"                       
[413] "Etc/GMT+3"                        "Etc/GMT+4"                       
[415] "Etc/GMT+5"                        "Etc/GMT+6"                       
[417] "Etc/GMT+7"                        "Etc/GMT+8"                       
[419] "Etc/GMT+9"                        "Etc/GMT0"                        
[421] "Etc/Greenwich"                    "Etc/UCT"                         
[423] "Etc/Universal"                    "Etc/UTC"                         
[425] "Etc/Zulu"                         "Europe/Amsterdam"                
[427] "Europe/Andorra"                   "Europe/Astrakhan"                
[429] "Europe/Athens"                    "Europe/Belfast"                  
[431] "Europe/Belgrade"                  "Europe/Berlin"                   
[433] "Europe/Bratislava"                "Europe/Brussels"                 
[435] "Europe/Bucharest"                 "Europe/Budapest"                 
[437] "Europe/Busingen"                  "Europe/Chisinau"                 
[439] "Europe/Copenhagen"                "Europe/Dublin"                   
[441] "Europe/Gibraltar"                 "Europe/Guernsey"                 
[443] "Europe/Helsinki"                  "Europe/Isle_of_Man"              
[445] "Europe/Istanbul"                  "Europe/Jersey"                   
[447] "Europe/Kaliningrad"               "Europe/Kiev"                     
[449] "Europe/Kirov"                     "Europe/Kyiv"                     
[451] "Europe/Lisbon"                    "Europe/Ljubljana"                
[453] "Europe/London"                    "Europe/Luxembourg"               
[455] "Europe/Madrid"                    "Europe/Malta"                    
[457] "Europe/Mariehamn"                 "Europe/Minsk"                    
[459] "Europe/Monaco"                    "Europe/Moscow"                   
[461] "Europe/Nicosia"                   "Europe/Oslo"                     
[463] "Europe/Paris"                     "Europe/Podgorica"                
[465] "Europe/Prague"                    "Europe/Riga"                     
[467] "Europe/Rome"                      "Europe/Samara"                   
[469] "Europe/San_Marino"                "Europe/Sarajevo"                 
[471] "Europe/Saratov"                   "Europe/Simferopol"               
[473] "Europe/Skopje"                    "Europe/Sofia"                    
[475] "Europe/Stockholm"                 "Europe/Tallinn"                  
[477] "Europe/Tirane"                    "Europe/Tiraspol"                 
[479] "Europe/Ulyanovsk"                 "Europe/Uzhgorod"                 
[481] "Europe/Vaduz"                     "Europe/Vatican"                  
[483] "Europe/Vienna"                    "Europe/Vilnius"                  
[485] "Europe/Volgograd"                 "Europe/Warsaw"                   
[487] "Europe/Zagreb"                    "Europe/Zaporozhye"               
[489] "Europe/Zurich"                    "GB"                              
[491] "GB-Eire"                          "GMT"                             
[493] "GMT-0"                            "GMT+0"                           
[495] "GMT0"                             "Greenwich"                       
[497] "Hongkong"                         "HST"                             
[499] "Iceland"                          "Indian/Antananarivo"             
[501] "Indian/Chagos"                    "Indian/Christmas"                
[503] "Indian/Cocos"                     "Indian/Comoro"                   
[505] "Indian/Kerguelen"                 "Indian/Mahe"                     
[507] "Indian/Maldives"                  "Indian/Mauritius"                
[509] "Indian/Mayotte"                   "Indian/Reunion"                  
[511] "Iran"                             "Israel"                          
[513] "Jamaica"                          "Japan"                           
[515] "Kwajalein"                        "Libya"                           
[517] "MET"                              "Mexico/BajaNorte"                
[519] "Mexico/BajaSur"                   "Mexico/General"                  
[521] "MST"                              "MST7MDT"                         
[523] "Navajo"                           "NZ"                              
[525] "NZ-CHAT"                          "Pacific/Apia"                    
[527] "Pacific/Auckland"                 "Pacific/Bougainville"            
[529] "Pacific/Chatham"                  "Pacific/Chuuk"                   
[531] "Pacific/Easter"                   "Pacific/Efate"                   
[533] "Pacific/Enderbury"                "Pacific/Fakaofo"                 
[535] "Pacific/Fiji"                     "Pacific/Funafuti"                
[537] "Pacific/Galapagos"                "Pacific/Gambier"                 
[539] "Pacific/Guadalcanal"              "Pacific/Guam"                    
[541] "Pacific/Honolulu"                 "Pacific/Johnston"                
[543] "Pacific/Kanton"                   "Pacific/Kiritimati"              
[545] "Pacific/Kosrae"                   "Pacific/Kwajalein"               
[547] "Pacific/Majuro"                   "Pacific/Marquesas"               
[549] "Pacific/Midway"                   "Pacific/Nauru"                   
[551] "Pacific/Niue"                     "Pacific/Norfolk"                 
[553] "Pacific/Noumea"                   "Pacific/Pago_Pago"               
[555] "Pacific/Palau"                    "Pacific/Pitcairn"                
[557] "Pacific/Pohnpei"                  "Pacific/Ponape"                  
[559] "Pacific/Port_Moresby"             "Pacific/Rarotonga"               
[561] "Pacific/Saipan"                   "Pacific/Samoa"                   
[563] "Pacific/Tahiti"                   "Pacific/Tarawa"                  
[565] "Pacific/Tongatapu"                "Pacific/Truk"                    
[567] "Pacific/Wake"                     "Pacific/Wallis"                  
[569] "Pacific/Yap"                      "Poland"                          
[571] "Portugal"                         "PRC"                             
[573] "PST8PDT"                          "ROC"                             
[575] "ROK"                              "Singapore"                       
[577] "Turkey"                           "UCT"                             
[579] "Universal"                        "US/Alaska"                       
[581] "US/Aleutian"                      "US/Arizona"                      
[583] "US/Central"                       "US/East-Indiana"                 
[585] "US/Eastern"                       "US/Hawaii"                       
[587] "US/Indiana-Starke"                "US/Michigan"                     
[589] "US/Mountain"                      "US/Pacific"                      
[591] "US/Samoa"                         "UTC"                             
[593] "W-SU"                             "WET"                             
[595] "Zulu"                            
attr(,"Version")
[1] "2022e"</code></pre>
</div>
</div>
</section>
<section id="extract-hours-minutes-and-seconds" class="level2">
<h2 class="anchored" data-anchor-id="extract-hours-minutes-and-seconds">Extract hours, minutes, and seconds</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>() <span class="sc">|&gt;</span> <span class="fu">hour</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>() <span class="sc">|&gt;</span> <span class="fu">minute</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>() <span class="sc">|&gt;</span> <span class="fu">second</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 37.482</code></pre>
</div>
</div>
</section>
<section id="parse-strongs-to-hms" class="level2">
<h2 class="anchored" data-anchor-id="parse-strongs-to-hms">Parse strongs to hms</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"12:34:56"</span>) </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hms</span>(x) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "12H 34M 56S"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"Nov/2/2012 12:34:56"</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mdy_hms</span>(x) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2012-11-02 12:34:56 UTC"</code></pre>
</div>
</div>
</section>
<section id="more-on-make-date" class="level2">
<h2 class="anchored" data-anchor-id="more-on-make-date">More on <code>make-date</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_date</span>(<span class="dv">2019</span>, <span class="dv">7</span>, <span class="dv">6</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2019-07-06"</code></pre>
</div>
</div>
<ul>
<li>To make a vector of January 1 for the 80s we write:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_date</span>(<span class="dv">1980</span><span class="sc">:</span><span class="dv">1989</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1980-01-01" "1981-01-01" "1982-01-01" "1983-01-01" "1984-01-01"
 [6] "1985-01-01" "1986-01-01" "1987-01-01" "1988-01-01" "1989-01-01"</code></pre>
</div>
</div>
</section>
<section id="round-date-or-time" class="level2">
<h2 class="anchored" data-anchor-id="round-date-or-time">Round date or time</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">"2016-06-15 13:20:00"</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">round_date</span>(x, <span class="st">"hour"</span>)   <span class="co"># nearest hour (13:00 or 14:00)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-06-15 13:00:00 UTC"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor_date</span>(x, <span class="st">"hour"</span>)   <span class="co"># 13:00</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-06-15 13:00:00 UTC"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ceiling_date</span>(x, <span class="st">"hour"</span>) <span class="co"># 14:00</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-06-15 14:00:00 UTC"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">"2016-06-20"</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round_date</span>(d, <span class="st">"month"</span>)  <span class="co"># likely "2016-07-01" (closer to July 1 than June 1)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-07-01"</code></pre>
</div>
</div>
</section>
<section id="the-lubridate-package-2" class="level2">
<h2 class="anchored" data-anchor-id="the-lubridate-package-2">The lubridate package</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Plot</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<ul>
<li>Example: group all the polls by week of the year:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>polls_us_election_2016 <span class="sc">|&gt;</span>  </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">week =</span> <span class="fu">round_date</span>(startdate, <span class="st">"week"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(week) <span class="sc">|&gt;</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">margin =</span> <span class="fu">mean</span>(rawpoll_clinton <span class="sc">-</span> rawpoll_trump)) <span class="sc">|&gt;</span> </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(week, margin)) <span class="sc">+</span> </span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="12-dates-and-times_files/figure-revealjs/poll-margin-versus-week-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="other-functions" class="level2">
<h2 class="anchored" data-anchor-id="other-functions">Other functions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"2016-06-01 08:00:00"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>t2 <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"2016-06-03 14:30:00"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">difftime</span>(t2, t1, <span class="at">units =</span> <span class="st">"hours"</span>) <span class="co"># Base R: Time difference of 54.5 hours</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 54.5 hours</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">"2016-06-01 08:00:00"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>end   <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">"2016-06-03 14:30:00"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>int <span class="ot">&lt;-</span> <span class="fu">interval</span>(start, end) <span class="co"># [1] 2016-06-01 08:00:00 UTC--2016-06-03 14:30:00 UTC</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>int</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2016-06-01 08:00:00 UTC--2016-06-03 14:30:00 UTC</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">time_length</span>(int, <span class="st">"hours"</span>) <span class="co"># 54.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 54.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">time_length</span>(int, <span class="st">"days"</span>) <span class="co"># 2.270833...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.270833</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">time_length</span>(int, <span class="st">"weeks"</span>) <span class="co"># 0.3244...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3244048</code></pre>
</div>
</div>
</section>
<section id="dates-and-times-with-data.table" class="level2">
<h2 class="anchored" data-anchor-id="dates-and-times-with-data.table">Dates and times with data.table</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>st <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2024-03-04"</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">day</span>(st) <span class="co">#&gt; [1] 4  # data.table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mday</span>(st) <span class="co">#&gt; [1] 4  Lubridate function</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<ul>
<li><p>Other similar functions in data.table are <code>second</code>, <code>minute</code>, <code>hour</code>, <code>yday</code>, <code>wday</code>, <code>week</code>, <code>isoweek</code> and <code>quarter</code>.</p></li>
<li><p>data.table <code>IDate</code> and <code>ITime</code> store dates/times more efficiently</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(polls_us_election_2016<span class="sc">$</span>startdate) <span class="co">#&gt; 33936 bytes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>33936 bytes</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(<span class="fu">as.IDate</span>(polls_us_election_2016<span class="sc">$</span>startdate)) <span class="co">#&gt; 17168 bytes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>17168 bytes</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->

<script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    // dispatch for htmlwidgets
    function fireSlideEnter() {
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);
    }

    function fireSlideChanged(previousSlide, currentSlide) {
      fireSlideEnter();

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>