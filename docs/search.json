[
  {
    "objectID": "slides/05-r-basics.html#packages",
    "href": "slides/05-r-basics.html#packages",
    "title": "R Basics",
    "section": "Packages",
    "text": "Packages\n\nbase comes from the installation of R.\nadd-on packages that can be obtained from CRAN\nUse install.packages to install the dslabs package from CRAN\nTry: sessionInfo, installed.packages",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#prebuilt-functions",
    "href": "slides/05-r-basics.html#prebuilt-functions",
    "title": "R Basics",
    "section": "Prebuilt functions",
    "text": "Prebuilt functions\n\nR base includes automatically loaded packages: stats, graphics, grDevices, utils, datasets, methods.\nVery popular packages not included in R base: ggplot2, dplyr, tidyr, and data.table, caret, etc. They can be installed on the fly when RStudio prompts.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#base-r-functions",
    "href": "slides/05-r-basics.html#base-r-functions",
    "title": "R Basics",
    "section": "Base R functions",
    "text": "Base R functions\n\nExamples: ls, rm, library, search, factor, list, exists, str, typeof, and class.\nYou can see the raw code for a function by typing its name without the parentheses.\n\ntype ls on your console to see an example.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#help-system",
    "href": "slides/05-r-basics.html#help-system",
    "title": "R Basics",
    "section": "Help system",
    "text": "Help system\n\nYou can learn about function using\n\nhelp(\"ls\")\nor\n?ls\n\nmany packages provide vignettes that are like how-to manuals for different analyses",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#variables",
    "href": "slides/05-r-basics.html#variables",
    "title": "R Basics",
    "section": "Variables",
    "text": "Variables\n\nDefine a variable.\n\n\na &lt;- 2\n\n\nUse ls to see if it’s there. Also take a look at the Environment tab in RStudio.\n\n\nls()\n\n[1] \"a\"               \"has_annotations\"\n\n\n\nUse rm to remove the variable you defined.\n\n\nrm(a)",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#the-workspace",
    "href": "slides/05-r-basics.html#the-workspace",
    "title": "R Basics",
    "section": "The workspace",
    "text": "The workspace\n\neach time start R, a new (clean slate) workspace that does not have any variables or libraries is loaded\nwhen exit R you will be asked if you want to save the workspace\n\nIn most cases, always better off saying NO\n\nif you save a workspace it will be saved as a hidden file .Rdata and whenever R is started in a directory with a saved workspace then that workspace will be re-instantiated and used",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#the-search-paths",
    "href": "slides/05-r-basics.html#the-search-paths",
    "title": "R Basics",
    "section": "The search paths",
    "text": "The search paths\n\nsearch() # return the search path that R checks in order\n\n[1] \".GlobalEnv\"        \"package:stats\"     \"package:graphics\" \n[4] \"package:grDevices\" \"package:utils\"     \"package:datasets\" \n[7] \"package:methods\"   \"Autoloads\"         \"package:base\"     \n\n\n\nTwo functions have the same name will be searched in the order defeined in the search path.\nWhen you run\n\n\nlibrary(deplyr)\n\npackage deplyr is added near the top of the search path.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#variable-naming-convention",
    "href": "slides/05-r-basics.html#variable-naming-convention",
    "title": "R Basics",
    "section": "Variable naming convention",
    "text": "Variable naming convention\n\nuse meaningful words (nouns) that describe what is stored, only lower case, and underscores, no spaces.\nDo not use the period . in variable names. R may treat it differently and those can cause unintended actions\nFor more this guide.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#main-data-types",
    "href": "slides/05-r-basics.html#main-data-types",
    "title": "R Basics",
    "section": "Main data types",
    "text": "Main data types\n\nOne dimensional vectors: double, integer, logical, complex, characters.\ninteger and double are both numerical\nFactors (categorical variables): take finite discrete values\nLists: this includes data frames.\nArrays (matrices): all elements are of the same type\nDate and time\ntibble (comes from tidyverse, behaves like a dataframe, print friendly, no automatic type change, avoids silent bugs)\nS3 objects (default R system, flexible, but can be fragile) vs. S4 objects (srongly typed classes, avoid silent bugs)",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#data-types",
    "href": "slides/05-r-basics.html#data-types",
    "title": "R Basics",
    "section": "Data types",
    "text": "Data types\n\nstr stands for structure, gives us information about an object.\ntypeof gives you the lower-level data storage type of the object: double, integer, char, logical, list, closure(functions), enviroment.\nclass returns the object-oriented class attribute of an object at a higher level, often user-facing level.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#typeof-and-class",
    "href": "slides/05-r-basics.html#typeof-and-class",
    "title": "R Basics",
    "section": "typeof and class",
    "text": "typeof and class\n\nd &lt;- as.Date(\"2026-02-02\")\ntypeof(d)  # \"double\"\n\n[1] \"double\"\n\nclass(d)   # \"Date\"\n\n[1] \"Date\"\n\nunclass(d) # a number (days since 1970-01-01)\n\n[1] 20486\n\n\n\nd &lt;- as.Date(\"2026-02-02\")\ntypeof(d)  # \"double\"\n\n[1] \"double\"\n\nclass(d)   # \"Date\"\n\n[1] \"Date\"\n\nunclass(d) # a number (days since 1970-01-01)\n\n[1] 20486",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#data-types-1",
    "href": "slides/05-r-basics.html#data-types-1",
    "title": "R Basics",
    "section": "Data types",
    "text": "Data types\nLet’s see some example:\n\nlibrary(dslabs)\ntypeof(murders)\n\n[1] \"list\"\n\nclass(murders)\n\n[1] \"data.frame\"\n\nstr(murders)\n\n'data.frame':   51 obs. of  5 variables:\n $ state     : chr  \"Alabama\" \"Alaska\" \"Arizona\" \"Arkansas\" ...\n $ abb       : chr  \"AL\" \"AK\" \"AZ\" \"AR\" ...\n $ region    : Factor w/ 4 levels \"Northeast\",\"South\",..: 2 4 4 2 4 4 1 2 2 2 ...\n $ population: num  4779736 710231 6392017 2915918 37253956 ...\n $ total     : num  135 19 232 93 1257 ...\n\ndim(murders)\n\n[1] 51  5",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#data-frames",
    "href": "slides/05-r-basics.html#data-frames",
    "title": "R Basics",
    "section": "Data frames",
    "text": "Data frames\n\nData frames are the most common class used in data analysis.\nData frames are like a matrix, but where the columns can have different types.\nUsually, rows represents observations and columns variables.\nyou can index them like you would a matrix, x[i, j] refers to the element in row i column j\nYou can see part of the content like this\n\n\nhead(murders)\n\n       state abb region population total\n1    Alabama  AL  South    4779736   135\n2     Alaska  AK   West     710231    19\n3    Arizona  AZ   West    6392017   232\n4   Arkansas  AR  South    2915918    93\n5 California  CA   West   37253956  1257\n6   Colorado  CO   West    5029196    65\n\n\nView a Data frames\n\nView(murders)",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#add-a-column",
    "href": "slides/05-r-basics.html#add-a-column",
    "title": "R Basics",
    "section": "Add a column",
    "text": "Add a column\n\nmurders$pop_rank &lt;- rank(murders$population)\nhead(murders)\n\n       state abb region population total pop_rank\n1    Alabama  AL  South    4779736   135       29\n2     Alaska  AK   West     710231    19        5\n3    Arizona  AZ   West    6392017   232       36\n4   Arkansas  AR  South    2915918    93       20\n5 California  CA   West   37253956  1257       51\n6   Colorado  CO   West    5029196    65       30",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#data-frames-accessor",
    "href": "slides/05-r-basics.html#data-frames-accessor",
    "title": "R Basics",
    "section": "Data frames: Accessor $",
    "text": "Data frames: Accessor $\n\n$ is called an accessor because it lets us access columns.\n\n\nmurders$population\n\n [1]  4779736   710231  6392017  2915918 37253956  5029196  3574097   897934\n [9]   601723 19687653  9920000  1360301  1567582 12830632  6483802  3046355\n[17]  2853118  4339367  4533372  1328361  5773552  6547629  9883640  5303925\n[25]  2967297  5988927   989415  1826341  2700551  1316470  8791894  2059179\n[33] 19378102  9535483   672591 11536504  3751351  3831074 12702379  1052567\n[41]  4625364   814180  6346105 25145561  2763885   625741  8001024  6724540\n[49]  1852994  5686986   563626\n\n\n\nMore generally: $ can be used to access named components of a list.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#alternative-ways-to-access-columns-confusing",
    "href": "slides/05-r-basics.html#alternative-ways-to-access-columns-confusing",
    "title": "R Basics",
    "section": "Alternative ways to access columns (confusing)",
    "text": "Alternative ways to access columns (confusing)\n\nmurders$population\nmurders[, \"population\"]\nmurders[, 4] \nmurders[[\"population\"]]\nmurders[[4]]\n\n\nIn general, using the name rather than the number as adding or removing columns will change index values, but not names.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#gotcha",
    "href": "slides/05-r-basics.html#gotcha",
    "title": "R Basics",
    "section": "Gotcha",
    "text": "Gotcha\nCompare\n\nmurders$population\nmurders[, \"population\"]\nmurders[[\"population\"]] # access the column content\nmurders['population']   # access the column as a data frame\n\n\nclass(murders['population'])\n\n[1] \"data.frame\"\n\nclass(murders[[\"population\"]])\n\n[1] \"numeric\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#with-clause",
    "href": "slides/05-r-basics.html#with-clause",
    "title": "R Basics",
    "section": "with clause",
    "text": "with clause\n\nwith let’s us use the column names as symbols to access the data.\n\n\nrate &lt;- with(murders, total/population)\n\n\nNote you can write entire code chunks by enclosing it in curly brackets:\n\n\nwith(murders, {\n   rate &lt;- total/population\n   rate &lt;- round(rate*10^5)\n   print(rate[1:5])\n})\n\n[1] 3 3 4 3 3",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#atomic-vectors",
    "href": "slides/05-r-basics.html#atomic-vectors",
    "title": "R Basics",
    "section": "Atomic vectors",
    "text": "Atomic vectors\n\nThe columns of data frames are one dimensional (atomic) vectors.\nAn atomic vector is a vector where every element must be the same type.\n\n\nlength(murders$population)\n\n[1] 51\n\ntypeof(murders$population)\n\n[1] \"double\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#create-vectors",
    "href": "slides/05-r-basics.html#create-vectors",
    "title": "R Basics",
    "section": "Create vectors",
    "text": "Create vectors\n\nUSe the concatenate function c by listing its members.\n\n\nx &lt;- c(\"s\", \"t\", \"a\", \"t\",  \" \", \"3\", \"0\", \"0\",\"0\")\n\n\nWe access the elements using []\n\n\nx[5]\n\n[1] \" \"\n\ntypeof(x[5])\n\n[1] \"character\"\n\nx[12]\n\n[1] NA\n\n\n\nNOTE R does not do array bounds checking…it silently pads with missing values",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#sequences",
    "href": "slides/05-r-basics.html#sequences",
    "title": "R Basics",
    "section": "Sequences",
    "text": "Sequences\n\nSequences are vectors with equally spaced elements.\n\n\nseq(1, 10)\n\n [1]  1  2  3  4  5  6  7  8  9 10\n\nseq(1, 9, by=3)  # why the output?\n\n[1] 1 4 7\n\n\n\nWhen you want a sequence that increases/decreases by 1 you can use the colon :\n\n\n1:10\n\n [1]  1  2  3  4  5  6  7  8  9 10\n\n3.3:7.8\n\n[1] 3.3 4.3 5.3 6.3 7.3\n\n4:-1\n\n[1]  4  3  2  1  0 -1",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#sequences-1",
    "href": "slides/05-r-basics.html#sequences-1",
    "title": "R Basics",
    "section": "Sequences",
    "text": "Sequences\n\nTo quickly generate a sequence the same length as a vector x is seq_along(x) cf. 1:length(x)\n\n\nx &lt;- c(\"b\", \"s\", \"t\", \" \", \"2\", \"6\", \"0\")\nseq_along(x)\n\n[1] 1 2 3 4 5 6 7\n\n\n\nfor (i in seq_along(x)) {\n  cat(toupper(x[i])) #concatenate and print\n}\n\nBST 260\n\n\n\nBut if the length of x is zero, then using 1:length(x) does not work for the above loop\n\n\nw = x[x==\"W\"]\nprint(w) # w=charactor(0): a char vector of length 0. \n\ncharacter(0)\n\n1:length(w) # a sequence [1 0]\n\n[1] 1 0\n\nseq_along(w) # an integer vector of legnth 0\n\ninteger(0)",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#data-types-and-coercion",
    "href": "slides/05-r-basics.html#data-types-and-coercion",
    "title": "R Basics",
    "section": "Data types and coercion",
    "text": "Data types and coercion\n\ndouble, integer, logical, complex, characters and numeric\nEach basic type has its own version of NA (a missing value)\ntesting for types: is.TYPE,\ncoercing : as.TYPE, will result in NA if it is not possible\n\n\nis.numeric(\"a\")\n\n[1] FALSE\n\nis.double(1L)\n\n[1] FALSE\n\nas.double(\"6\")\n\n[1] 6\n\nas.numeric(x) + 3\n\n[1] NA NA NA NA  5  9  3\n\ntypeof(1:10)\n\n[1] \"integer\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#coercing",
    "href": "slides/05-r-basics.html#coercing",
    "title": "R Basics",
    "section": "Coercing",
    "text": "Coercing\n\nWhen you do something inconsistent with data types, R tries to figure out what you mean and change it accordingly.\nWe call this coercing.\nR does not return an error and in some cases does not return a warning either.\nThis can cause confusion and unnoticed errors.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#vector-types-and-coercion",
    "href": "slides/05-r-basics.html#vector-types-and-coercion",
    "title": "R Basics",
    "section": "Vector types and coercion",
    "text": "Vector types and coercion\n\ncoercion is automatically performed when it is possible\ncoercison hierarchy: logical → integer → double → character\nTRUE coerces to 1 and FALSE to 0\nbut any non-zero integer coerces to TRUE, only 0 coerces to FALSE\nas.logical converts 0 and only 0 to FALSE, everything else to TRUE\nthe character string “NA” is not a missing value\n\n\ntypeof(1:10 + 0.1)\n\n[1] \"double\"\n\ntypeof(TRUE+1) # 1 is double by default in R; integer must be `1L`\n\n[1] \"double\"\n\nas.character(TRUE)\n\n[1] \"TRUE\"\n\nas.numeric(TRUE)\n\n[1] 1\n\nas.logical(1)\n\n[1] TRUE\n\nas.logical(.5)\n\n[1] TRUE",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#more-coercing-examples",
    "href": "slides/05-r-basics.html#more-coercing-examples",
    "title": "R Basics",
    "section": "More coercing examples",
    "text": "More coercing examples\n\ntypeof(1L)\n\n[1] \"integer\"\n\ntypeof(1)\n\n[1] \"double\"\n\ntypeof(1 + 1L)\n\n[1] \"double\"\n\nc(\"a\", 1, 2)\n\n[1] \"a\" \"1\" \"2\"\n\nTRUE + FALSE\n\n[1] 1\n\nfactor(\"a\") == \"a\" #`==` compare values\n\n[1] TRUE\n\nidentical(factor(\"a\"), \"a\") #check if they are the same objects\n\n[1] FALSE",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#when-coercing-fails",
    "href": "slides/05-r-basics.html#when-coercing-fails",
    "title": "R Basics",
    "section": "When coercing fails",
    "text": "When coercing fails\n\nWhen R can’t figure out how to coerce, rather an error it returns an NA:\n\n\nas.numeric(\"a\")\n\n[1] NA\n\n\n\nNote that including NAs in arithmetical operations usually returns an NA.\n\n\n1 + 2 + NA\n\n[1] NA",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#explicitly-coercing",
    "href": "slides/05-r-basics.html#explicitly-coercing",
    "title": "R Basics",
    "section": "Explicitly coercing",
    "text": "Explicitly coercing\n\nMost coercion functions start with as.\n\n\nx &lt;- factor(c(\"a\",\"b\",\"b\",\"c\"))\nprint(x)\n\n[1] a b b c\nLevels: a b c\n\nas.character(x)\n\n[1] \"a\" \"b\" \"b\" \"c\"\n\nas.numeric(x)\n\n[1] 1 2 2 3",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#coercing-and-parsing-by-readr",
    "href": "slides/05-r-basics.html#coercing-and-parsing-by-readr",
    "title": "R Basics",
    "section": "Coercing and parsing by readr",
    "text": "Coercing and parsing by readr\n\nThe readr package provides some tools for trying to parse\n\n\nx &lt;- c(\"12323\", \"12,323\")\nas.numeric(x)\n\n[1] 12323    NA\n\nlibrary(readr)\nparse_guess(x)\n\n[1] 12323 12323",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#atomic-vector-and-array",
    "href": "slides/05-r-basics.html#atomic-vector-and-array",
    "title": "R Basics",
    "section": "Atomic vector and array",
    "text": "Atomic vector and array\n\nAtomic vector is 1-D, contains only one type of data, has no dimensions (1dim =NULL`).\n\n\nx_num  &lt;- c(1, 2, 3)\nx_chr  &lt;- c(\"a\", \"b\", \"c\")\nx_log  &lt;- c(TRUE, FALSE, TRUE)\n\ntypeof(x_num) # \"double\"\n\n[1] \"double\"\n\nis.atomic(x_num) # TRUE\n\n[1] TRUE\n\ndim(x_num) # NULL\n\nNULL\n\n\n\nArray: \\(\\ge 2 D\\), one atomic type, has dim attribute\n\n\nm &lt;- matrix(1:6, nrow = 2)\ndim(m)\n\n[1] 2 3\n\n# 2 3\n\nis.atomic(m) # TRUE   (important!)\n\n[1] TRUE",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#factors-and-characters",
    "href": "slides/05-r-basics.html#factors-and-characters",
    "title": "R Basics",
    "section": "Factors and Characters",
    "text": "Factors and Characters\n\nThe murder dataset has examples of both.\n\n\nclass(murders$state)\n\n[1] \"character\"\n\nclass(murders$region)\n\n[1] \"factor\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#what-is-a-factor",
    "href": "slides/05-r-basics.html#what-is-a-factor",
    "title": "R Basics",
    "section": "What is a factor?",
    "text": "What is a factor?\n\nA factor is a R representation for a categorical variable, that has a fixed set of non-numeric values\n\nex: Sex has Male and Female in the murders dataset\n\nusually not good for variables that have lots of levels (like state names in the murders dataset)\nInternally a factor is stored as the unique set of labels (called levels) and an integer vector with values in 1 to length(levels)\n\nthe ith entry corresponds to the kth element of the levels\n\nUsually order does not matter, but if it does you can have ordered factors.\n\n\nx &lt;- murders$region\nlevels(x) # default order is lexicographical\n\n[1] \"Northeast\"     \"South\"         \"North Central\" \"West\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#setting-levels",
    "href": "slides/05-r-basics.html#setting-levels",
    "title": "R Basics",
    "section": "Setting Levels",
    "text": "Setting Levels\n\nyou can set up the levels (order) as you would like, when creating a factor\nif you do not set them up, then they will be created in lexicographic order (in the locale you are using)\n\n\nx = sample(c(\"Male\", \"Female\"), 50, replace =TRUE)\ny1 = factor(x, levels=c(\"Male\", \"Female\"))\ny2 = factor(x, levels = c(\"Female\", \"Male\"))\ny1[1:10]\n\n [1] Male   Male   Male   Female Female Male   Male   Male   Male   Female\nLevels: Male Female\n\ny2[1:10]\n\n [1] Male   Male   Male   Female Female Male   Male   Male   Male   Female\nLevels: Female Male",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#the-previous-example-continued",
    "href": "slides/05-r-basics.html#the-previous-example-continued",
    "title": "R Basics",
    "section": "The previous example continued",
    "text": "The previous example continued\n\nx = sample(c(\"Male\", \"Female\"), 50, replace =TRUE)\ny1 = factor(x, levels=c(\"Male\", \"Female\"))\ny2 = factor(x, levels = c(\"Female\", \"Male\"))\ny1[1:10]\n\n [1] Male   Male   Female Female Male   Male   Male   Female Female Male  \nLevels: Male Female\n\ny2[1:10]\n\n [1] Male   Male   Female Female Male   Male   Male   Female Female Male  \nLevels: Female Male\n\ny1==y2 # value comparison\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[46] TRUE TRUE TRUE TRUE TRUE\n\nidentical(y1,y2) # object comparison\n\n[1] FALSE",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#categories-based-on-strata",
    "href": "slides/05-r-basics.html#categories-based-on-strata",
    "title": "R Basics",
    "section": "Categories based on strata",
    "text": "Categories based on strata\n\nThe function cut bins a numeric vector into intervals and returns a factor\n\n\nage &lt;- c(5, 93, 18, 102, 14, 22, 45, 65, 67, 25, 30, 16, 21)\ncut(age, c(0, 11, 27, 43, 59, 78, 96, Inf)) # number of categories =length(breaks)-1=7\n\n [1] (0,11]   (78,96]  (11,27]  (96,Inf] (11,27]  (11,27]  (43,59]  (59,78] \n [9] (59,78]  (11,27]  (27,43]  (11,27]  (11,27] \nLevels: (0,11] (11,27] (27,43] (43,59] (59,78] (78,96] (96,Inf]\n\n# cut(age,\n#     c(0,11,27,43,59,78,96,Inf),\n#     labels = c(\"Child\",\"Young\",\"Adult\",\"Mid\",\"Senior\",\"Old\",\"Very Old\"))\n\n\ncut(age, breaks, right = FALSE) # -&gt;[a,b)\ncut(age, breaks, include.lowest = TRUE) # include the lowest age 0",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#assigning-labels",
    "href": "slides/05-r-basics.html#assigning-labels",
    "title": "R Basics",
    "section": "Assigning labels",
    "text": "Assigning labels\n\nWe can assign more meaningful level names:\n\n\nage &lt;- c(5, 93, 18, 102, 14, 22, 45, 65, 67, 25, 30, 16, 21)\ncut(age, c(0, 11, 27, 43, 59, 78, 96, Inf), \n    labels = c(\"Alpha\", \"Zoomer\", \"Millennial\", \"X\", \"Boomer\", \"Silent\", \"Greatest\"))\n\n [1] Alpha      Silent     Zoomer     Greatest   Zoomer     Zoomer    \n [7] X          Boomer     Boomer     Zoomer     Millennial Zoomer    \n[13] Zoomer    \nLevels: Alpha Zoomer Millennial X Boomer Silent Greatest",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#changing-levels",
    "href": "slides/05-r-basics.html#changing-levels",
    "title": "R Basics",
    "section": "Changing levels",
    "text": "Changing levels\n\nThis is often needed for ordinal data because R defaults to alphabetical order\n\n\ngen &lt;- factor(c(\"Alpha\", \"Zoomer\", \"Millennial\"))\nlevels(gen)\n\n[1] \"Alpha\"      \"Millennial\" \"Zoomer\"    \n\n\n\nYou can change this with the levels argument:\n\n\ngen &lt;- factor(gen, levels = c(\"Alpha\", \"Zoomer\", \"Millennial\", \"X\", \"Boomer\", \"Silent\", \"Greatest\"))\nlevels(gen)\n\n[1] \"Alpha\"      \"Zoomer\"     \"Millennial\" \"X\"          \"Boomer\"    \n[6] \"Silent\"     \"Greatest\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#reference-level",
    "href": "slides/05-r-basics.html#reference-level",
    "title": "R Basics",
    "section": "Reference level",
    "text": "Reference level\n\nA common reason we want to change levels is to assure R uses the correct reference strata.\nThis is important for linear models (lm) because the first level is assumed to be the reference.\n\n\nx &lt;- factor(c(\"no drug\", \"drug 1\", \"drug 2\"))\nlevels(x)\n\n[1] \"drug 1\"  \"drug 2\"  \"no drug\"\n\nx &lt;- relevel(x, ref = \"no drug\") \n# factor(c(\"no drug\", \"drug 1\", \"drug 2\"), levels = c(\"no drug\", \"drug 1\", \"drug 2\"))\nlevels(x)          \n\n[1] \"no drug\" \"drug 1\"  \"drug 2\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#reorder-a-factor-categorical-variable",
    "href": "slides/05-r-basics.html#reorder-a-factor-categorical-variable",
    "title": "R Basics",
    "section": "Reorder a factor (categorical) variable",
    "text": "Reorder a factor (categorical) variable\n\nThe codeThe Graph\n\n\n\nWe often want to order strata (factor) based on a summary statistic.\n\n\nx &lt;- reorder(murders$region, murders$population, sum) #reorder(x,by, FUN)\n#order the regions by their total populations by ascedning (default)\n# reorder(murders$region, murders$population, sum, decreasing = TRUE)\nlibrary(ggplot2)\nggplot(murders, aes(x = reorder(region, population, sum),\n                    y = population)) +\n  geom_bar(stat = \"summary\", fun = \"sum\") #summarize y for each x using \"sum\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#factors-integers-use-less-memory",
    "href": "slides/05-r-basics.html#factors-integers-use-less-memory",
    "title": "R Basics",
    "section": "Factors (integers) use less memory",
    "text": "Factors (integers) use less memory\n\nx &lt;- sample(murders$state[c(5,33,44)], 10^7, replace = TRUE) #sample(x,size,replace)\ny &lt;- factor(x)\nobject.size(x)\n\n80000232 bytes\n\nobject.size(y)\n\n40000648 bytes\n\n\n\nlength(x) #  10000000\n\n[1] 10000000\n\ntable(x) / length(x) #≈ 0.333, 0.333, 0.333\n\nx\nCalifornia   New York      Texas \n 0.3331877  0.3332562  0.3335561 \n\n# table counts the frequency of each unique value",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#factors-can-be-confusing",
    "href": "slides/05-r-basics.html#factors-can-be-confusing",
    "title": "R Basics",
    "section": "Factors can be confusing",
    "text": "Factors can be confusing\n\nx &lt;- factor(c(\"3\",\"2\",\"1\"), levels = c(\"3\",\"2\",\"1\"))\nas.numeric(x)\n\n[1] 1 2 3\n\nx[1]\n\n[1] 3\nLevels: 3 2 1\n\nlevels(x[1])\n\n[1] \"3\" \"2\" \"1\"\n\ntable(x[1])\n\n\n3 2 1 \n1 0 0",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#drop-extra-levels-with-droplevels",
    "href": "slides/05-r-basics.html#drop-extra-levels-with-droplevels",
    "title": "R Basics",
    "section": "Drop extra levels with droplevels",
    "text": "Drop extra levels with droplevels\n\nz &lt;- x[1]\nz &lt;- droplevels(z)\nz\n\n[1] 3\nLevels: 3\n\n\n\nBut note what happens if we change to another level:\n\n\nz[1] &lt;- \"1\" # Factors only allow values that exist in levels(z)\nz\n\n[1] &lt;NA&gt;\nLevels: 3",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#nas-and-nulls",
    "href": "slides/05-r-basics.html#nas-and-nulls",
    "title": "R Basics",
    "section": "NAs and NULLs",
    "text": "NAs and NULLs\n\nNA stands for not available and represents missing data.\nIn R there is a different kind of NA for each of the basic vector data types.\nNULL, represents a zero length list and is often returned by functions or expressions that do not have a specified return value",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#checking-nas-by-is.na",
    "href": "slides/05-r-basics.html#checking-nas-by-is.na",
    "title": "R Basics",
    "section": "Checking NAs by is.na",
    "text": "Checking NAs by is.na\n\nlibrary(dslabs)\nna_example[1:20]\n\n [1]  2  1  3  2  1  3  1  4  3  2  2 NA  2  2  1  4 NA  1  1  2\n\n\n\nThe is.na function is key for dealing with NAs\n\n\nis.na(na_example[1])\n\n[1] FALSE\n\nis.na(na_example[17])\n\n[1] TRUE\n\nis.na(NA)\n\n[1] TRUE\n\nis.na(\"NA\")\n\n[1] FALSE",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#nas-and-logical-operators",
    "href": "slides/05-r-basics.html#nas-and-logical-operators",
    "title": "R Basics",
    "section": "NAs and logical operators",
    "text": "NAs and logical operators\n\nlogical operators like and (&) and or (|) coerce their arguments when needed and possible\nthe logical operators do “lazy” evaluation, from left to right\n\n\nTRUE & NA\n\n[1] NA\n\nTRUE & 0\n\n[1] FALSE\n\nTRUE | NA\n\n[1] TRUE",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#nans-and-inf",
    "href": "slides/05-r-basics.html#nans-and-inf",
    "title": "R Basics",
    "section": "NaNs and Inf",
    "text": "NaNs and Inf\n\nNaN: Not a Number\nNaN is a double, coercing it to integer yields an NA\nInf and -Inf represent values of infinity and minus infinity\n\n\n0/0\n\n[1] NaN\n\nclass(0/0)\n\n[1] \"numeric\"\n\nsqrt(-1)\n\n[1] NaN\n\nlog(-1)\n\n[1] NaN\n\n1/Inf\n\n[1] 0\n\nInf-Inf\n\n[1] NaN",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#lists",
    "href": "slides/05-r-basics.html#lists",
    "title": "R Basics",
    "section": "Lists",
    "text": "Lists\n\nData frames are a type of list.\nLists permit components of different types and, unlike data frames, different lengths:\n\n\nx &lt;- list(name = \"John\", id = 112, grades = c(95, 87, 92))\n\n\nThe JSON format is best represented as list in R.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#access-compoenents-of-a-list",
    "href": "slides/05-r-basics.html#access-compoenents-of-a-list",
    "title": "R Basics",
    "section": "Access compoenents of a list",
    "text": "Access compoenents of a list\n\nYou can access components in different ways:\n\n\nx$name\n\n[1] \"John\"\n\nx[[1]]\n\n[1] \"John\"\n\nx[[\"name\"]]\n\n[1] \"John\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#subsetsublist-and-extraction",
    "href": "slides/05-r-basics.html#subsetsublist-and-extraction",
    "title": "R Basics",
    "section": "subset(sublist)[] and extraction [[]]",
    "text": "subset(sublist)[] and extraction [[]]\n\nx$name == x[[1]]\n\n[1] TRUE\n\nclass(x[[1]])\n\n[1] \"character\"\n\nx[1]\n\n$name\n[1] \"John\"\n\nclass(x[1])\n\n[1] \"list\"\n\nx[[1]] == x[1]\n\nname \nTRUE \n\nidentical(x[1],x[[1]])\n\n[1] FALSE",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#matrices-faster-computation",
    "href": "slides/05-r-basics.html#matrices-faster-computation",
    "title": "R Basics",
    "section": "Matrices: Faster computation",
    "text": "Matrices: Faster computation\n\nsimilar to data frames except all entries need to be of the same type.\n\n\nmat &lt;- matrix(1:12, 4, 3)\nmat\n\n     [,1] [,2] [,3]\n[1,]    1    5    9\n[2,]    2    6   10\n[3,]    3    7   11\n[4,]    4    8   12\n\nmat[2, 3]  # 10\n\n[1] 10\n\nmat[2,]\n\n[1]  2  6 10\n\nmat[,3]\n\n[1]  9 10 11 12\n\nmat[,2:3]\n\n     [,1] [,2]\n[1,]    5    9\n[2,]    6   10\n[3,]    7   11\n[4,]    8   12\n\nmat[1:2,2:3]\n\n     [,1] [,2]\n[1,]    5    9\n[2,]    6   10\n\nas.data.frame(mat)\n\n  V1 V2 V3\n1  1  5  9\n2  2  6 10\n3  3  7 11\n4  4  8 12",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#define-a-customized-functions",
    "href": "slides/05-r-basics.html#define-a-customized-functions",
    "title": "R Basics",
    "section": "Define a customized functions",
    "text": "Define a customized functions\n\nf &lt;- function(x, y, z = 0){\n  ### do calculations with x, y, z to compute object\n  return(object)\n}\n\n\npositional arguments, keyword arguments\narguments are matched by either exact name (which takes precedence) or position\nreturned value: the value specified in a call to return or the value of the last statement evaluated",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#functions",
    "href": "slides/05-r-basics.html#functions",
    "title": "R Basics",
    "section": "Functions",
    "text": "Functions\n\nany symbol found in the body of the function that does not match an argument has to be matched to a value by a process called scoping\n\n\nx &lt;-10\ns &lt;- function(n){\n  print(x)\n   return(sum(1:n))\n}\ns(2)\n\n[1] 10\n\n\n[1] 3",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#r-matches-named-arguments-first-positional-arguments-last",
    "href": "slides/05-r-basics.html#r-matches-named-arguments-first-positional-arguments-last",
    "title": "R Basics",
    "section": "R matches named arguments first, positional arguments last",
    "text": "R matches named arguments first, positional arguments last\n\nf &lt;- function(a, b, c) {\n  c(a, b, c)\n}\n\nf(1, c = 3, 2)\n\n[1] 1 2 3\n\n\n\nmean(na.rm = TRUE, c(1, NA, 3))\n\n[1] 2\n\n\n\nf &lt;- function(a, b, c) a + b + c\nf(1, 2, c = 3, b = 4)\n# Error in f(1, 2, c = 3, b = 4) : unused argument (2)",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#flow-control-and-operators",
    "href": "slides/05-r-basics.html#flow-control-and-operators",
    "title": "R Basics",
    "section": "Flow-control and operators",
    "text": "Flow-control and operators\n\nif/else; while; repeat; for; break; next\nyou can read the manual pages by calling help or using ? (sometimes you must quote the argument)\n\n\n help(\"for\")\n ?\"break\"\n ?\"&\"\n ?\"/\"",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#if-else",
    "href": "slides/05-r-basics.html#if-else",
    "title": "R Basics",
    "section": "if-else",
    "text": "if-else\n\na &lt;- 0\n\nif (a != 0) {\n  print(1/a)\n} else{\n  print(\"No reciprocal for 0.\")\n}\n\n[1] \"No reciprocal for 0.\"\n\na &lt;- 0\nifelse(a &gt; 0, 1/a, NA)\n\n[1] NA\n\n#&gt; [1] NA",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#for-loop",
    "href": "slides/05-r-basics.html#for-loop",
    "title": "R Basics",
    "section": "For loop",
    "text": "For loop\n\nfor (i in 1:3) {\n  print(i)\n}\n\n[1] 1\n[1] 2\n[1] 3\n\ncompute_s_n &lt;- function(n) { \n  sum(1:n)\n}\nm &lt;- 5\ns_n &lt;- vector(length = m) # create an empty vector\nfor (n in 1:m) {\n  s_n[n] &lt;- compute_s_n(n)\n}\nn &lt;- 1:m\nplot(n, s_n)",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#logical-operators-and",
    "href": "slides/05-r-basics.html#logical-operators-and",
    "title": "R Basics",
    "section": "Logical Operators & and |",
    "text": "Logical Operators & and |\n\n& and | perform element-wise comparison; use for vector oprations, filtering, subsetting\n\n\nx &lt;- c(TRUE, FALSE, TRUE)\ny &lt;- c(TRUE, TRUE, FALSE)\n\nx & y\n\n[1]  TRUE FALSE FALSE\n\nx | y\n\n[1] TRUE TRUE TRUE\n\n\n\nTypical use: Subsetting\n\n\nx[x &gt; 0 & x &lt; 10]",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#logical-operators-and-1",
    "href": "slides/05-r-basics.html#logical-operators-and-1",
    "title": "R Basics",
    "section": "Logical operators && and ||",
    "text": "Logical operators && and ||\n\n&& and || lazy eval (short-circuit), move left to right and return when the result is determined. Use for if, while, and guards\n\n\nx &lt;- c(TRUE, FALSE)\ny &lt;- c(FALSE, TRUE)\n\nx && y  # wrong. Each side must return a single TRUE/FALSE\n\nx || y #wrong\n\n\nif (x &gt; 0 & x &lt; 10) { ... } # wrong\nif (x &gt; 0 && x &lt; 10) { ... } # wrong if x is a vector of length &gt;1",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#arithmetic-operators",
    "href": "slides/05-r-basics.html#arithmetic-operators",
    "title": "R Basics",
    "section": "Arithmetic Operators",
    "text": "Arithmetic Operators\n\noperators like ^ or +\n?Syntax will get you the manual page\nwhen in doubt always use parentheses\n\n\n2^1+1\n\n[1] 3\n\n2^(1+1)\n\n[1] 4\n\nTRUE || TRUE && FALSE   # is the same as\n\n[1] TRUE\n\nTRUE || (TRUE && FALSE) # and different from\n\n[1] TRUE\n\n(TRUE || TRUE) && FALSE\n\n[1] FALSE",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#function-as-an-argument",
    "href": "slides/05-r-basics.html#function-as-an-argument",
    "title": "R Basics",
    "section": "Function as an argument",
    "text": "Function as an argument\n\nin R functions are first class objects - this means they can be passed as arguments, assigned to symbols, stored in other data structures\nin particular they can be passed as arguments to a function and returned as values\nin some languages (e.g. C or Java) functions are not first class objects and they cannot be passed as arguments\nPython uses a fairly similar strategy as in R",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#scope-1",
    "href": "slides/05-r-basics.html#scope-1",
    "title": "R Basics",
    "section": "Scope",
    "text": "Scope\n\nf &lt;- function(x){\n  cat(\"y is\", y,\"\\n\")\n  y &lt;- x\n  cat(\"y is\", y,\"\\n\")\n  return(y)\n}\ny &lt;- 2\nf(3)\n\ny is 2 \ny is 3 \n\n\n[1] 3",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#exampe-function-as-a-returned-value",
    "href": "slides/05-r-basics.html#exampe-function-as-a-returned-value",
    "title": "R Basics",
    "section": "Exampe: function as a returned value",
    "text": "Exampe: function as a returned value\n\nrexp: generate values from an Exponential distribution \\(f(x;\\lambda)=\\begin{cases} \\lambda e^{-\\lambda x} & x\\ge 0 \\\\ 0 & x&lt;0. \\end{cases}\\).\nnotice that a function is returned\n\n\nx = rexp(100, rate = 4)\n\nllExp = function(DATA) { #log-likelyhood\n   n = length(DATA)\n   sumx = sum(DATA)\n   return(function(mu) {n * log(mu) - mu * sumx})\n}\n\nmyLL = llExp(x)\nmyLL\n\nfunction (mu) \n{\n    n * log(mu) - mu * sumx\n}\n&lt;environment: 0x0000027efc845080&gt;",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#function-call-as-an-argument",
    "href": "slides/05-r-basics.html#function-call-as-an-argument",
    "title": "R Basics",
    "section": "Function call as an argument",
    "text": "Function call as an argument\n\n##possible values for mu\ny = seq(3,5,by = 0.1)\n\nplot(y, myLL(y), type=\"l\", xlab=\"mu\", ylab=\"log likelihood\") \n# \"l\"-line; \"p\"-points(default), \"b\"-both; \"h\"-vertical lines\nabline(v = y[which.max(myLL(y))], col = \"red\")\n\n\n\nMLE occurs at mu=3.7",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#order-of-binding",
    "href": "slides/05-r-basics.html#order-of-binding",
    "title": "R Basics",
    "section": "Order of binding",
    "text": "Order of binding\n\nsearch()\nfilter     #stats::filter()-&gt;time-series filtering\nlibrary(dplyr)\nsearch()\nfilter # dplyr::filter(): -&gt;row filtering\n\n\nby calling library(dplyr) the package dplyr has been put near the top of the search list. You can call search() before and after the call to library to check this.\nusers could inadvertently alter computations - and we will want to protect against that",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#namespaces",
    "href": "slides/05-r-basics.html#namespaces",
    "title": "R Basics",
    "section": "Namespaces",
    "text": "Namespaces\n\nTo avoid binding conflict, using &lt;pkgname&gt;::&lt;functionname&gt;:\n\n\nstats::filter\ndplyr::filter",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#examples",
    "href": "slides/05-r-basics.html#examples",
    "title": "R Basics",
    "section": "Examples",
    "text": "Examples\n\nRestart your R Console and study this example:\n\n\nlibrary(dslabs) #attach dsplabs to the search path\nexists(\"murders\")  # `murders` exists in `dslabs`\n\n[1] TRUE\n\nmurders &lt;- murders # create a copy `murders` in .GlobalEnv\nmurders2 &lt;- murders # 2nd copy\nrm(murders) # removes `murders` from .GlobalEnv\nexists(\"murders\") #R finds it in `dslabs`\n\n[1] TRUE\n\ndetach(\"package:dslabs\") #remove from the search path\nexists(\"murders\") # does not exist on the search path\n\n[1] FALSE\n\nexists(\"murders2\")\n\n[1] TRUE",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#object-oriented-programming",
    "href": "slides/05-r-basics.html#object-oriented-programming",
    "title": "R Basics",
    "section": "Object Oriented Programming",
    "text": "Object Oriented Programming\n\nR uses object oriented programming (OOP).\nBase R uses two approaches referred to as S3 and S4\nS3, the original approach, is more common, but has some limitations\nThe S4 approach is more similar to the conventions used by the Lisp family of languages.\nIn S4 there are classes that have attributes describing data structures and methods that are functions",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#object-oriented-programming-1",
    "href": "slides/05-r-basics.html#object-oriented-programming-1",
    "title": "R Basics",
    "section": "Object Oriented Programming",
    "text": "Object Oriented Programming\n\nTime seriesNumeric\n\n\n\nclass(co2) # ts object\n\n[1] \"ts\"\n\nplot(co2) # R calls plot.ts(co2)-&gt;x-axis: year\n\n\n\n\n\n\n\nplot(as.numeric(co2)) # strip away the time-index. R calls plot.default(). x-axix: index (1,2,3,...)",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#plots",
    "href": "slides/05-r-basics.html#plots",
    "title": "R Basics",
    "section": "Plots",
    "text": "Plots\n\nSoon we will learn how to use the ggplot2 package to make plots.\nR base does have functions:\n\nplot - mainly for making scatterplots.\nlines - add lines/curves to an existing plot.\nhist - to make a histogram.\nboxplot - makes boxplots.\nimage - uses color to represent entries in a matrix.",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#plots-1",
    "href": "slides/05-r-basics.html#plots-1",
    "title": "R Basics",
    "section": "Plots",
    "text": "Plots\n\nin general, we recommend using ggplot2, R base plots are often better for quick exploratory plots.\nFor example, to make a histogram of values in x simply type:\n\n\nhist(x)\n\n\nTo make a scatter plot of y versus x and then add connected line:\n\n\nplot(x,y) # open a new figure (canvas)\nlines(x,y) #adds connected line to an existing plot. It does not create a new figure(canvas)",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#scatterplot",
    "href": "slides/05-r-basics.html#scatterplot",
    "title": "R Basics",
    "section": "scatterplot",
    "text": "scatterplot\n\nlibrary(dslabs)\nwith(murders, plot(population, total))",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#histogram",
    "href": "slides/05-r-basics.html#histogram",
    "title": "R Basics",
    "section": "histogram",
    "text": "histogram\n\nx &lt;- with(murders, total / population * 100000)\nhist(x)",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/05-r-basics.html#boxplot",
    "href": "slides/05-r-basics.html#boxplot",
    "title": "R Basics",
    "section": "boxplot",
    "text": "boxplot\n\nmurders$rate &lt;- with(murders, total / population * 100000)\nboxplot(rate~region, data = murders) #y:rate x:region\n\n\n\n\nHome",
    "crumbs": [
      "R Basics"
    ]
  },
  {
    "objectID": "slides/17-dataviz-principles.html#some-motivaton",
    "href": "slides/17-dataviz-principles.html#some-motivaton",
    "title": "Data Visualization Principles",
    "section": "Some Motivaton",
    "text": "Some Motivaton\n\nSeveral of the examples come from here: https://venngage.com/blog/bad-infographics/"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#bad-example-1",
    "href": "slides/17-dataviz-principles.html#bad-example-1",
    "title": "Data Visualization Principles",
    "section": "Bad example (1)",
    "text": "Bad example (1)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#bad-example-2",
    "href": "slides/17-dataviz-principles.html#bad-example-2",
    "title": "Data Visualization Principles",
    "section": "Bad example (2)",
    "text": "Bad example (2)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#bad-example-3",
    "href": "slides/17-dataviz-principles.html#bad-example-3",
    "title": "Data Visualization Principles",
    "section": "Bad example (3)",
    "text": "Bad example (3)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#bad-example-4",
    "href": "slides/17-dataviz-principles.html#bad-example-4",
    "title": "Data Visualization Principles",
    "section": "Bad example (4)",
    "text": "Bad example (4)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#bad-example-5",
    "href": "slides/17-dataviz-principles.html#bad-example-5",
    "title": "Data Visualization Principles",
    "section": "Bad Example (5)",
    "text": "Bad Example (5)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#bad-example-6",
    "href": "slides/17-dataviz-principles.html#bad-example-6",
    "title": "Data Visualization Principles",
    "section": "Bad Example (6)",
    "text": "Bad Example (6)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#bad-example-7",
    "href": "slides/17-dataviz-principles.html#bad-example-7",
    "title": "Data Visualization Principles",
    "section": "Bad Example (7)",
    "text": "Bad Example (7)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#data-visualization-principles",
    "href": "slides/17-dataviz-principles.html#data-visualization-principles",
    "title": "Data Visualization Principles",
    "section": "Data visualization principles",
    "text": "Data visualization principles\n\nWe provide some general principles we can use as a guide for effective data visualization.\nMuch of this section is based on a talk by Karl Broman titled Creating Effective Figures and Tables and includes some of the figures which were made with code that Karl makes available on his GitHub repository, as well as class notes from Peter Aldhous’ Introduction to Data Visualization course."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#goals-of-data-visualization",
    "href": "slides/17-dataviz-principles.html#goals-of-data-visualization",
    "title": "Data Visualization Principles",
    "section": "Goals of Data visualization",
    "text": "Goals of Data visualization\n\nThe principles are mostly based on research related to how humans detect patterns and make visual comparisons.\nThe preferred approaches are those that best fit the way our brains process visual information.\nWhen deciding on a visualization approach, it is also important to keep our goal in mind."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#data-visualization-principles-1",
    "href": "slides/17-dataviz-principles.html#data-visualization-principles-1",
    "title": "Data Visualization Principles",
    "section": "Data visualization principles",
    "text": "Data visualization principles\nWe may be comparing a\n\nViewable number of quantities.\nDescribing distributions for categories or numeric values.\nComparing the data from two groups.\nDescribing the relationship between two variables.\n\n\nlibrary(tidyverse)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#encoding-data-using-visual-cues",
    "href": "slides/17-dataviz-principles.html#encoding-data-using-visual-cues",
    "title": "Data Visualization Principles",
    "section": "Encoding data using visual cues",
    "text": "Encoding data using visual cues\nSome principles for visualy encoding numerical values:\n\naligned lengths\nposition\nangles\narea\nbrightness\ncolor hue"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#example-encoding-data",
    "href": "slides/17-dataviz-principles.html#example-encoding-data",
    "title": "Data Visualization Principles",
    "section": "Example: Encoding data",
    "text": "Example: Encoding data\n\nbrowsers &lt;- data.frame(Browser = rep(c(\"Opera\",\"Safari\",\"Firefox\",\"IE\",\"Chrome\"),2),\n                       Year = rep(c(2000, 2015), each = 5),\n                       Percentage = c(3,21,23,28,26, 2,22,21,27,29)) |&gt;\n  mutate(Browser = reorder(Browser, Percentage)) # reorder by mean of Perc\n# reorder(Browswer, Precentage, FUN=mean) # default mean\n\n\nrep(1:3, times = 2) # 1 2 3 1 2 3\nrep(1:3, each = 2) # 1 1 2 2 3 3\nrep(1:3, each = 2, times = 2) # 1 1 2 2 3 3 1 1 2 2 3 3\n\nExample:\n\nSuppose we want to report the results from two hypothetical polls regarding browser preference taken in 2000 and then 2015."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#pie-chart",
    "href": "slides/17-dataviz-principles.html#pie-chart",
    "title": "Data Visualization Principles",
    "section": "Pie Chart",
    "text": "Pie Chart\nA widely used graphical representation of percentages, popularized by Microsoft Excel, is the pie chart:\n\np1 &lt;- browsers |&gt; \n  ggplot(aes(x = \"\", y = Percentage, fill = Browser)) + #x=\"\": dummy single x-category\n  geom_bar(width = 1, stat = \"identity\", col = \"black\")  + #identity: actual val. stacked bar graph; col=\"black\": add black outline around slices.\n  coord_polar(theta = \"y\") + # mapping y to angles: bar-&gt;pie\n  xlab(\"\") + ylab(\"\") +\n  theme(axis.text = element_blank(), \n        axis.ticks = element_blank(), \n        panel.grid  = element_blank()) + #remove backgoround grid\n  facet_grid(.~Year) # split into two panels\np1"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#pie-chart-warning",
    "href": "slides/17-dataviz-principles.html#pie-chart-warning",
    "title": "Data Visualization Principles",
    "section": "Pie-chart Warning",
    "text": "Pie-chart Warning\n\nHere we are representing quantities with both areas and angles, since both the angle and area of each pie slice are proportional to the quantity the slice represents.\nThis turns out to be a sub-optimal choice since, as demonstrated by perception studies, humans are not good at precisely quantifying angles and are even worse when area is the only available visual cue."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#donut-chart",
    "href": "slides/17-dataviz-principles.html#donut-chart",
    "title": "Data Visualization Principles",
    "section": "Donut chart",
    "text": "Donut chart\nThe donut chart uses only area:"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#compare-2000-to-2015",
    "href": "slides/17-dataviz-principles.html#compare-2000-to-2015",
    "title": "Data Visualization Principles",
    "section": "Compare 2000 to 2015",
    "text": "Compare 2000 to 2015\n\nCan you determine the actual percentages and rank the browsers’ popularity?\nCan you see how they changed from 2000 to 2015?\n\n\nlibrary(ggthemes)\np1 &lt;- browsers |&gt; ggplot(aes(x = \"\", y = Percentage, fill = Browser)) +\n  geom_bar(width = 1, stat = \"identity\", col = \"black\")  + coord_polar(theta = \"y\") +\n  xlab(\"\") + ylab(\"\") +\n  theme(axis.text = element_blank(), \n        axis.ticks = element_blank(), \n        panel.grid  = element_blank()) +\n  facet_grid(.~Year)\np1"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#show-the-numbers",
    "href": "slides/17-dataviz-principles.html#show-the-numbers",
    "title": "Data Visualization Principles",
    "section": "Show the numbers",
    "text": "Show the numbers\nA better approach is to simply show the numbers.\n\nbrowsers |&gt; \n  spread(Year, Percentage) |&gt; #old function: wide-&gt;long\n  #equiv: pivot_wider(names_from = Year, values_from = Percentage)\n  knitr::kable()\n\n\n\n\nBrowser\n2000\n2015\n\n\n\n\nOpera\n3\n2\n\n\nSafari\n21\n22\n\n\nFirefox\n23\n21\n\n\nChrome\n26\n29\n\n\nIE\n28\n27"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#barplots",
    "href": "slides/17-dataviz-principles.html#barplots",
    "title": "Data Visualization Principles",
    "section": "Barplots",
    "text": "Barplots\n\nCodeThe Barplot\n\n\nLength is the best visual cue:\n\nlibrary(gridExtra)\np2 &lt;- browsers |&gt;\n  ggplot(aes(Browser, Percentage)) + \n  geom_bar(stat = \"identity\", width = 0.5) +\n  ylab(\"Percent using the Browser\") +\n  facet_grid(.~Year)\n\ngrid.arrange(p1, p2, nrow = 2)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#if-foreced-to-make-a-pie-chart",
    "href": "slides/17-dataviz-principles.html#if-foreced-to-make-a-pie-chart",
    "title": "Data Visualization Principles",
    "section": "If foreced to make a pie chart",
    "text": "If foreced to make a pie chart\n\nThe codeThe pie chart\n\n\nLabel each pie slice with its respective percentage:\n\nlibrary(scales)\nbrowsers &lt;- filter(browsers, Year == 2015)\n# calculate the label positions\nat &lt;- with(browsers, 100 - cumsum(c(0,Percentage[-length(Percentage)])) - 0.5*Percentage)  \nlabel &lt;- percent(browsers$Percentage/100) # percent():create percent label\nbrowsers |&gt; ggplot(aes(x = \"\", y = Percentage, fill = Browser)) +\n  geom_bar(width = 1, stat = \"identity\", col = \"black\")  + coord_polar(theta = \"y\") +\n  xlab(\"\") + ylab(\"\") + ggtitle(\"2015\") +\n  theme(axis.text=element_blank(), \n        axis.ticks = element_blank(), \n        panel.grid  = element_blank()) +\nannotate(geom = \"text\", \n              x = 1.62, # labels on the same radius, tuned\n              y =  at, \n              label = label, size=4)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#know-when-to-include-0",
    "href": "slides/17-dataviz-principles.html#know-when-to-include-0",
    "title": "Data Visualization Principles",
    "section": "Know when to include 0",
    "text": "Know when to include 0\n\nWhen using barplots, it is misinformative not to start the bars at 0.\nThis is because, by using a barplot, we are implying the length is proportional to the quantities being displayed.\nBy avoiding 0, relatively small differences can be made to look much bigger than they actually are.\nThis approach is often used by politicians or media organizations trying to exaggerate a difference."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#know-when-to-include-0-misleading",
    "href": "slides/17-dataviz-principles.html#know-when-to-include-0-misleading",
    "title": "Data Visualization Principles",
    "section": "Know when to include 0 (misleading)",
    "text": "Know when to include 0 (misleading)\nBelow is an illustrative example used by Peter Aldhous in this lecture.\n\n(Source: Fox News, via Media Matters.)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#know-when-to-include-0-correct-way",
    "href": "slides/17-dataviz-principles.html#know-when-to-include-0-correct-way",
    "title": "Data Visualization Principles",
    "section": "Know when to include 0 (correct way)",
    "text": "Know when to include 0 (correct way)\n\ndata.frame(Year = as.character(c(2011, 2012, 2013)),Southwest_Border_Apprehensions = c(165244,170223,192298)) |&gt;\n  ggplot(aes(Year, Southwest_Border_Apprehensions )) +\n  geom_bar(stat = \"identity\", fill = \"yellow\", col = \"black\", width = 0.65)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#know-when-to-include-0-misleading-1",
    "href": "slides/17-dataviz-principles.html#know-when-to-include-0-misleading-1",
    "title": "Data Visualization Principles",
    "section": "Know when to include 0 (misleading)",
    "text": "Know when to include 0 (misleading)\n\n(Source: Fox News, via Flowing Data.)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#know-when-to-include-0-correct-way-1",
    "href": "slides/17-dataviz-principles.html#know-when-to-include-0-correct-way-1",
    "title": "Data Visualization Principles",
    "section": "Know when to include 0 (correct way)",
    "text": "Know when to include 0 (correct way)\n\ndata.frame(date = c(\"Now\", \"Jan 1, 2013\"), tax_rate = c(35, 39.6)) |&gt;\n  mutate(date = reorder(date, tax_rate)) |&gt;\n  ggplot(aes(date, tax_rate)) + \n  ylab(\"\") + xlab(\"\") +\n  geom_bar(stat = \"identity\", fill = \"yellow\", col = \"black\", width = 0.5) + \n  ggtitle(\"Top Tax Rate If Bush Tax Cut Expires\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#know-when-to-include-0-misleading-2",
    "href": "slides/17-dataviz-principles.html#know-when-to-include-0-misleading-2",
    "title": "Data Visualization Principles",
    "section": "Know when to include 0 (misleading)",
    "text": "Know when to include 0 (misleading)\nOne more example:\n\n(Source: Venezolana de Televisión via Pakistan Today and Diego Mariano.)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#know-when-to-include-0-correct-way-2",
    "href": "slides/17-dataviz-principles.html#know-when-to-include-0-correct-way-2",
    "title": "Data Visualization Principles",
    "section": "Know when to include 0 (correct way)",
    "text": "Know when to include 0 (correct way)\n\ndata.frame(Candidate = factor(c(\"Maduro\", \"Capriles\"), levels = c(\"Maduro\", \"Capriles\")),\n           Percent = c(50.66, 49.07)) |&gt;\n  ggplot(aes(Candidate, Percent, fill = Candidate)) +\n  geom_bar(stat = \"identity\", width = 0.65, show.legend = FALSE)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#when-using-postion",
    "href": "slides/17-dataviz-principles.html#when-using-postion",
    "title": "Data Visualization Principles",
    "section": "When using postion",
    "text": "When using postion\n\nThe CodeThe code\n\n\n\nWhen using position rather than length, it is not necessary to include 0.\nIn particularly when comparing between to within groups variability.\n\n\nlibrary(dslabs)\np1 &lt;- gapminder |&gt; filter(year == 2012) |&gt;\n  ggplot(aes(continent, life_expectancy)) +\n  geom_point()\np2 &lt;- p1 +\n  scale_y_continuous(limits = c(0, 84))\ngrid.arrange(p2, p1, ncol = 2)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#do-not-distort-quantities",
    "href": "slides/17-dataviz-principles.html#do-not-distort-quantities",
    "title": "Data Visualization Principles",
    "section": "Do not distort quantities",
    "text": "Do not distort quantities\nPresident Obama used the following chart to compare the US GDP to the GDP of four competing nations:\n\n(Source: The 2011 State of the Union Address)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#area-vs.-radicus",
    "href": "slides/17-dataviz-principles.html#area-vs.-radicus",
    "title": "Data Visualization Principles",
    "section": "Area vs. Radicus",
    "text": "Area vs. Radicus\n\nThe codeThe Graph\n\n\n\nHere is comparison of using radius versus area:\n\ngdp &lt;- c(14.6, 5.7, 5.3, 3.3, 2.5)\ngdp_data &lt;- data.frame(Country = rep(c(\"United States\", \"China\", \"Japan\", \"Germany\", \"France\"),2),\n           y = factor(rep(c(\"Radius\",\"Area\"),each = 5), levels = c(\"Radius\", \"Area\")),\n           GDP = c(gdp^2/min(gdp^2), gdp/min(gdp))) |&gt; \n   mutate(Country = reorder(Country, GDP))\ngdp_data |&gt; \n  ggplot(aes(Country, y, size = GDP)) + \n  geom_point(show.legend = FALSE, color = \"blue\") + \n  scale_size(range = c(2,20)) +\n  coord_flip() + ylab(\"\") + xlab(\"\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#do-not-distort-quantities-1",
    "href": "slides/17-dataviz-principles.html#do-not-distort-quantities-1",
    "title": "Data Visualization Principles",
    "section": "Do not distort quantities",
    "text": "Do not distort quantities\n\nggplot2 defaults to using area rather than radius.\nOf course, in this case, we really should be using length:\n\n\ndata.frame(Country = c(\"United States\", \"China\", \"Japan\", \"Germany\", \"France\"), GDP = gdp) |&gt;\n  mutate(Country = reorder(Country, GDP)) |&gt;\n  ggplot(aes(Country, GDP)) + \n  geom_col(width = 0.5) + # draws columns (unlike geon_bar() counting rows by default )\n  ylab(\"GDP in trillions of US dollars\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#order-categories-by-a-meaningful-value",
    "href": "slides/17-dataviz-principles.html#order-categories-by-a-meaningful-value",
    "title": "Data Visualization Principles",
    "section": "Order categories by a meaningful value",
    "text": "Order categories by a meaningful value\n\nWhen one of the axes is used to show categories the default ggplot2 behavior is to order the categories alphabetically when they are defined by character strings.\nIf they are defined by factors, they are ordered by the factor levels.\nWe rarely want to use alphabetical order.\nInstead, we should order by a meaningful quantity."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#order-categories-by-a-meaningful-value-1",
    "href": "slides/17-dataviz-principles.html#order-categories-by-a-meaningful-value-1",
    "title": "Data Visualization Principles",
    "section": "Order categories by a meaningful value",
    "text": "Order categories by a meaningful value\n\nThe codeThe Graph\n\n\nNote that the plot on the right is more informative:\n\ndata(murders)\np1 &lt;- murders |&gt; mutate(murder_rate = total / population * 100000) |&gt;\n  ggplot(aes(state, murder_rate)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  theme(axis.text.y = element_text(size = 8))  +\n  xlab(\"\")\n\np2 &lt;- murders |&gt; mutate(murder_rate = total / population * 100000) |&gt;\n  mutate(state = reorder(state, murder_rate)) |&gt;\n  ggplot(aes(state, murder_rate)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  theme(axis.text.y = element_text(size = 8))  +\n  xlab(\"\")\n\ngrid.arrange(p1, p2, ncol = 2)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#order-categories-by-a-meaningful-value-2",
    "href": "slides/17-dataviz-principles.html#order-categories-by-a-meaningful-value-2",
    "title": "Data Visualization Principles",
    "section": "Order categories by a meaningful value",
    "text": "Order categories by a meaningful value\n\nThe codeThe Graph\n\n\n\npast_year &lt;- 1970\np1 &lt;- gapminder |&gt; \n  mutate(dollars_per_day = gdp/population/365) |&gt;\n  filter(year == past_year & !is.na(gdp)) |&gt; #gdp is not missing\n  ggplot(aes(region, dollars_per_day)) +\n  geom_boxplot() +\n  geom_point() +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +\n  xlab(\"\")\n\np2 &lt;- gapminder |&gt; \n  mutate(dollars_per_day = gdp/population/365) |&gt;\n  filter(year == past_year & !is.na(gdp)) |&gt;\n  mutate(region = reorder(region, dollars_per_day, FUN = median)) |&gt;\n  ggplot(aes(region, dollars_per_day)) +\n  geom_boxplot() +\n  geom_point() +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +\n  xlab(\"\")\n\ngrid.arrange(p1, p2, nrow = 1)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#show-the-data",
    "href": "slides/17-dataviz-principles.html#show-the-data",
    "title": "Data Visualization Principles",
    "section": "Show the data",
    "text": "Show the data\n\nWe have focused on displaying single quantities across categories. We now shift our attention to displaying data, with a focus on comparing groups.\nSuppose we want to describe height data to an extra-terrestrial."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#show-the-data-1",
    "href": "slides/17-dataviz-principles.html#show-the-data-1",
    "title": "Data Visualization Principles",
    "section": "Show the data",
    "text": "Show the data\n\nheights |&gt; \n  ggplot(aes(sex, height)) + \n  geom_point() \n\n\nheights |&gt; \n  ggplot(aes(sex, height)) + \n  geom_point()"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#show-the-data-2",
    "href": "slides/17-dataviz-principles.html#show-the-data-2",
    "title": "Data Visualization Principles",
    "section": "Show the data",
    "text": "Show the data\nUse jitter to avoid over-plotting\n\nheights |&gt; \n  ggplot(aes(sex, height)) +\n  geom_jitter(width = 0.1, alpha = 0.2) \n\n\nheights |&gt; \n  ggplot(aes(sex, height)) +\n  geom_jitter(width = 0.1, alpha = 0.2)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#show-the-data-3",
    "href": "slides/17-dataviz-principles.html#show-the-data-3",
    "title": "Data Visualization Principles",
    "section": "Show the data",
    "text": "Show the data\nUse jitter to avoid over-plotting\n\nheights |&gt; \n  ggplot(aes(sex, height)) +\n  geom_jitter(width = 0.1, alpha = 0.2) \n\n\nheights |&gt; \n  ggplot(aes(sex, height)) +\n  geom_jitter(width = 0.1, alpha = 0.2)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#histograms",
    "href": "slides/17-dataviz-principles.html#histograms",
    "title": "Data Visualization Principles",
    "section": "Histograms",
    "text": "Histograms\nSince there are so many points, it is more effective to show distributions rather than individual points. We therefore show histograms for each group:\n\nheights |&gt; \n  ggplot(aes(height, after_stat(density))) + #computed density using after_stat()\n  geom_histogram(binwidth = 1, color = \"black\") +\n  facet_grid(.~sex, scales = \"free_x\") # free-x: each facet has its own x-range\n\n# For fair comparison, remove \"free_x\"\n#facet_grid(rows ~ cols): . means \"no faceting\" on that side"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#ease-comparisons",
    "href": "slides/17-dataviz-principles.html#ease-comparisons",
    "title": "Data Visualization Principles",
    "section": "Ease comparisons",
    "text": "Ease comparisons\n\nUse common axes\nIf horizontal comparison, stack graphs vertically\nIf vertical comparison, stack graphs horizontally"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#stack-vertically",
    "href": "slides/17-dataviz-principles.html#stack-vertically",
    "title": "Data Visualization Principles",
    "section": "Stack vertically",
    "text": "Stack vertically\n\nheights |&gt; \n  ggplot(aes(height, after_stat(density))) +\n  geom_histogram(binwidth = 1, color=\"black\") +\n  facet_wrap(~sex, scales = \"free_x\", nrow=2)\n\n# facet_wrap() has only one faceting dimension, so no . is needed."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#same-axis",
    "href": "slides/17-dataviz-principles.html#same-axis",
    "title": "Data Visualization Principles",
    "section": "Same axis",
    "text": "Same axis\n\np2 &lt;- heights |&gt; \n  ggplot(aes(height, after_stat(density))) +\n  geom_histogram(binwidth = 1, color = \"black\") +\n  facet_grid(sex~.)\np2"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#boxplot-is-a-vertical",
    "href": "slides/17-dataviz-principles.html#boxplot-is-a-vertical",
    "title": "Data Visualization Principles",
    "section": "Boxplot is a vertical",
    "text": "Boxplot is a vertical\nStack horizontally\n\np3 &lt;- heights |&gt; \n  ggplot(aes(sex, height)) + \n  geom_boxplot(coef = 3) + #whisker limits: [Q1-coef*IQR, Q3+coef*IQR]\n  geom_jitter(width = 0.1, alpha = 0.2) +\n  ylab(\"Height in inches\")\np3"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#contrast-and-compare",
    "href": "slides/17-dataviz-principles.html#contrast-and-compare",
    "title": "Data Visualization Principles",
    "section": "Contrast and compare",
    "text": "Contrast and compare\n\ngrid.arrange(p1, p2, p3, ncol = 3)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#consider-transformations",
    "href": "slides/17-dataviz-principles.html#consider-transformations",
    "title": "Data Visualization Principles",
    "section": "Consider transformations",
    "text": "Consider transformations\n\nThe codeThe Graph\n\n\nHere is a terrible plot comparing avg population/country across continents\n\ndata(gapminder)\np1 &lt;- gapminder |&gt; \n  filter(year == 2015) |&gt;\n  group_by(continent) |&gt; \n  summarize(population = mean(population)) |&gt; # avg population\n  mutate(continent = reorder(continent, population)) |&gt;\n  ggplot(aes(continent, population/10^6)) + \n  geom_bar(stat = \"identity\", width=0.5, fill = \"blue\") +\n  theme_excel() + \n  ylab(\"Population in Millions\") +\n  xlab(\"Continent\")\np1\n\n\nConclusion: countries in Asia have much larger populaiton (False)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#two-countries-drive-average",
    "href": "slides/17-dataviz-principles.html#two-countries-drive-average",
    "title": "Data Visualization Principles",
    "section": "Two countries drive average",
    "text": "Two countries drive average\n\np2 &lt;- gapminder |&gt; filter(year == 2015) |&gt; \n  mutate(continent = reorder(continent, population, median)) |&gt;\n  ggplot(aes(continent, population/10^6)) + \n  ylab(\"Population in Millions\") +\n  xlab(\"Continent\")\np2 +  geom_jitter(width = .1, alpha = .5)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#transformations",
    "href": "slides/17-dataviz-principles.html#transformations",
    "title": "Data Visualization Principles",
    "section": "Transformations",
    "text": "Transformations\nHere a log transformation provides a much more informative plot:\n\np2 &lt;- p2 + geom_boxplot(coef = 3) + \n  geom_jitter(width = .1, alpha = .5) + \n  scale_y_log10(breaks = c(1,10,100,1000)) + #showing original value but with log10 scale\n  theme(axis.text.x = element_text(size = 7)) \ngrid.arrange(p1, p2, ncol = 2)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#visual-cues-to-be-compared-should-be-adjacent",
    "href": "slides/17-dataviz-principles.html#visual-cues-to-be-compared-should-be-adjacent",
    "title": "Data Visualization Principles",
    "section": "Visual cues to be compared should be adjacent",
    "text": "Visual cues to be compared should be adjacent\n\nThe codeThe graph\n\n\n\ngapminder |&gt; \n  filter(year %in% c(1970, 2010) & !is.na(gdp)) |&gt;\n  mutate(dollars_per_day = gdp/population/365) |&gt;\n  mutate(labels = paste(year, continent)) |&gt;\n  ggplot(aes(labels, dollars_per_day)) +\n  geom_boxplot() + \n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +\n  scale_y_continuous(trans = \"log2\") + \n  ylab(\"Income in dollars per day\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#visual-cues-to-be-compared-should-be-adjacent-1",
    "href": "slides/17-dataviz-principles.html#visual-cues-to-be-compared-should-be-adjacent-1",
    "title": "Data Visualization Principles",
    "section": "Visual cues to be compared should be adjacent",
    "text": "Visual cues to be compared should be adjacent\n\nThe codeThe graph\n\n\nMuch easier if they are adjacent\n\ngapminder |&gt; \n  filter(year %in% c(1970, 2010) & !is.na(gdp)) |&gt;\n  mutate(dollars_per_day = gdp/population/365) |&gt;\n  mutate(labels = paste(continent, year)) |&gt; # note the order change\n  ggplot(aes(labels, dollars_per_day)) +\n  geom_boxplot() + \n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +\n  scale_y_continuous(trans = \"log2\") + \n  ylab(\"Income in dollars per day\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#use-color",
    "href": "slides/17-dataviz-principles.html#use-color",
    "title": "Data Visualization Principles",
    "section": "Use color",
    "text": "Use color\nThe comparison becomes even easier to make if we use color to denote the two things we want to compare:\n\n gapminder |&gt; \n  filter(year %in% c(1970, 2010) & !is.na(gdp)) |&gt;\n  mutate(dollars_per_day = gdp/population/365, year = factor(year)) |&gt;\n  ggplot(aes(continent, dollars_per_day, fill = year)) +\n  geom_boxplot() + \n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +\n  scale_y_continuous(trans = \"log2\") + \n  ylab(\"Income in dollars per day\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#think-of-the-color-blind",
    "href": "slides/17-dataviz-principles.html#think-of-the-color-blind",
    "title": "Data Visualization Principles",
    "section": "Think of the color blind",
    "text": "Think of the color blind\n\nApproximately 1 in 12 men (8%) and 1 in 200 women (0.5%) worldwide are color blind.\nThe most common type of color blindness is red-green color blindness, which affects around 99% of all color blind individuals.\nThe prevalence of blue-yellow color blindness and total color blindness (achromatopsia) is much lower.\nAn example of how we can use a color blind friendly palette is described here."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#think-of-the-color-blind-1",
    "href": "slides/17-dataviz-principles.html#think-of-the-color-blind-1",
    "title": "Data Visualization Principles",
    "section": "Think of the color blind",
    "text": "Think of the color blind\n\nExample of color-blind-friendly color palette:\n\n\ncolor_blind_friendly_cols &lt;- \n  c(\"#999999\", \"#E69F00\", \"#56B4E9\", \"#009E73\", \n    \"#F0E442\", \"#0072B2\", \"#D55E00\", \"#CC79A7\")\n\np1 &lt;- data.frame(x = 1:8, y = rep(1,8), col = as.character(1:8)) |&gt; \n  ggplot(aes(x, y, color = col)) + \n  geom_point(size = 8, show.legend = FALSE) +\n  theme(axis.title.x = element_blank(),\n        axis.text.x = element_blank(),\n        axis.ticks.x = element_blank(),\n        axis.title.y = element_blank(),\n        axis.text.y = element_blank(),\n        axis.ticks.y = element_blank(),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank())\n\np1 + scale_color_manual(values = color_blind_friendly_cols)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#plots-for-two-variables",
    "href": "slides/17-dataviz-principles.html#plots-for-two-variables",
    "title": "Data Visualization Principles",
    "section": "Plots for two variables",
    "text": "Plots for two variables\nIn general, you should use scatterplots to visualize the relationship between two variables.\nHowever, there are some exceptions.\n\nWe describe two alternative plots here:\n\nslope chart\nBland-Altman plot"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#slope-charts",
    "href": "slides/17-dataviz-principles.html#slope-charts",
    "title": "Data Visualization Principles",
    "section": "Slope charts",
    "text": "Slope charts\n\nThe codeThe graph\n\n\nSlope charts adds angle as a visual cue, useful when comparing two groups and each element across two variables, such as years.\n\nwest &lt;- c(\"Western Europe\",\"Northern Europe\",\"Southern Europe\",\n          \"Northern America\",\"Australia and New Zealand\")\n\ndat &lt;- gapminder |&gt; \n  filter(year %in% c(2010, 2015) & region %in% west & \n           !is.na(life_expectancy) & population &gt; 10^7) \n\ndat |&gt;\n  mutate(location = ifelse(year == 2010, 1, 2), # ifelse(): vectorized\n         location = ifelse(year == 2015 & \n                             country %in% c(\"United Kingdom\", \"Portugal\"),\n                           location + 0.22, location),\n         hjust = ifelse(year == 2010, 1, 0)) |&gt; #hjust=0: left-just; hjust=1: right-justify\n  mutate(year = as.factor(year)) |&gt;\n  ggplot(aes(year, life_expectancy, group = country)) + # group ensure one line per country\n  geom_line(aes(color = country), show.legend = FALSE) +\n  geom_text(aes(x = location, label = country, hjust = hjust), # label every row (country)\n            show.legend = FALSE) +\n  xlab(\"\") + ylab(\"Life Expectancy\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#scatterplot-version",
    "href": "slides/17-dataviz-principles.html#scatterplot-version",
    "title": "Data Visualization Principles",
    "section": "Scatterplot version",
    "text": "Scatterplot version\n\nThe codeThe graph\n\n\n\nlibrary(ggrepel)\nwest &lt;- c(\"Western Europe\",\"Northern Europe\",\"Southern Europe\",\n          \"Northern America\",\"Australia and New Zealand\")\n\ndat &lt;- gapminder |&gt; \n  filter(year %in% c(2010, 2015) & region %in% west & \n           !is.na(life_expectancy) & population &gt; 10^7) \n\ndat |&gt; \n  mutate(year = paste0(\"life_expectancy_\", year)) |&gt; #paste0: no separator\n  select(country, year, life_expectancy) |&gt;\n  spread(year, life_expectancy) |&gt; #-&gt;wide table: spread(key(col)=year, value): one row per country\n  ggplot(aes(x=life_expectancy_2010,y=life_expectancy_2015, label = country)) + \n  geom_point() + geom_text_repel() +\n  scale_x_continuous(limits = c(78.5, 83)) +\n  scale_y_continuous(limits = c(78.5, 83)) +\n  geom_abline(lty = 2) + #geom_abline(slope=1, intercept=0): lty=2: dashed line\n  xlab(\"2010\") + \n  ylab(\"2015\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#bland-altman-plot",
    "href": "slides/17-dataviz-principles.html#bland-altman-plot",
    "title": "Data Visualization Principles",
    "section": "Bland-Altman plot",
    "text": "Bland-Altman plot\n\nThe codeThe graph\n\n\nShows difference in the y-axis and average on the x-axis.\n\nlibrary(ggrepel)\ndat |&gt; \n  mutate(year = paste0(\"life_expectancy_\", year)) |&gt;\n  select(country, year, life_expectancy) |&gt; \n  pivot_wider(names_from = \"year\", values_from = \"life_expectancy\") |&gt; \n  mutate(average = (life_expectancy_2015 + life_expectancy_2010)/2,\n         difference = life_expectancy_2015 - life_expectancy_2010) |&gt;\n  ggplot(aes(average, difference, label = country)) + \n  geom_point() +\n  geom_text_repel() +\n  # geom_abline(lty = 2) +  # This line will be out of the graphing window\n  xlab(\"Average of 2010 and 2015\") + \n  ylab(\"Difference between 2015 and 2010\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#encoding-a-third-variable",
    "href": "slides/17-dataviz-principles.html#encoding-a-third-variable",
    "title": "Data Visualization Principles",
    "section": "Encoding a third variable",
    "text": "Encoding a third variable\nWe can use\n\ndifferent colors or shapes for categoris\nareas, brightness or hue for continuous values"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#encoding-a-third-variable-1",
    "href": "slides/17-dataviz-principles.html#encoding-a-third-variable-1",
    "title": "Data Visualization Principles",
    "section": "Encoding a third variable",
    "text": "Encoding a third variable\n\nThe codeThe graph\n\n\nWe encode OPEC membership, region, and population.\n\npresent_year &lt;- 2010\n\ndat &lt;- gapminder |&gt;\n  mutate(region = case_when(\n    region %in% west ~ \"The West\",\n    region %in% \"Northern Africa\" ~ \"Northern Africa\",\n    region %in% c(\"Eastern Asia\", \"South-Eastern Asia\") ~ \"East Asia\",\n    region == \"Southern Asia\"~ \"Southern Asia\",\n    region %in% c(\"Central America\", \"South America\", \"Caribbean\") ~ \"Latin America\",\n    continent == \"Africa\" & region != \"Northern Africa\" ~ \"Sub-Saharan Africa\",\n    region %in% c(\"Melanesia\", \"Micronesia\", \"Polynesia\") ~ \"Pacific Islands\"),\n    dollars_per_day = gdp / population / 365) |&gt;\n  filter(year %in% present_year & !is.na(gdp) & !is.na(infant_mortality) & !is.na(region) ) |&gt;\n  mutate(OPEC = ifelse(country %in% opec, \"Yes\", \"No\")) \n\ndat |&gt; \n  ggplot(aes(dollars_per_day, 1 - infant_mortality/1000, \n             col = region, size = population/10^6,\n             shape =  OPEC)) +\n  scale_x_continuous(trans = \"log2\", limits = c(0.25, 150)) +\n  scale_y_continuous(trans = \"logit\",limit = c(0.875, .9981),#logit(p)=log(p/(1-p)). It sretch out p when p is close to 0 or 1. (e.g. 0.99 and o.995)\n                     breaks = c(.85,.90,.95,.99,.995,.998)) + \n  geom_point(alpha = 0.5) +\n  ylab(\"Infant survival proportion\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#point-shapes-available-in-r",
    "href": "slides/17-dataviz-principles.html#point-shapes-available-in-r",
    "title": "Data Visualization Principles",
    "section": "Point shapes available in R",
    "text": "Point shapes available in R\n\ndat &lt;- data.frame(x = c(0:25))\nggplot() +\n  theme_minimal() +\n  theme(axis.title.x = element_blank(),\n        axis.text.x = element_blank(),\n        axis.ticks.x = element_blank(),\n        axis.title.y = element_blank(),\n        axis.text.y = element_blank(),\n        axis.ticks.y = element_blank(),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) +\nscale_shape_identity() + # Dont map data values to shapes via a palette. Use the values as-is\n  scale_y_reverse() + #Flip the y-axis so row 0 appears at the top (like a table)\ngeom_point(dat, mapping = aes(x%%9, x%/%9, shape = x), size = 4, fill=\"blue\") + # %/%:integer division;  fill only affects fillable shape\ngeom_text(dat, mapping = aes(x%%9, x%/%9+0.25, label = x), size = 4)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#using-intensity-or-hue",
    "href": "slides/17-dataviz-principles.html#using-intensity-or-hue",
    "title": "Data Visualization Principles",
    "section": "Using intensity or hue",
    "text": "Using intensity or hue\nWhen selecting colors to quantify a numeric variable, we choose between two options: sequential and diverging."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#sequential-colors",
    "href": "slides/17-dataviz-principles.html#sequential-colors",
    "title": "Data Visualization Principles",
    "section": "Sequential colors",
    "text": "Sequential colors\nSequential colors are suited for data that goes from high to low. High values are clearly distinguished from low values.\n\nlibrary(RColorBrewer)\nrafalib::mypar() #load customized function mypar() from rafalib for \"nice\" plotting parameters\ndisplay.brewer.all(type = \"seq\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#diverging-colors",
    "href": "slides/17-dataviz-principles.html#diverging-colors",
    "title": "Data Visualization Principles",
    "section": "Diverging colors",
    "text": "Diverging colors\nDiverging colors are used to represent values that diverge from a center. We put equal emphasis on both ends of the data range: higher than the center and lower than the center.\n\nlibrary(RColorBrewer)\nrafalib::mypar()\ndisplay.brewer.all(type = \"div\")"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots",
    "href": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots",
    "title": "Data Visualization Principles",
    "section": "Avoid pseudo-3D plots",
    "text": "Avoid pseudo-3D plots\nThe figure below, taken from the scientific literature, shows three variables: dose, drug type and survival:"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-1",
    "href": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-1",
    "title": "Data Visualization Principles",
    "section": "Avoid pseudo-3D plots",
    "text": "Avoid pseudo-3D plots\n\nHumans are not good at seeing in three dimensions and our limitation is even worse with regard to pseudo-three-dimensions."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-2",
    "href": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-2",
    "title": "Data Visualization Principles",
    "section": "Avoid pseudo-3D plots",
    "text": "Avoid pseudo-3D plots\n\nWhen does the purple ribbon intersects the red?"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-3",
    "href": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-3",
    "title": "Data Visualization Principles",
    "section": "Avoid pseudo-3D plots",
    "text": "Avoid pseudo-3D plots\nColor is enough to represent the categorical variable:\n\n##First read data\nurl &lt;- \"https://github.com/kbroman/Talk_Graphs/raw/master/R/fig8dat.csv\"\ndat &lt;- read.csv(url)\n\n##Now make alternative plot\ndat |&gt; gather(drug, survival, -log.dose) |&gt; # gather(data, key, value, ..., -id_cols): keep id_cols (except id_cols) modern: pivot_longer(cols=-log.dose,names_to=\"drug\",values_to=\"survival\")\n  mutate(drug = gsub(\"Drug\\\\.\",\"\",drug)) |&gt;# gsub(pattern, replacement, x); replace all matches; vs. sub(): replace only the first match\n  ggplot(aes(log.dose, survival, color = drug)) +\n  geom_line()"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-4",
    "href": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-4",
    "title": "Data Visualization Principles",
    "section": "Avoid pseudo-3D plots",
    "text": "Avoid pseudo-3D plots\nPseudo-3D is sometimes used completely gratuitously: plots are made to look 3D even when the 3rd dimension does not represent a quantity. This only adds confusion and makes it harder to relay your message. We show two examples:"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-5",
    "href": "slides/17-dataviz-principles.html#avoid-pseudo-3d-plots-5",
    "title": "Data Visualization Principles",
    "section": "Avoid pseudo-3D plots",
    "text": "Avoid pseudo-3D plots\n\n\n\n\n\n\n\n\n\n\n(Images courtesy of Karl Broman)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits",
    "href": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits",
    "title": "Data Visualization Principles",
    "section": "Avoid too many significant digits",
    "text": "Avoid too many significant digits\n\noptions(digits = tmp)\nknitr::kable(dat) \n\n\n\n\nstate\nyear\nMeasles\nPertussis\nPolio\n\n\n\n\nCalifornia\n1940\n37.883\n18.340\n0.827\n\n\nCalifornia\n1950\n13.912\n4.747\n1.974\n\n\nCalifornia\n1960\n14.139\nNA\n0.264\n\n\nCalifornia\n1970\n0.977\nNA\nNA\n\n\nCalifornia\n1980\n0.374\n0.052\nNA"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits-1",
    "href": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits-1",
    "title": "Data Visualization Principles",
    "section": "Avoid too many significant digits",
    "text": "Avoid too many significant digits\nUseful ways to change the number of significant digits or to round numbers are\n\nsignif\nround\n\nYou can define the number of significant digits globally by setting options like this: options(digits = 3)."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits-2",
    "href": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits-2",
    "title": "Data Visualization Principles",
    "section": "Avoid too many significant digits",
    "text": "Avoid too many significant digits\nUseful ways to change the number of significant digits or to round numbers are\n\nsignif\nround\n\nYou can define the number of significant digits globally by setting options like this: options(digits = 3)."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits-3",
    "href": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits-3",
    "title": "Data Visualization Principles",
    "section": "Avoid too many significant digits",
    "text": "Avoid too many significant digits\nUseful ways to change the number of significant digits or to round numbers are\n\nsignif\nround\n\nYou can define the number of significant digits globally by setting options like this: options(digits = 3)."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits-4",
    "href": "slides/17-dataviz-principles.html#avoid-too-many-significant-digits-4",
    "title": "Data Visualization Principles",
    "section": "Avoid too many significant digits",
    "text": "Avoid too many significant digits\nUseful ways to change the number of significant digits or to round numbers are\n\nsignif\nround\n\nYou can define the number of significant digits globally by setting options like this: options(digits = 3)."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#values-compared-in-columns",
    "href": "slides/17-dataviz-principles.html#values-compared-in-columns",
    "title": "Data Visualization Principles",
    "section": "Values compared in columns",
    "text": "Values compared in columns\nPlace values being compared on columns rather than rows.\n\n\n\n\n\nstate\nyear\nMeasles\nPertussis\nPolio\n\n\n\n\nCalifornia\n1940\n37.9\n18.3\n0.8\n\n\nCalifornia\n1950\n13.9\n4.7\n2.0\n\n\nCalifornia\n1960\n14.1\nNA\n0.3\n\n\nCalifornia\n1970\n1.0\nNA\nNA\n\n\nCalifornia\n1980\n0.4\n0.1\nNA"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#values-compared-in-columns-1",
    "href": "slides/17-dataviz-principles.html#values-compared-in-columns-1",
    "title": "Data Visualization Principles",
    "section": "Values compared in columns",
    "text": "Values compared in columns\nAnother principle related to displaying tables is to place values being compared on columns rather than rows. Compare these two presentations:\n\n\n\n\n\nstate\nyear\nMeasles\nPertussis\nPolio\n\n\n\n\nCalifornia\n1940\n37.9\n18.3\n0.8\n\n\nCalifornia\n1950\n13.9\n4.7\n2.0\n\n\nCalifornia\n1960\n14.1\nNA\n0.3\n\n\nCalifornia\n1970\n1.0\nNA\nNA\n\n\nCalifornia\n1980\n0.4\n0.1\nNA"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#know-your-audience",
    "href": "slides/17-dataviz-principles.html#know-your-audience",
    "title": "Data Visualization Principles",
    "section": "Know your audience",
    "text": "Know your audience\nGraphs can be used for\n\nour own exploratory data analysis,\nto convey a message to experts, or\nto help tell a story to a general audience.\n\nMake sure that the intended audience understands each element of the plot.\n\n\nHome"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#a-bubble-chart-area-vs.-radicus",
    "href": "slides/17-dataviz-principles.html#a-bubble-chart-area-vs.-radicus",
    "title": "Data Visualization Principles",
    "section": "A bubble chart: Area vs. Radicus",
    "text": "A bubble chart: Area vs. Radicus\n\nThe codeThe Graph\n\n\nBubble size (area) ~ input\n\n# up to here\ngdp &lt;- c(14.6, 5.7, 5.3, 3.3, 2.5)\ngdp_data &lt;- data.frame(Country = rep(c(\"United States\", \"China\", \"Japan\", \"Germany\", \"France\"),2),\n           y = factor(rep(c(\"Radius\",\"Area\"),each = 5), levels = c(\"Radius\", \"Area\")),\n           GDP = c(gdp^2/min(gdp^2), gdp/min(gdp))) |&gt; \n   mutate(Country = reorder(Country, GDP)) # reorder Country by GDP using (default) mean GDP\ngdp_data |&gt; \n  ggplot(aes(Country, y, size = GDP)) + #bubble size (bubble area) ~ GDP\n  geom_point(show.legend = FALSE, color = \"blue\") + \n  scale_size(range = c(2,20)) + # sets min/max bubble size\n  coord_flip() +  # switch x- and y-axis\n  ylab(\"\") + xlab(\"\")"
  },
  {
    "objectID": "slides/standard_errors.html",
    "href": "slides/standard_errors.html",
    "title": "Standard Errors vs. Standard Deviation",
    "section": "",
    "text": "For method=\"lm\" the CI ribbon is based on the standard error of the estimated mean \\(\\hat y(x_0)=\\widehat{E[Y\\mid X=x_0]}\\). The SE formula comes directly from the variance of a linear combination of the OLS estimator.\n\nWrite the linear model in matrix form\n\n\\[ y = X\\beta + \\varepsilon,\\qquad \\mathbb E\\varepsilon=0,\\quad \\mathrm{Var}(\\varepsilon)=\\sigma^2 I_n.\\] 2) OLS estimator and its variance\nOLS gives \\[ \\hat\\beta=(X^\\top X)^{-1}X^\\top y.\\] Because \\(\\hat\\beta\\) is a linear function of \\(y\\), \\[ \\mathrm{Var}(\\hat\\beta) = (X^\\top X)^{-1}X^\\top \\mathrm{Var}(y) X (X^\\top X)^{-1}.\\] But \\(y=X\\beta+\\varepsilon\\) and \\(\\mathrm{Var}(y)=\\mathrm{Var}(\\varepsilon)=\\sigma^2 I\\), so \\[ \\mathrm{Var}(\\hat\\beta)=\\sigma^2 (X^\\top X)^{-1}.\\]\n\nFitted mean at a point is a linear combo of \\(\\hat\\beta\\)\n\nAt \\(x_0\\), let the (row) design vector be \\[ x_0^* = (1 \\;\\;x_0)\\] (for simple linear regression; more generally it’s whatever basis terms your formula uses). Then the fitted mean is\n\\[ \\hat y(x_0)=x_0^* \\hat\\beta.\\]\n\nVariance of a linear combination\n\nUse the rule: if \\(a\\) is a constant vector and \\(Z\\) is random, \\[ \\mathrm{Var}(a^\\top Z)=a^\\top \\mathrm{Var}(Z)a.\\] Here \\(a = (x_0^*)^\\top\\) and \\(Z=\\hat\\beta\\). Therefore,\n\\[\\mathrm{Var}(\\hat y(x_0)) = \\mathrm{Var}(x_0^* \\hat\\beta) = x_0^*\\mathrm{Var}(\\hat\\beta)(x_0^*)^\\top = x_0^* \\big(\\sigma ^2 (X^\\top X)^{-1}\\big) (x_0^*)^\\top.\\] So the standard error is \\[ SE{\\hat y(x_0)}=\\sqrt{\\sigma^2 x_0^*(X^\\top X)^{-1}(x_0^*)^\\top }.\\]\n\nReplace \\(\\sigma ^2\\) by its sample estimate\n\nSince \\(\\sigma^2\\) is unknown, we plug in\n\\[ \\hat\\sigma^2=\\frac{\\sum_{i=1}^n \\hat\\varepsilon_i^2}{n-p},\\] giving the practical SE:\n\\[SE{\\hat y(x_0)}=\\sqrt{\\hat\\sigma^2  x_0^*(X^\\top X)^{-1}(x_0^*)^\\top }.\\]\n\n\nsame formula in “simple regression” scalar form\n\nFor \\(y=\\beta_0+\\beta_1 x+\\varepsilon\\),\n\\[SE{\\hat y(x_0)}=\\hat\\sigma\\sqrt{\\frac{1}{n}+\\frac{(x_0-\\bar x)^2}{\\sum_{i=1}^n (x_i-\\bar x)^2}}.\\] This is algebraically equivalent to the matrix expression above."
  },
  {
    "objectID": "slides/standard_errors.html#why-is-hatsigma2-dfracsum-hatvarepsilon_i2n-p",
    "href": "slides/standard_errors.html#why-is-hatsigma2-dfracsum-hatvarepsilon_i2n-p",
    "title": "Standard Errors vs. Standard Deviation",
    "section": "Why is \\(\\hat{\\sigma}^2 = \\dfrac{\\sum \\hat\\varepsilon_i^2}{n-p}\\) ?",
    "text": "Why is \\(\\hat{\\sigma}^2 = \\dfrac{\\sum \\hat\\varepsilon_i^2}{n-p}\\) ?\nConsider the linear model \\[ y = X\\beta + \\varepsilon,\\quad \\mathbb E(\\varepsilon)=0,\\quad \\mathrm{Var}(\\varepsilon)=\\sigma^2 I_n,\\] with \\(p\\) parameters (in simple regression, (p=2): intercept + slope).\nLet \\(\\hat y = X\\hat\\beta\\) be fitted values and residuals \\(e = y-\\hat y\\). The residual sum of squares is \\[ RSS = e^\\top e = \\sum_{i=1}^n e_i^2.\\]\n\nKey fact (degrees of freedom)\nThe fitted values live in the column space of \\(X\\), which is \\(p\\)-dimensional. Residuals live in the orthogonal complement, which has dimension \\(n-p\\). So residuals have only \\(n-p\\) independent pieces of variation.\nMore formally, define the “residual-maker” matrix \\[ M = I - H,\\quad H = X(X^\\top X)^{-1}X^\\top.\\] Then \\(e = My\\) and \\(M\\) is symmetric idempotent with \\[ \\mathrm{rank}(M)=n-p,\\quad \\mathrm{tr}(M)=n-p.\\] Since \\(y = X\\beta + \\varepsilon\\) and \\(MX\\beta=0\\), \\[ e = M\\varepsilon.\\] Now compute the expected RSS: \\[\\mathbb E(RSS) = \\mathbb E(e^\\top e) = \\mathbb E(\\varepsilon^\\top M^\\top M \\varepsilon) = \\mathbb E(\\varepsilon^\\top M \\varepsilon).\n\\] Using \\(\\mathbb E(\\varepsilon^\\top A \\varepsilon)=\\sigma^2\\mathrm{tr}(A)\\) when \\(\\mathrm{Var}(\\varepsilon)=\\sigma^2 I\\),\n\\[ \\mathbb E(RSS)=\\sigma ^2 \\mathrm{tr}(M)=\\sigma^2 (n-p).\\] So \\[ \\mathbb E\\left(\\frac{RSS}{n-p}\\right)=\\sigma^2,\\] meaning \\[ \\hat\\sigma^2=\\frac{RSS}{n-p}\\] is an unbiased estimator of $^2).\n\n\nIntuition\nIf you divided by \\(n\\), you’d systematically underestimate \\(\\sigma^2\\) because the regression line was chosen to make residuals small (you “spent” \\(p\\) degrees of freedom estimating parameters). Dividing by \\(n-p\\) corrects that."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#show-the-data-barplot",
    "href": "slides/17-dataviz-principles.html#show-the-data-barplot",
    "title": "Data Visualization Principles",
    "section": "Show the data: barplot",
    "text": "Show the data: barplot\n\nThe codeThe graph\n\n\n\ndata(\"heights\")\np1 &lt;- heights |&gt; \n  group_by(sex) |&gt; \n  summarize(average = mean(height), se=sd(height)/sqrt(n())) |&gt;\n  ggplot(aes(sex, average)) + \n  theme_excel() + \n   geom_bar(stat = \"identity\", width = 0.5, fill = \"blue\", color = \"black\") + #bottom layer\n   geom_errorbar(aes(ymin = average - 2*se, ymax = average + 2*se), width = 0.25,col=\"black\")+ #top layer\n  ylab(\"Height in inches\")\np1"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#the-graph-3",
    "href": "slides/17-dataviz-principles.html#the-graph-3",
    "title": "Data Visualization Principles",
    "section": "The graph",
    "text": "The graph"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#show-the-data-scatter-points",
    "href": "slides/17-dataviz-principles.html#show-the-data-scatter-points",
    "title": "Data Visualization Principles",
    "section": "Show the data: Scatter points",
    "text": "Show the data: Scatter points\n\nheights |&gt; \n  ggplot(aes(sex, height)) + \n  geom_point()"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#show-the-data-jitter",
    "href": "slides/17-dataviz-principles.html#show-the-data-jitter",
    "title": "Data Visualization Principles",
    "section": "Show the data: jitter",
    "text": "Show the data: jitter\nUse jitter to avoid over-plotting (compare to the previous one)\n\nheights |&gt; \n  ggplot(aes(sex, height)) +\n  geom_jitter(width = 0.1, alpha = 0.2)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#color-blind-friendly-color-palette",
    "href": "slides/17-dataviz-principles.html#color-blind-friendly-color-palette",
    "title": "Data Visualization Principles",
    "section": "Color-blind-friendly color palette",
    "text": "Color-blind-friendly color palette\n\ncolor_blind_friendly_cols &lt;- \n  c(\"#999999\", \"#E69F00\", \"#56B4E9\", \"#009E73\", \n    \"#F0E442\", \"#0072B2\", \"#D55E00\", \"#CC79A7\")\n\np1 &lt;- data.frame(x = 1:8, y = rep(1,8), col = as.character(1:8)) |&gt; # treat char as discrete (categorical)\n  ggplot(aes(x, y, color = col)) + \n  geom_point(size = 8, show.legend = FALSE) +\n  theme(axis.title.x = element_blank(),\n        axis.text.x = element_blank(),\n        axis.ticks.x = element_blank(),\n        axis.title.y = element_blank(),\n        axis.text.y = element_blank(),\n        axis.ticks.y = element_blank(),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank())\n\np1 + scale_color_manual(values = color_blind_friendly_cols) #match the colors in order"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#log-transformations",
    "href": "slides/17-dataviz-principles.html#log-transformations",
    "title": "Data Visualization Principles",
    "section": "Log Transformations",
    "text": "Log Transformations\nHere a log transformation provides a much more informative plot:\n\np2 &lt;- p2 + geom_boxplot(coef = 3) + \n  geom_jitter(width = .1, alpha = .5) + \n  scale_y_log10(breaks = c(1,10,100,1000)) + #showing original value but with log10 scale\n  theme(axis.text.x = element_text(size = 7)) \ngrid.arrange(p1, p2, ncol = 2)"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#avoid-unecessary-decimals",
    "href": "slides/17-dataviz-principles.html#avoid-unecessary-decimals",
    "title": "Data Visualization Principles",
    "section": "Avoid unecessary decimals",
    "text": "Avoid unecessary decimals\n\nThe codeThe table\n\n\n\nThe default behavior in R is to show 7 significant digits.\n\n\ndata(us_contagious_diseases)\ntmp &lt;- 3\noptions(digits = 7)\ndat &lt;- us_contagious_diseases |&gt;\n  filter(year %in% seq(1940, 1980, 10) &  state == \"California\" &\n           disease %in% c(\"Measles\", \"Pertussis\", \"Polio\")) |&gt;\n  mutate(rate = count / population * 10000) |&gt; \n  mutate(state = reorder(state, rate)) |&gt; \n  select(state, year, disease, rate) |&gt;\n  spread(disease, rate) # long-&gt;wide\n\nknitr::kable(dat) \n\n\n\n\n\n\n\n\nstate\nyear\nMeasles\nPertussis\nPolio\n\n\n\n\nCalifornia\n1940\n37.8826320\n18.3397861\n0.8266512\n\n\nCalifornia\n1950\n13.9124205\n4.7467350\n1.9742639\n\n\nCalifornia\n1960\n14.1386471\nNA\n0.2640419\n\n\nCalifornia\n1970\n0.9767889\nNA\nNA\n\n\nCalifornia\n1980\n0.3743467\n0.0515466\nNA"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#use-rounding",
    "href": "slides/17-dataviz-principles.html#use-rounding",
    "title": "Data Visualization Principles",
    "section": "Use rounding",
    "text": "Use rounding\n\nThe codeThe Table\n\n\n\ndat0 &lt;- dat |&gt; \n  mutate_at(c(\"Measles\", \"Pertussis\", \"Polio\"), ~round(., digits=1))\nknitr::kable(dat0) \n\n\nmutate_at(cols, fun): apply a function to selected cols\n~round(.,digits=1): ~ starts a anonymous function; .: the current col values.\n\n\n\n\n\n\n\n\nstate\nyear\nMeasles\nPertussis\nPolio\n\n\n\n\nCalifornia\n1940\n37.9\n18.3\n0.8\n\n\nCalifornia\n1950\n13.9\n4.7\n2.0\n\n\nCalifornia\n1960\n14.1\nNA\n0.3\n\n\nCalifornia\n1970\n1.0\nNA\nNA\n\n\nCalifornia\n1980\n0.4\n0.1\nNA"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#the-code-15",
    "href": "slides/17-dataviz-principles.html#the-code-15",
    "title": "Data Visualization Principles",
    "section": "The code",
    "text": "The code\n\ndat0 &lt;- dat |&gt; \n  mutate_at(c(\"Measles\", \"Pertussis\", \"Polio\"), ~round(., digits=1))\nknitr::kable(dat0) \n\n\nmutate_at(cols, fun): apply a function to selected cols\n~round(.,digits=1): ~ starts a anonymous function; .: the current col values."
  },
  {
    "objectID": "slides/17-dataviz-principles.html#the-table-1",
    "href": "slides/17-dataviz-principles.html#the-table-1",
    "title": "Data Visualization Principles",
    "section": "The Table",
    "text": "The Table\n\n\n\n\n\nstate\nyear\nMeasles\nPertussis\nPolio\n\n\n\n\nCalifornia\n1940\n37.9\n18.3\n0.8\n\n\nCalifornia\n1950\n13.9\n4.7\n2.0\n\n\nCalifornia\n1960\n14.1\nNA\n0.3\n\n\nCalifornia\n1970\n1.0\nNA\nNA\n\n\nCalifornia\n1980\n0.4\n0.1\nNA"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#ways-to-change-displayed-digits",
    "href": "slides/17-dataviz-principles.html#ways-to-change-displayed-digits",
    "title": "Data Visualization Principles",
    "section": "Ways to change displayed digits",
    "text": "Ways to change displayed digits\n\nsignif, round\ndefine the number of significant digits globally: options(digits = 3).\n\n\nround(3.145, 2)     # 3.14  (ties can be surprising; see note below)\n\n[1] 3.14\n\nround(1234, -2)     # 1200 #-2: rounds to hundreds; -1: to tens\n\n[1] 1200\n\nx &lt;- 0.012345\nround(x, 2)    # 0.01     (2 digits after decimal)\n\n[1] 0.01\n\nsignif(x, 2)   # 0.012    (2 significant digits)\n\n[1] 0.012"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#use-options",
    "href": "slides/17-dataviz-principles.html#use-options",
    "title": "Data Visualization Principles",
    "section": "Use options",
    "text": "Use options\n\noptions(digits = tmp)\nknitr::kable(dat) \n\n\n\n\nstate\nyear\nMeasles\nPertussis\nPolio\n\n\n\n\nCalifornia\n1940\n37.883\n18.340\n0.827\n\n\nCalifornia\n1950\n13.912\n4.747\n1.974\n\n\nCalifornia\n1960\n14.139\nNA\n0.264\n\n\nCalifornia\n1970\n0.977\nNA\nNA\n\n\nCalifornia\n1980\n0.374\n0.052\nNA"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#more-examples-on-rounding",
    "href": "slides/17-dataviz-principles.html#more-examples-on-rounding",
    "title": "Data Visualization Principles",
    "section": "More examples on rounding",
    "text": "More examples on rounding\n\nThe codeThe Table\n\n\n\ndat0 &lt;- dat |&gt; \n  mutate_at(c(\"Measles\", \"Pertussis\", \"Polio\"), ~round(., digits=1))\nknitr::kable(dat0) \n\n\nmutate_at(cols, fun): apply a function to selected cols\n~round(.,digits=1): ~ starts a anonymous function; .: the current col values.\n\n\n\n\n\n\n\n\nstate\nyear\nMeasles\nPertussis\nPolio\n\n\n\n\nCalifornia\n1940\n37.9\n18.3\n0.8\n\n\nCalifornia\n1950\n13.9\n4.7\n2.0\n\n\nCalifornia\n1960\n14.1\nNA\n0.3\n\n\nCalifornia\n1970\n1.0\nNA\nNA\n\n\nCalifornia\n1980\n0.4\n0.1\nNA"
  },
  {
    "objectID": "slides/17-dataviz-principles.html#compare-values-in-columns",
    "href": "slides/17-dataviz-principles.html#compare-values-in-columns",
    "title": "Data Visualization Principles",
    "section": "Compare Values in columns",
    "text": "Compare Values in columns\n\ndat &lt;- us_contagious_diseases |&gt;\n  filter(year %in% seq(1940, 1980, 10) &  state == \"California\" &\n          disease %in% c(\"Measles\", \"Pertussis\", \"Polio\")) |&gt;\n  mutate(rate = count / population * 10000) |&gt; \n  mutate(state = reorder(state, rate)) |&gt; \n  select(state, year, disease, rate) |&gt;\n  spread(year, rate) |&gt; \n  mutate(across(where(is.numeric), round, digits = 1)) \n\nknitr::kable(dat)\n\n\n\n\nstate\ndisease\n1940\n1950\n1960\n1970\n1980\n\n\n\n\nCalifornia\nMeasles\n37.9\n13.9\n14.1\n1\n0.4\n\n\nCalifornia\nPertussis\n18.3\n4.7\nNA\nNA\n0.1\n\n\nCalifornia\nPolio\n0.8\n2.0\n0.3\nNA\nNA"
  },
  {
    "objectID": "slides/18-distributions.html#visualizing-data-distributions",
    "href": "slides/18-distributions.html#visualizing-data-distributions",
    "title": "Distributions",
    "section": "Visualizing data distributions",
    "text": "Visualizing data distributions\n\nSo, a report might say the scores were 680 \\(\\pm\\) 50, boiling down a full set of scores to just two numbers.\nBut is this enough? Are we overlooking crucial information?\nMore often than not, the best way to share or explore these summaries is through data visualization."
  },
  {
    "objectID": "slides/18-distributions.html#visualizing-data-distributions-1",
    "href": "slides/18-distributions.html#visualizing-data-distributions-1",
    "title": "Distributions",
    "section": "Visualizing data distributions",
    "text": "Visualizing data distributions\n\nThe most basic statistical summary of a list of objects or numbers is its distribution.\nUnderstanding distributions is therefore essential for creating useful data visualizations.\nunderstanding distributions is also essential for understanding inference and statistical models"
  },
  {
    "objectID": "slides/18-distributions.html#visualizing-data-distributions-2",
    "href": "slides/18-distributions.html#visualizing-data-distributions-2",
    "title": "Distributions",
    "section": "Visualizing data distributions",
    "text": "Visualizing data distributions\n\nThe most basic statistical summary of a list of objects or numbers is its distribution.\nOnce a data has been summarized as a distribution, there are several data visualization techniques to effectively relay this information.\nUnderstanding distributions is therefore essential for creating useful data visualizations.\nNote: understanding distributions is also essential for understanding inference and statistical models"
  },
  {
    "objectID": "slides/18-distributions.html#case-study-describing-student-heights",
    "href": "slides/18-distributions.html#case-study-describing-student-heights",
    "title": "Distributions",
    "section": "Case study: describing student heights",
    "text": "Case study: describing student heights\n\nPretend that we have to describe the heights of our classmates to someone that has never seen humans.\nWe ask students to report their height in inches.\nWe also ask them to report sex because there are two different height distributions.\n\n\nlibrary(tidyverse) \nlibrary(dslabs) \nhead(heights) \n\n     sex height\n1   Male     75\n2   Male     70\n3   Male     68\n4   Male     74\n5   Male     61\n6 Female     65"
  },
  {
    "objectID": "slides/18-distributions.html#case-study",
    "href": "slides/18-distributions.html#case-study",
    "title": "Distributions",
    "section": "Case study",
    "text": "Case study\n\nOne way to convey the heights to ET is to simply send him this list of 1,050 heights.\nBut there are much more effective ways to convey this information, and understanding the concept of a distribution will be key.\nTo simplify the explanation, we first focus on male heights.\nWe examine the female height data later."
  },
  {
    "objectID": "slides/18-distributions.html#distributions",
    "href": "slides/18-distributions.html#distributions",
    "title": "Distributions",
    "section": "Distributions",
    "text": "Distributions\n\nTo visualize this we simply use a barplot.\nHere is an example with US state regions:"
  },
  {
    "objectID": "slides/18-distributions.html#distributions-1",
    "href": "slides/18-distributions.html#distributions-1",
    "title": "Distributions",
    "section": "Distributions",
    "text": "Distributions\n\nTo visualize this we simply use a barplot.\nHere is an example with US state regions:"
  },
  {
    "objectID": "slides/18-distributions.html#histograms",
    "href": "slides/18-distributions.html#histograms",
    "title": "Distributions",
    "section": "Histograms",
    "text": "Histograms\n\nHowever, summarizing data by plotting the eCDF is actually not very popular in practice.\nThe main reason is that it does not easily convey characteristics of interest such as: at what value is the distribution centered? Is the distribution symmetric? What ranges contain 95% of the values?\nHistograms sacrifice just a bit of information to produce plots that are much easier to interpret."
  },
  {
    "objectID": "slides/18-distributions.html#histograms-1",
    "href": "slides/18-distributions.html#histograms-1",
    "title": "Distributions",
    "section": "Histograms",
    "text": "Histograms\n\nThe codeThe graph\n\n\nHere is the histogram for the height data splitting the range of values into one inch intervals: \\((49.5, 50.5]\\), \\((50.5, 51.5]\\), \\((51.5,52.5]\\), \\((52.5,53.5]\\), \\(...\\), \\((82.5,83.5]\\).\n\nheights |&gt;  \n  filter(sex==\"Male\") |&gt;  \n  ggplot(aes(height)) +  \n  geom_histogram(binwidth = 1, color = \"black\") #binwidth=1, center=0 (default): centered on integers"
  },
  {
    "objectID": "slides/18-distributions.html#histograms-2",
    "href": "slides/18-distributions.html#histograms-2",
    "title": "Distributions",
    "section": "Histograms",
    "text": "Histograms\n\nHere is the eCDF for male student heights:"
  },
  {
    "objectID": "slides/18-distributions.html#histograms-3",
    "href": "slides/18-distributions.html#histograms-3",
    "title": "Distributions",
    "section": "Histograms",
    "text": "Histograms\n\nHowever, summarizing data by plotting the eCDF is actually not very popular in practice.\nThe main reason is that it does not easily convey characteristics of interest such as: at what value is the distribution centered? Is the distribution symmetric? What ranges contain 95% of the values?\nHistograms sacrifice just a bit of information to produce plots that are much easier to interpret."
  },
  {
    "objectID": "slides/18-distributions.html#histograms-4",
    "href": "slides/18-distributions.html#histograms-4",
    "title": "Distributions",
    "section": "Histograms",
    "text": "Histograms\nHere is the histogram for the height data splitting the range of values into one inch intervals: \\((49.5, 50.5]\\), \\((50.5, 51.5]\\), \\((51.5,52.5]\\), \\((52.5,53.5]\\), \\(...\\), \\((82.5,83.5]\\).\n\n\nFrom this plot one immediately learn some important properties about our data."
  },
  {
    "objectID": "slides/18-distributions.html#smoothed-density",
    "href": "slides/18-distributions.html#smoothed-density",
    "title": "Distributions",
    "section": "Smoothed density",
    "text": "Smoothed density\n\nHere is an example comparing male and female heights:"
  },
  {
    "objectID": "slides/18-distributions.html#smoothed-density-1",
    "href": "slides/18-distributions.html#smoothed-density-1",
    "title": "Distributions",
    "section": "Smoothed density",
    "text": "Smoothed density\n\nHere is an example comparing male and female heights:"
  },
  {
    "objectID": "slides/18-distributions.html#smoothed-density-2",
    "href": "slides/18-distributions.html#smoothed-density-2",
    "title": "Distributions",
    "section": "Smoothed density",
    "text": "Smoothed density\n\nHere is an example comparing male and female heights:"
  },
  {
    "objectID": "slides/18-distributions.html#the-normal-distribution",
    "href": "slides/18-distributions.html#the-normal-distribution",
    "title": "Distributions",
    "section": "The normal distribution",
    "text": "The normal distribution\n\nalso known as the bell curve, or the Gaussian distribution.\n\n\nmu &lt;- 0; s &lt;- 1 \nnorm_dist &lt;- data.frame(x=seq(-4,4,len=50)*s+mu) |&gt; mutate(density=dnorm(x,mu,s)) \nnorm_dist |&gt; ggplot(aes(x,density)) + geom_line() \n\n\n\nNormal pdf: \\(f(x)=\\frac 1 {s\\sqrt{2π}}\\exp\\left(−\\frac{(x−μ)^2}{2s^2} \\right)\\)"
  },
  {
    "objectID": "slides/18-distributions.html#the-normal-distribution-1",
    "href": "slides/18-distributions.html#the-normal-distribution-1",
    "title": "Distributions",
    "section": "The normal distribution",
    "text": "The normal distribution\n\nMany datasets can be approximated with normal distributions.\nThese include gambling winnings, heights, weights, blood pressure, standardized test scores, and experimental measurement errors.\nBut how can the same distribution approximate datasets with completely different ranges for values?"
  },
  {
    "objectID": "slides/18-distributions.html#the-normal-distribution-2",
    "href": "slides/18-distributions.html#the-normal-distribution-2",
    "title": "Distributions",
    "section": "The normal distribution",
    "text": "The normal distribution\n\nThe normal distribution can be adapted to different datasets by just adjusting two numbers, referred to as the average or mean and the standard deviation (SD).\nA normal distribution with average 0 and SD 1 is referred to as a standard normal."
  },
  {
    "objectID": "slides/18-distributions.html#the-normal-distribution-3",
    "href": "slides/18-distributions.html#the-normal-distribution-3",
    "title": "Distributions",
    "section": "The normal distribution",
    "text": "The normal distribution\n\nFor a list of numbers contained in a vector x:\n\n\nindex &lt;- heights$sex == \"Male\" \nx &lt;- heights$height[index] \n\n\nthe average is\n\n\nm &lt;- sum(x) / length(x) # or mean(x)\nm\n\n[1] 69.3\n\n\n\nand the SD is defined as:\n\n\ns &lt;- sqrt(sum((x - m)^2) / length(x)) # or sd(x) uses denominator n-1 (), so is var(x)\ns\n\n[1] 3.61"
  },
  {
    "objectID": "slides/18-distributions.html#the-normal-distribution-4",
    "href": "slides/18-distributions.html#the-normal-distribution-4",
    "title": "Distributions",
    "section": "The normal distribution",
    "text": "The normal distribution\n\nHere is a plot of our male student height smooth density (blue) and the normal distribution (black) with mean = 69.3 and SD = 3.6:"
  },
  {
    "objectID": "slides/18-distributions.html#the-normal-distribution-5",
    "href": "slides/18-distributions.html#the-normal-distribution-5",
    "title": "Distributions",
    "section": "The normal distribution",
    "text": "The normal distribution\n\nHere is a plot of our male student height smooth density (blue) and the normal distribution (black) with mean = 69.3 and SD = 3.6:"
  },
  {
    "objectID": "slides/18-distributions.html#boxplot",
    "href": "slides/18-distributions.html#boxplot",
    "title": "Distributions",
    "section": "Boxplot",
    "text": "Boxplot\n\nSuppose we want to summarize the murder rate distribution."
  },
  {
    "objectID": "slides/18-distributions.html#boxplots",
    "href": "slides/18-distributions.html#boxplots",
    "title": "Distributions",
    "section": "Boxplots",
    "text": "Boxplots\n\nThe boxplot provides a five-number summary composed of the range (the minimum and maximum) along with the quartiles (the 25th, 50th, and 75th percentiles).\nR default: coef=1.5, length of whiskers =1.5 * IQR\nOutlier (default): above or below whiskers"
  },
  {
    "objectID": "slides/18-distributions.html#boxplots-1",
    "href": "slides/18-distributions.html#boxplots-1",
    "title": "Distributions",
    "section": "Boxplots",
    "text": "Boxplots\nThe boxplot sumarizes with a box with whiskers:\n\n\n\nmurders |&gt; ggplot(aes(\"\",rate)) + geom_boxplot() + \n  coord_cartesian(xlim = c(0, 2)) + xlab(\"\") \n\n\n\n\n\nFrom just this simple plot, we know that:\n\nthe median is about 2.5,\nthat the distribution is not symmetric, and that\nthe range is 0 to 5 for the great majority of states with two exceptions."
  },
  {
    "objectID": "slides/18-distributions.html#boxplots-2",
    "href": "slides/18-distributions.html#boxplots-2",
    "title": "Distributions",
    "section": "Boxplots",
    "text": "Boxplots\n\nIn data analysis we often divide observations into groups based on the values of one or more variables associated with those observations.\nWe call this procedure stratification and refer to the resulting groups as strata.\nStratification is common in data visualization because we are often interested in how the distributions of variables differ across different subgroups.\nStratifying and then making boxplot is a common approach to visualizing these differences."
  },
  {
    "objectID": "slides/18-distributions.html#boxplots-3",
    "href": "slides/18-distributions.html#boxplots-3",
    "title": "Distributions",
    "section": "Boxplots",
    "text": "Boxplots\n\nIn data analysis we often divide observations into groups based on the values of one or more variables associated with those observations.\nWe call this procedure stratification and refer to the resulting groups as strata.\nStratification is common in data visualization because we are often interested in how the distributions of variables differ across different subgroups.\nStratifying and then making boxplot is a common approach to visualizing these differences."
  },
  {
    "objectID": "slides/18-distributions.html#case-study-continued",
    "href": "slides/18-distributions.html#case-study-continued",
    "title": "Distributions",
    "section": "Case study continued",
    "text": "Case study continued\n\nThe unexpected five smallest values are likely cases of 5'x reported as 5x\n\n\nheights |&gt; filter(sex == \"Female\") |&gt; \n  slice_min(height, n = 5) |&gt;\n  pull(height)\n\n[1] 51 52 52 53 55\n\n#&gt; [1] 51 52 52 53 55\n\n\n\nHome"
  },
  {
    "objectID": "slides/18-distributions.html#case-study-continued-1",
    "href": "slides/18-distributions.html#case-study-continued-1",
    "title": "Distributions",
    "section": "Case study continued",
    "text": "Case study continued\n\nThe plot immediately reveals that males are, on average, taller than females.\nHowever, exploratory plots reveal that the approximation is not as useful:"
  },
  {
    "objectID": "slides/18-distributions.html#case-study-continued-2",
    "href": "slides/18-distributions.html#case-study-continued-2",
    "title": "Distributions",
    "section": "Case study continued",
    "text": "Case study continued\n\nA likely for the second bump is that female as the default in the reporting tool.\nThe unexpected five smallest values are likely cases of 5'x'' reported as 5x\n\n\nheights |&gt; filter(sex == \"Female\") |&gt;  \n  top_n(5, desc(height)) |&gt; \n  pull(height) \n\n[1] 51 53 55 52 52\n\n\n\n\nHome"
  },
  {
    "objectID": "slides/18-distributions.html#summarizing-data",
    "href": "slides/18-distributions.html#summarizing-data",
    "title": "Distributions",
    "section": "Summarizing data",
    "text": "Summarizing data\n\nOne common method is to use the average value to summarize a list of numbers.\nFor instance, a high school’s quality might be represented by the average score in a standardized test.\nSometimes, an additional value, the standard deviation, is added."
  },
  {
    "objectID": "slides/18-distributions.html#case-study-student-heights",
    "href": "slides/18-distributions.html#case-study-student-heights",
    "title": "Distributions",
    "section": "Case study: student heights",
    "text": "Case study: student heights\n\n# cache=FALSE: dont cache results; rerun everytime\nlibrary(tidyverse) \nlibrary(dslabs) \nhead(heights) \n\n     sex height\n1   Male     75\n2   Male     70\n3   Male     68\n4   Male     74\n5   Male     61\n6 Female     65"
  },
  {
    "objectID": "slides/18-distributions.html#distributions-of-categorical-data",
    "href": "slides/18-distributions.html#distributions-of-categorical-data",
    "title": "Distributions",
    "section": "Distributions of categorical data",
    "text": "Distributions of categorical data\n\nThe most basic statistical summary of a list of objects or numbers is its distribution.\nFor example, with categorical data, the distribution simply describes the proportion of each unique category:\n\n\nprop.table(table(heights$sex)) \n\n\nFemale   Male \n 0.227  0.773 \n\n# prop.table(): divide each count by the total count"
  },
  {
    "objectID": "slides/18-distributions.html#distributions-barplot",
    "href": "slides/18-distributions.html#distributions-barplot",
    "title": "Distributions",
    "section": "Distributions: barplot",
    "text": "Distributions: barplot\n\nmurders |&gt; group_by(region) |&gt; \n  summarize(n = n()) |&gt; \n  mutate(Proportion = n/sum(n),  \n         region = reorder(region, Proportion)) |&gt; \n  ggplot(aes(x = region, y = Proportion, fill = region)) +  \n  geom_bar(stat = \"identity\", show.legend = FALSE) +  \n  xlab(\"\")"
  },
  {
    "objectID": "slides/18-distributions.html#distribution-for-numerical-data",
    "href": "slides/18-distributions.html#distribution-for-numerical-data",
    "title": "Distributions",
    "section": "Distribution for numerical data",
    "text": "Distribution for numerical data\n\nWhen the data is numerical, the task of displaying distributions is more challenging.\nWhen data is not categorical, reporting the frequency of each entry, as we did for categorical data, is not an effective summary since most entries are unique.\nFor example, in our case study, while several students reported a height of 68 inches, only one student reported a height of 68.503937007874 inches and only one student reported a height 68.8976377952756 inches."
  },
  {
    "objectID": "slides/18-distributions.html#ecdf",
    "href": "slides/18-distributions.html#ecdf",
    "title": "Distributions",
    "section": "eCDF",
    "text": "eCDF\n\nThe codeThe graph\n\n\n\nA more useful way to define a distribution for numeric data is to define a function that reports the proportion of the data \\(\\le a\\) for all possible values of \\(a\\), eCDF.\n\n\nds_theme_set() # sets the default ggplot theme by dslabs\nheights |&gt; filter(sex==\"Male\") |&gt;  \n  ggplot(aes(height)) +  # plot height on x-axis\n  stat_ecdf() + #empirical cdf: compute y-values\n  ylab(\"Proportion of heights less than or equal to a\") +  \n  xlab(\"a\")"
  },
  {
    "objectID": "slides/18-distributions.html#smoothed-density-kde",
    "href": "slides/18-distributions.html#smoothed-density-kde",
    "title": "Distributions",
    "section": "Smoothed density (KDE)",
    "text": "Smoothed density (KDE)\n\nplots relay the same information as a histogram but are aesthetically more appealing\narea under the curve is 1\n\n\nheights |&gt;  \n  filter(sex == \"Male\") |&gt;  \n  ggplot(aes(height)) +  \n  geom_density(alpha = .2, fill = \"#00BFC4\", color=NA)  + #color=NA: remove the outline\n  geom_line(stat = 'density') # draw the density line (outline), redundant"
  },
  {
    "objectID": "slides/18-distributions.html#comparing-densities",
    "href": "slides/18-distributions.html#comparing-densities",
    "title": "Distributions",
    "section": "Comparing densities",
    "text": "Comparing densities\n\nheights |&gt;  \n  ggplot(aes(height, fill=sex)) +  \n  geom_density(alpha = 0.2, color = 0) + # color=0 equiv color =NA\n  geom_line(stat='density')"
  },
  {
    "objectID": "slides/18-distributions.html#compare-kde-and-normal-distribution",
    "href": "slides/18-distributions.html#compare-kde-and-normal-distribution",
    "title": "Distributions",
    "section": "Compare KDE and normal distribution",
    "text": "Compare KDE and normal distribution\n\nThe male student height smooth density (blue) and the normal distribution (black) with mean = 69.3 and SD = 3.6:\n\n\nnorm_dist &lt;- data.frame(x = seq(-4, 4, len = 50)*s + m) |&gt;  \n  mutate(density = dnorm(x, m, s)) \nheights |&gt; filter(sex == \"Male\") |&gt; ggplot(aes(height)) + \n  geom_density(fill = \"#0099FF\") + \n  geom_line(aes(x, density),  data = norm_dist, lwd = 1.5)"
  },
  {
    "objectID": "slides/18-distributions.html#summarize-by-boxplot",
    "href": "slides/18-distributions.html#summarize-by-boxplot",
    "title": "Distributions",
    "section": "Summarize by Boxplot",
    "text": "Summarize by Boxplot\n\nSuppose we want to summarize the murder rate distribution.\n\n\nmurders &lt;- murders |&gt; mutate(rate = total/population*100000) \nmurders |&gt; ggplot(aes(x = rate)) + geom_histogram(binwidth = 0.5, color = \"black\") + ggtitle(\"Histogram\")"
  },
  {
    "objectID": "slides/18-distributions.html#stratification",
    "href": "slides/18-distributions.html#stratification",
    "title": "Distributions",
    "section": "Stratification",
    "text": "Stratification\n\nIn data analysis we often divide observations into groups based on the values of one or more variables.\nWe call this procedure stratification and refer to the resulting groups as strata.\nStratification is common in data visualization because we are often interested in how the distributions of variables differ across different subgroups.\nStratifying and then making boxplot is a common approach to visualizing these differences."
  },
  {
    "objectID": "slides/18-distributions.html#statfication-boxplot",
    "href": "slides/18-distributions.html#statfication-boxplot",
    "title": "Distributions",
    "section": "Statfication + boxplot",
    "text": "Statfication + boxplot\nHere are the heights for men and women:\n\nheights |&gt; ggplot(aes(x = sex, y = height, fill = sex)) + \n  geom_boxplot()"
  },
  {
    "objectID": "slides/18-distributions.html#kde-plot",
    "href": "slides/18-distributions.html#kde-plot",
    "title": "Distributions",
    "section": "KDE plot",
    "text": "KDE plot\n\nheights |&gt; filter(sex == \"Female\") |&gt; \n  ggplot(aes(height)) + \n  geom_density(fill = \"#F8766D\")"
  },
  {
    "objectID": "slides/18-distributions.html#density-reveals-more-info",
    "href": "slides/18-distributions.html#density-reveals-more-info",
    "title": "Distributions",
    "section": "Density reveals more info",
    "text": "Density reveals more info\n\nFemale students height close to normal but not quite\nA likely for the second bump is that female as the default in the reporting tool (some male students chose this).\n\n\nheights |&gt; filter(sex == \"Female\") |&gt; \n  ggplot(aes(height)) + \n  geom_density(fill = \"#F8766D\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#data-visualization-in-practice",
    "href": "slides/19-dataviz-in-practice.html#data-visualization-in-practice",
    "title": "Dataviz In Practice",
    "section": "Data visualization in practice",
    "text": "Data visualization in practice\n\nAs an example, we will create plots that help us better understand trends in world health and economics.\nwe will describe relevant general data visualization principles and learn concepts such as faceting, time series plots, transformations, and ridge plots."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1",
    "href": "slides/19-dataviz-in-practice.html#case-study-1",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\n\nHans Rosling was the co-founder of the Gapminder Foundation, an organization dedicated to educating the public by using data to dispel common myths about the so-called developing world.\nThe organization uses data to show how actual trends in health and economics contradict the narratives that emanate from sensationalist media coverage of catastrophes, tragedies, and other unfortunate events."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-1",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-1",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\n\nAs stated in the Gapminder Foundation’s website:\n\n\nJournalists and lobbyists tell dramatic stories. That’s their job. They tell stories about extraordinary events and unusual people. The piles of dramatic stories pile up in peoples’ minds into an over-dramatic worldview and strong negative stress feelings: “The world is getting worse!”, “It’s we vs them!”, “Other people are strange!”, “The population just keeps growing!” and “Nobody cares!”."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-2",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-2",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\n\nThis talk is based on two talks by Hans Rosling, one on education and The Best Stats You’ve Ever Seen\nWe use data to attempt to answer the following two questions:\n\nIs it a fair characterization of today’s world to say it is divided into western rich nations and the developing world in Africa, Asia, and Latin America?\nHas income inequality across countries worsened during the last 40 years?"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-3",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-3",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\n\nTo answer these questions, we will be using the gapminder dataset provided in dslabs.\n\n\nlibrary(tidyverse) \nlibrary(dslabs) \nds_theme_set()\noptions(digits = 3)\ngapminder |&gt; as_tibble() |&gt; head()\n\n# A tibble: 6 × 9\n  country    year infant_mortality life_expectancy fertility population      gdp\n  &lt;fct&gt;     &lt;int&gt;            &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;\n1 Albania    1960            115.             62.9      6.19    1636054 NA      \n2 Algeria    1960            148.             47.5      7.65   11124892  1.38e10\n3 Angola     1960            208              36.0      7.32    5270844 NA      \n4 Antigua …  1960             NA              63.0      4.43      54681 NA      \n5 Argentina  1960             59.9            65.4      3.11   20619075  1.08e11\n6 Armenia    1960             NA              66.9      4.55    1867396 NA      \n# ℹ 2 more variables: continent &lt;fct&gt;, region &lt;fct&gt;"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-4",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-4",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\nwe start by testing our knowledge.\n\nWhich country do you think had the highest child mortality rates in 2015?\n\nSri Lanka or Turkey.\nPoland or South Korea.\nMalaysia or Russia.\nPakistan or Vietnam.\nThailand or South Africa."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-5",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-5",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\n\nThe CodeThe Data\n\n\n\ncomp_table &lt;- tibble(comparison = rep(1:5, each = 2), \n           country = c(\"Sri Lanka\", \"Turkey\", \"Poland\", \"South Korea\", \"Malaysia\", \"Russia\", \"Pakistan\",\"Vietnam\",\"Thailand\",\"South Africa\")) \ntmp &lt;- gapminder |&gt;  \n  filter(year == 2015) |&gt;  \n  rename(inf_mort = infant_mortality) |&gt;\n  select(country, inf_mort) |&gt;  \n  mutate(country = as.character(country))  \ntab &lt;- inner_join(comp_table, tmp, by = \"country\") |&gt; select(-comparison) \ntmp &lt;- cbind(slice(tab,seq(1,9,2)), slice(tab,seq(2,10,2))) #slice(df, rows)\n  knitr::kable(tmp, \"html\") |&gt; \n    kableExtra::kable_styling(bootstrap_options = \"striped\", full_width = FALSE)\n  # bootstramp_options: adds alternating row shading\n  # full_width=FALSE: do not stretch to full page width\n\n\n\n\n\n\n\n\ncountry\ninf_mort\ncountry\ninf_mort\n\n\n\n\nSri Lanka\n8.4\nTurkey\n11.6\n\n\nPoland\n4.5\nSouth Korea\n2.9\n\n\nMalaysia\n6.0\nRussia\n8.2\n\n\nPakistan\n65.8\nVietnam\n17.3\n\n\nThailand\n10.5\nSouth Africa\n33.6"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#scatterplots",
    "href": "slides/19-dataviz-in-practice.html#scatterplots",
    "title": "Dataviz In Practice",
    "section": "Scatterplots",
    "text": "Scatterplots\n\nWe start by looking at data from about 50 years ago\n\n\nfilter(gapminder, year == 1962) |&gt; \n  ggplot(aes(fertility, life_expectancy)) + \n  geom_point()"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#scatterplots-1",
    "href": "slides/19-dataviz-in-practice.html#scatterplots-1",
    "title": "Dataviz In Practice",
    "section": "Scatterplots",
    "text": "Scatterplots\n\nTo confirm that indeed these countries are from the regions we expect, we can use color to represent continent.\n\n\nfilter(gapminder, year == 1962) |&gt; \n  ggplot( aes(fertility, life_expectancy, color = continent)) + \n  geom_point()"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#scatterplots-2",
    "href": "slides/19-dataviz-in-practice.html#scatterplots-2",
    "title": "Dataviz In Practice",
    "section": "Scatterplots",
    "text": "Scatterplots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#scatterplots-3",
    "href": "slides/19-dataviz-in-practice.html#scatterplots-3",
    "title": "Dataviz In Practice",
    "section": "Scatterplots",
    "text": "Scatterplots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#faceting",
    "href": "slides/19-dataviz-in-practice.html#faceting",
    "title": "Dataviz In Practice",
    "section": "Faceting",
    "text": "Faceting\n\nTo make comparisons, however, side by side plots are preferable.\n\n\nfilter(gapminder, year %in% c(1962, 2012)) |&gt; \n  ggplot(aes(fertility, life_expectancy, col = continent)) + \n  geom_point() + \n  facet_grid(year~continent)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#faceting-1",
    "href": "slides/19-dataviz-in-practice.html#faceting-1",
    "title": "Dataviz In Practice",
    "section": "Faceting",
    "text": "Faceting\n\nThe codeThe graph\n\n\n\nBy default axes ranges are the same across panes.\nWe can make the axes adapt using scales = \"free\".\n\n\nyears &lt;- c(1962, 1980, 1990, 2000, 2012) \ncontinents &lt;- c(\"Europe\", \"Asia\") \ngapminder |&gt;  \n  filter(year %in% years & continent %in% continents) |&gt; \n  ggplot( aes(fertility, life_expectancy, col = continent)) + \n  geom_point() + \n  facet_wrap(~year, scales = \"free\")  \n\n\nYou will notice that it is harder to see the pattern."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#faceting-2",
    "href": "slides/19-dataviz-in-practice.html#faceting-2",
    "title": "Dataviz In Practice",
    "section": "Faceting",
    "text": "Faceting"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#faceting-3",
    "href": "slides/19-dataviz-in-practice.html#faceting-3",
    "title": "Dataviz In Practice",
    "section": "Faceting",
    "text": "Faceting"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#facet_wrap",
    "href": "slides/19-dataviz-in-practice.html#facet_wrap",
    "title": "Dataviz In Practice",
    "section": "facet_wrap",
    "text": "facet_wrap\n\nThe codeThe graph\n\n\nThe function facet_wrap permits automatically wrap the series of plots\n\nyears &lt;- c(1962, 1980, 1990, 2000, 2012) \ncontinents &lt;- c(\"Europe\", \"Asia\") \ngapminder |&gt;  \n  filter(year %in% years & continent %in% continents) |&gt; \n  ggplot( aes(fertility, life_expectancy, col = continent)) + \n  geom_point() + \n  facet_wrap(~year)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#facet_wrap-1",
    "href": "slides/19-dataviz-in-practice.html#facet_wrap-1",
    "title": "Dataviz In Practice",
    "section": "facet_wrap",
    "text": "facet_wrap"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#faceting-4",
    "href": "slides/19-dataviz-in-practice.html#faceting-4",
    "title": "Dataviz In Practice",
    "section": "Faceting",
    "text": "Faceting\n\nBy default axes ranges are the same across panes.\nWe can make the axes adapt using scales = \"free\".\n\n\nyears &lt;- c(1962, 1980, 1990, 2000, 2012) \ncontinents &lt;- c(\"Europe\", \"Asia\") \ngapminder |&gt;  \n  filter(year %in% years & continent %in% continents) |&gt; \n  ggplot( aes(fertility, life_expectancy, col = continent)) + \n  geom_point() + \n  facet_wrap(~year, scales = \"free\")  \n\n\nYou will notice that it is harder to see the pattern."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#faceting-5",
    "href": "slides/19-dataviz-in-practice.html#faceting-5",
    "title": "Dataviz In Practice",
    "section": "Faceting",
    "text": "Faceting"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#gganimate",
    "href": "slides/19-dataviz-in-practice.html#gganimate",
    "title": "Dataviz In Practice",
    "section": "gganimate",
    "text": "gganimate\n\nWrangleCodeAnimation\n\n\n\nwest &lt;- c(\"Western Europe\",\"Northern Europe\",\"Southern Europe\",\n          \"Northern America\",\"Australia and New Zealand\")\n\ngapminder &lt;- gapminder |&gt; \n  mutate(group = case_when(\n    region %in% west ~ \"The West\",\n    region %in% c(\"Eastern Asia\", \"South-Eastern Asia\") ~ \"East Asia\",\n    region %in% c(\"Caribbean\", \"Central America\", \"South America\") ~ \"Latin America\",\n    continent == \"Africa\" & region != \"Northern Africa\" ~ \"Sub-Saharan Africa\",\n    TRUE ~ \"Others\"))\ngapminder &lt;- gapminder |&gt; \n  mutate(group = factor(group, levels = rev(c(\"Others\", \"Latin America\", \"East Asia\",\"Sub-Saharan Africa\", \"The West\"))))\n\n\n\n\nlibrary(\"gifski\")\nlibrary(gganimate)\nyears &lt;- c(1960:2016)\np &lt;- filter(gapminder, year %in% years & !is.na(group) & \n              !is.na(fertility) & !is.na(life_expectancy)) |&gt;\n  mutate(population_in_millions = population/10^6) |&gt;\n  ggplot(aes(fertility, y = life_expectancy, col = group, size = population_in_millions)) +\n  geom_point(alpha = 0.8) +\n  guides(size = \"none\") +\n  theme(legend.title = element_blank()) + \n  coord_cartesian(ylim = c(30, 85)) + \n  labs(title = 'Year: {frame_time}', \n       x = 'Fertility rate (births per woman)', y = 'Life expectancy') +\n  transition_time(year) +\n  ease_aes('linear') # change at a constant rate form frame to frame\n\nanimate(p, end_pause = 15) # hold the final frame for the time of animating 15 frames"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots\n\nThe codeThe graph\n\n\nHere is a trend plot of United States fertility rates:\n\ngapminder |&gt;  \n  filter(country == \"United States\") |&gt;  \n  ggplot(aes(year, fertility)) + \n  geom_point()"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-1",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-1",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots\n\nThe codeThe line graph\n\n\n\nWhen the points are regularly and densely spaced, as they are here, we create curves by joining the points with lines, to convey that these data are from a single series, here a country:\n\n\ngapminder |&gt;  \n  filter(country == \"United States\") |&gt;  \n  ggplot(aes(year, fertility)) + \n  geom_line()"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-2",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-2",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots\n\nWe define a data table with the label locations and then use a second mapping just for these labels:\n\n\nlibrary(geomtextpath) \ngapminder |&gt;  \n  filter(country %in% countries) |&gt;  \n  ggplot(aes(year, life_expectancy, col = country, label = country)) + \n  geom_textpath() + \n  theme(legend.position = \"none\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-3",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-3",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-4",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-4",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots\n\nWe define a data table with the label locations and then use a second mapping just for these labels:\n\n\nlibrary(geomtextpath) \ngapminder |&gt;  \n  filter(country %in% countries) |&gt;  \n  ggplot(aes(year, life_expectancy, col = country, label = country)) + \n  geom_textpath() + \n  theme(legend.position = \"none\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-5",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-5",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-6",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-6",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots\n\nWe define a data table with the label locations and then use a second mapping just for these labels:\n\n\nlibrary(geomtextpath) \ngapminder |&gt;  \n  filter(country %in% countries) |&gt;  \n  ggplot(aes(year, life_expectancy, col = country, label = country)) + \n  geom_textpath() + \n  theme(legend.position = \"none\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-7",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-7",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-8",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-8",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots\n\nWe define a data table with the label locations and then use a second mapping just for these labels:\n\n\nlibrary(geomtextpath) \ngapminder |&gt;  \n  filter(country %in% countries) |&gt;  \n  ggplot(aes(year, life_expectancy, col = country, label = country)) + \n  geom_textpath() + \n  theme(legend.position = \"none\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-9",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-9",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-10",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-10",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-11",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-11",
    "title": "Dataviz In Practice",
    "section": "Time series plots",
    "text": "Time series plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#data-transformations",
    "href": "slides/19-dataviz-in-practice.html#data-transformations",
    "title": "Dataviz In Practice",
    "section": "Data transformations",
    "text": "Data transformations\n\nGDP measures the market value of goods and services produced by a country in a year.\nThe GDP per person is often used as a rough summary of a country’s wealth.\nGapmider adjusts GDP values for inflation in current US dollars.\nWe divide this quantity by 365 to obtain the more interpretable measure dollars per day.\n\n\ngapminder &lt;- gapminder |&gt;   \n  mutate(dollars_per_day = gdp/population/365)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#data-transformations-1",
    "href": "slides/19-dataviz-in-practice.html#data-transformations-1",
    "title": "Dataviz In Practice",
    "section": "Data transformations",
    "text": "Data transformations\n\nGDP measures the market value of goods and services produced by a country in a year.\nThe GDP per person is often used as a rough summary of a country’s wealth.\nGapmider adjusts GDP values for inflation and represent current US dollars.\nWe divide this quantity by 365 to obtain the more interpretable measure dollars per day.\n\n\ngapminder &lt;- gapminder |&gt;   \n  mutate(dollars_per_day = gdp/population/365)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#log-transformation",
    "href": "slides/19-dataviz-in-practice.html#log-transformation",
    "title": "Dataviz In Practice",
    "section": "Log transformation",
    "text": "Log transformation\n\nThe codeThe graph\n\n\n\nIt might be more informative to see how many countries have average daily incomes of about $1 (extremely poor), $2 (very poor), $4 (poor), $8 (middle), $16 (well off), $32 (rich), $64 (very rich) per day.\nif we apply a log base 2 transform:\n\n\ngapminder |&gt;  \n  filter(year == past_year & !is.na(gdp)) |&gt; \n  ggplot(aes(log2(dollars_per_day))) +  \n  geom_histogram(binwidth = 1, color = \"black\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#log-transformation-1",
    "href": "slides/19-dataviz-in-practice.html#log-transformation-1",
    "title": "Dataviz In Practice",
    "section": "Log transformation",
    "text": "Log transformation\n\nIt might be more informative to quickly be able to see how many countries have average daily incomes of about $1 (extremely poor), $2 (very poor), $4 (poor), $8 (middle), $16 (well off), $32 (rich), $64 (very rich) per day.\nHere is the distribution if we apply a log base 2 transform:\n\n\ngapminder |&gt;  \n  filter(year == past_year & !is.na(gdp)) |&gt; \n  ggplot(aes(log2(dollars_per_day))) +  \n  geom_histogram(binwidth = 1, color = \"black\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#log-transformation-2",
    "href": "slides/19-dataviz-in-practice.html#log-transformation-2",
    "title": "Dataviz In Practice",
    "section": "Log transformation",
    "text": "Log transformation"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#log-transformation-3",
    "href": "slides/19-dataviz-in-practice.html#log-transformation-3",
    "title": "Dataviz In Practice",
    "section": "Log transformation",
    "text": "Log transformation"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#which-base",
    "href": "slides/19-dataviz-in-practice.html#which-base",
    "title": "Dataviz In Practice",
    "section": "Which base?",
    "text": "Which base?\n\nIn the dollars per day example, we used base 2 instead of base 10 because the resulting range is easier to interpret.\nThe range of the untransformed values is [0.327, 48.885] (code: with(filter(gapminder, year==past_year), range(dollars_per_day, na.rm=TRUE)).\nIn base 10, this turns into a range that includes very few integers: just 0 and 1.\nWith base 2, the range includes -2, -1, 0, 1, 2, 3, 4, and 5."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#which-base-1",
    "href": "slides/19-dataviz-in-practice.html#which-base-1",
    "title": "Dataviz In Practice",
    "section": "Which base?",
    "text": "Which base?\n\nIt is easier to compute \\(2^x\\) and \\(10^x\\) when \\(x\\) is an integer and between -10 and 10, so we prefer to have smaller integers in the scale.\nFor a limited range, choosing the binwidth is more challenging.\nWith log base 2, we know that a binwidth of 1 will translate to a bin with range \\(x\\) to \\(2x\\)."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#which-base-2",
    "href": "slides/19-dataviz-in-practice.html#which-base-2",
    "title": "Dataviz In Practice",
    "section": "Which base?",
    "text": "Which base?\n\nFor an example in which base 10 makes more sense, consider population sizes:\n\n\ngapminder |&gt;  \n  filter(year == past_year) |&gt; \n  ggplot(aes(log10(population))) + \n  geom_histogram(binwidth = 0.5, color = \"black\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#which-base-3",
    "href": "slides/19-dataviz-in-practice.html#which-base-3",
    "title": "Dataviz In Practice",
    "section": "Which base?",
    "text": "Which base?"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#transform-values-or-scale",
    "href": "slides/19-dataviz-in-practice.html#transform-values-or-scale",
    "title": "Dataviz In Practice",
    "section": "Transform values or scale?",
    "text": "Transform values or scale?\nLet \\(z = \\log10(x)\\), what is the value of \\(z\\) at the mark ^:\n----1----^----2--------3----.\n\\(z\\) is about 1.5.\nBut what If the scales are logged, what value of \\(x\\) marked by ^?\n----10---^---100------1000---\n\\(x=10^{1.5}\\)\n\nthe advantage of showing logged scales is that the original values are displayed in the plot, which are easier to interpret."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#transform-values-or-scale-1",
    "href": "slides/19-dataviz-in-practice.html#transform-values-or-scale-1",
    "title": "Dataviz In Practice",
    "section": "Transform values or scale?",
    "text": "Transform values or scale?\n\nThe codeThe graph\n\n\n\nTo show logged sclaes, instead of logging the values first, we apply a scale layer:\n\n\ngapminder |&gt;  \n  filter(year == past_year & !is.na(gdp)) |&gt; \n  ggplot(aes(dollars_per_day)) +  \n  geom_histogram(binwidth = 1, color = \"black\") + \n  scale_x_continuous(trans = \"log2\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#transform-values-or-scale-2",
    "href": "slides/19-dataviz-in-practice.html#transform-values-or-scale-2",
    "title": "Dataviz In Practice",
    "section": "Transform values or scale?",
    "text": "Transform values or scale?"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#transform-values-or-scale-3",
    "href": "slides/19-dataviz-in-practice.html#transform-values-or-scale-3",
    "title": "Dataviz In Practice",
    "section": "Transform values or scale?",
    "text": "Transform values or scale?"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#comparing-distributions",
    "href": "slides/19-dataviz-in-practice.html#comparing-distributions",
    "title": "Dataviz In Practice",
    "section": "Comparing distributions",
    "text": "Comparing distributions\n\nThe codeThe graph\n\n\n\nWe reorder the regions by the median value and use a log scale.\n\n\ngapminder |&gt;  \n  filter(year == past_year & !is.na(gdp)) |&gt; \n  mutate(region = reorder(region, dollars_per_day, FUN = median)) |&gt; \n  ggplot(aes(dollars_per_day, region)) + \n  geom_point() + \n  scale_x_continuous(trans = \"log2\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#comparing-distributions-1",
    "href": "slides/19-dataviz-in-practice.html#comparing-distributions-1",
    "title": "Dataviz In Practice",
    "section": "Comparing distributions",
    "text": "Comparing distributions\n\ngapminder &lt;- gapminder |&gt;  \n  mutate(group = case_when( \n    region %in% c(\"Western Europe\", \"Northern Europe\",\"Southern Europe\",  \n                    \"Northern America\",  \n                  \"Australia and New Zealand\") ~ \"West\", \n    region %in% c(\"Eastern Asia\", \"South-Eastern Asia\") ~ \"East Asia\", \n    region %in% c(\"Caribbean\", \"Central America\",  \n                  \"South America\") ~ \"Latin America\", \n    continent == \"Africa\" &  \n      region != \"Northern Africa\" ~ \"Sub-Saharan\", \n    TRUE ~ \"Others\")) |&gt;  \n  mutate(group = factor(group, levels = c(\"Others\", \"Latin America\",  \n                                          \"East Asia\", \"Sub-Saharan\", \n                                          \"West\")))"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#comparing-distributions-2",
    "href": "slides/19-dataviz-in-practice.html#comparing-distributions-2",
    "title": "Dataviz In Practice",
    "section": "Comparing distributions",
    "text": "Comparing distributions\n\ngapminder &lt;- gapminder |&gt;  \n  mutate(group = case_when( \n    region %in% c(\"Western Europe\", \"Northern Europe\",\"Southern Europe\",  \n                    \"Northern America\",  \n                  \"Australia and New Zealand\") ~ \"West\", \n    region %in% c(\"Eastern Asia\", \"South-Eastern Asia\") ~ \"East Asia\", \n    region %in% c(\"Caribbean\", \"Central America\",  \n                  \"South America\") ~ \"Latin America\", \n    continent == \"Africa\" &  \n      region != \"Northern Africa\" ~ \"Sub-Saharan\", \n    TRUE ~ \"Others\")) |&gt;  \n  mutate(group = factor(group, levels = c(\"Others\", \"Latin America\",  \n                                          \"East Asia\", \"Sub-Saharan\", \n                                          \"West\")))"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#boxplots",
    "href": "slides/19-dataviz-in-practice.html#boxplots",
    "title": "Dataviz In Practice",
    "section": "Boxplots",
    "text": "Boxplots\n\nThe codeThe graph\n\n\n\np &lt;- gapminder |&gt;  \n  filter(year == past_year & !is.na(gdp)) |&gt; \n  mutate(group = reorder(group, dollars_per_day, FUN = median)) |&gt; \n  ggplot(aes(group, dollars_per_day)) + \n  geom_boxplot() + \n  scale_y_continuous(trans = \"log2\") + \n  xlab(\"\") + \n  theme(axis.text.x = element_text(angle = 90, hjust = 1))  \np"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#boxplots-1",
    "href": "slides/19-dataviz-in-practice.html#boxplots-1",
    "title": "Dataviz In Practice",
    "section": "Boxplots",
    "text": "Boxplots\n\nBoxplots have the limitation that by summarizing the data into five numbers, we might miss important characteristics of the data.\nOne way to avoid this is by showing the data.\n\n\np + geom_point(alpha = 0.5)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#boxplots-2",
    "href": "slides/19-dataviz-in-practice.html#boxplots-2",
    "title": "Dataviz In Practice",
    "section": "Boxplots",
    "text": "Boxplots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#boxplots-3",
    "href": "slides/19-dataviz-in-practice.html#boxplots-3",
    "title": "Dataviz In Practice",
    "section": "Boxplots",
    "text": "Boxplots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#ridge-plots",
    "href": "slides/19-dataviz-in-practice.html#ridge-plots",
    "title": "Dataviz In Practice",
    "section": "Ridge plots",
    "text": "Ridge plots\n\nThe codeThe plot\n\n\n\nHere is the income data shown above with boxplots but with a ridge plot.\n\n\nlibrary(ggridges) \np &lt;- gapminder |&gt;  \n  filter(year == past_year & !is.na(dollars_per_day)) |&gt; \n  mutate(group = reorder(group, dollars_per_day, FUN = median)) |&gt; \n  ggplot(aes(dollars_per_day, group)) +  \n  scale_x_continuous(trans = \"log2\")  \np  + geom_density_ridges()"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#ridge-plots-1",
    "href": "slides/19-dataviz-in-practice.html#ridge-plots-1",
    "title": "Dataviz In Practice",
    "section": "Ridge plots",
    "text": "Ridge plots\n\nIf the number of data points is small enough, we can add them to the ridge plot using the following code:\n\n\np + geom_density_ridges(jittered_points = TRUE)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#ridge-plots-2",
    "href": "slides/19-dataviz-in-practice.html#ridge-plots-2",
    "title": "Dataviz In Practice",
    "section": "Ridge plots",
    "text": "Ridge plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#ridge-plots-3",
    "href": "slides/19-dataviz-in-practice.html#ridge-plots-3",
    "title": "Dataviz In Practice",
    "section": "Ridge plots",
    "text": "Ridge plots\n\nTo show data points, but without using jitter we can use the following code to add what is referred to as a rug representation of the data.\n\n\np + geom_density_ridges(jittered_points = TRUE,  \n                        position = position_points_jitter(height = 0), \n                        point_shape = '|', point_size = 3,  \n                        point_alpha = 1, alpha = 0.7)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#ridge-plots-4",
    "href": "slides/19-dataviz-in-practice.html#ridge-plots-4",
    "title": "Dataviz In Practice",
    "section": "Ridge plots",
    "text": "Ridge plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#ridge-plots-5",
    "href": "slides/19-dataviz-in-practice.html#ridge-plots-5",
    "title": "Dataviz In Practice",
    "section": "Ridge plots",
    "text": "Ridge plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#ridge-plots-6",
    "href": "slides/19-dataviz-in-practice.html#ridge-plots-6",
    "title": "Dataviz In Practice",
    "section": "Ridge plots",
    "text": "Ridge plots\n\nTo show data points, but without using jitter we can use the following code to add what is referred to as a rug representation of the data.\n\n\np + geom_density_ridges(jittered_points = TRUE,  \n                        position = position_points_jitter(height = 0), \n                        point_shape = '|', point_size = 3,  \n                        point_alpha = 1, alpha = 0.7)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#ridge-plots-7",
    "href": "slides/19-dataviz-in-practice.html#ridge-plots-7",
    "title": "Dataviz In Practice",
    "section": "Ridge plots",
    "text": "Ridge plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-6",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-6",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\nWe keep countries that exist both in 1970 and 2010:\n\npast_year &lt;- 1970 \npresent_year &lt;- 2010 \nyears &lt;- c(past_year, present_year) \ncountry_list &lt;- gapminder |&gt;  \n  filter(year %in% c(present_year, past_year)) |&gt; \n  group_by(country) |&gt; \n  summarize(n = sum(!is.na(dollars_per_day)), .groups = \"drop\") |&gt; \n  filter(n == 2) |&gt; \n  pull(country)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-7",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-7",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\n\nWe can compare the distributions using this code:\n\n\ngapminder |&gt;  \n  filter(year %in% years & country %in% country_list) |&gt; \n  mutate(west = ifelse(group == \"West\", \"West\", \"Developing\")) |&gt; \n  ggplot(aes(dollars_per_day)) + \n  geom_histogram(binwidth = 1, color = \"black\") + \n  scale_x_continuous(trans = \"log2\") +  \n  facet_grid(year ~ west)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-8",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-8",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-9",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-9",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\nTo see which specific regions improved the most, we can remake the boxplots we made above, but now adding the year 2010 and then using facet to compare the two years.\n\ngapminder |&gt;  \n  filter(year %in% years & country %in% country_list) |&gt; \n  mutate(group = reorder(group, dollars_per_day, FUN = median)) |&gt; \n  ggplot(aes(group, dollars_per_day)) + \n  geom_boxplot() + \n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) + \n  scale_y_continuous(trans = \"log2\") + \n  xlab(\"\") + \n  facet_grid(. ~ year)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-10",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-10",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-11",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-11",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\nTo add color:\n\ngapminder |&gt;  \n  filter(year %in% years & country %in% country_list) |&gt; \n  mutate(group = reorder(group, dollars_per_day, FUN = median),\n         year = factor(year)) |&gt; \n  ggplot(aes(group, dollars_per_day, fill = year)) + \n  geom_boxplot() + \n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) + \n  scale_y_continuous(trans = \"log2\") + \n  xlab(\"\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-12",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-12",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-13",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-13",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1\nLet’s start by noting that density plots for income distribution in 1970 and 2010 deliver the message that the gap is closing:\n\ngapminder |&gt;  \n  filter(year %in% years & country %in% country_list) |&gt; \n  ggplot(aes(dollars_per_day)) + \n  geom_density(fill = \"grey\") +  \n  scale_x_continuous(trans = \"log2\") +  \n  facet_grid(. ~ year)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-1-14",
    "href": "slides/19-dataviz-in-practice.html#case-study-1-14",
    "title": "Dataviz In Practice",
    "section": "Case study 1",
    "text": "Case study 1"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#accessing-computed-variables",
    "href": "slides/19-dataviz-in-practice.html#accessing-computed-variables",
    "title": "Dataviz In Practice",
    "section": "Accessing computed variables",
    "text": "Accessing computed variables\nUse after_stat to access density.\n\np &lt;- gapminder |&gt;  \n  filter(year %in% years & country %in% country_list) |&gt; \n  mutate(group = ifelse(group == \"West\", \"West\", \"Developing\")) |&gt; \n  ggplot(aes(dollars_per_day, y = after_stat(count), fill = group)) + \n  scale_x_continuous(trans = \"log2\", limits = c(0.125, 300)) \np + geom_density(alpha = 0.2) + facet_grid(year ~ .)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#accessing-computed-variables-1",
    "href": "slides/19-dataviz-in-practice.html#accessing-computed-variables-1",
    "title": "Dataviz In Practice",
    "section": "Accessing computed variables",
    "text": "Accessing computed variables"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#changing-smoothness",
    "href": "slides/19-dataviz-in-practice.html#changing-smoothness",
    "title": "Dataviz In Practice",
    "section": "Changing smoothness",
    "text": "Changing smoothness\nWe can change the smoothness. We selected 0.75 after trying out several values.\n\np + geom_density(alpha = 0.2, bw = 0.75) + facet_grid(year ~ .)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#multiple-ridge-plot",
    "href": "slides/19-dataviz-in-practice.html#multiple-ridge-plot",
    "title": "Dataviz In Practice",
    "section": "Multiple ridge plot",
    "text": "Multiple ridge plot\nTo visualize if any of the groups defined above are driving this we can quickly make a ridge plot:\n\ngapminder |&gt;  \n  filter(year %in% years & !is.na(dollars_per_day)) |&gt; \n  mutate(group = reorder(group, dollars_per_day, FUN = median)) |&gt;\n  ggplot(aes(dollars_per_day, group)) +  \n  scale_x_continuous(trans = \"log2\") +  \n  geom_density_ridges(bandwidth = 1.5) + \n  facet_grid(. ~ year)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#multiple-ridge-plot-1",
    "href": "slides/19-dataviz-in-practice.html#multiple-ridge-plot-1",
    "title": "Dataviz In Practice",
    "section": "Multiple ridge plot",
    "text": "Multiple ridge plot"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#stacking-densities",
    "href": "slides/19-dataviz-in-practice.html#stacking-densities",
    "title": "Dataviz In Practice",
    "section": "Stacking densities",
    "text": "Stacking densities\n\nAnother way to achieve this is by stacking the densities on top of each other:\n\n\ngapminder |&gt;  \n    filter(year %in% years & country %in% country_list) |&gt; \n  group_by(year) |&gt; \n  mutate(weight = population/sum(population)*2) |&gt; \n  ungroup() |&gt; \n  ggplot(aes(dollars_per_day, fill = group)) + \n  scale_x_continuous(trans = \"log2\", limits = c(0.125, 300)) +  \n  geom_density(alpha = 0.2, bw = 0.75, position = \"stack\") +  \n  facet_grid(year ~ .)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#stacking-densities-1",
    "href": "slides/19-dataviz-in-practice.html#stacking-densities-1",
    "title": "Dataviz In Practice",
    "section": "Stacking densities",
    "text": "Stacking densities"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#weighted-densities",
    "href": "slides/19-dataviz-in-practice.html#weighted-densities",
    "title": "Dataviz In Practice",
    "section": "Weighted densities",
    "text": "Weighted densities\nHere we weigh the countries by size:\n\ngapminder |&gt;  \n  filter(year %in% years & country %in% country_list) |&gt; \n  group_by(year) |&gt; \n  mutate(weight = population/sum(population)*2) |&gt; \n  ungroup() |&gt; \n  ggplot(aes(dollars_per_day, fill = group, weight = weight)) + \n  scale_x_continuous(trans = \"log2\", limits = c(0.125, 300)) +  \n  geom_density(alpha = 0.2, bw = 0.75, position = \"stack\") + \n  facet_grid(year ~ .)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#weighted-densities-1",
    "href": "slides/19-dataviz-in-practice.html#weighted-densities-1",
    "title": "Dataviz In Practice",
    "section": "Weighted densities",
    "text": "Weighted densities"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#the-ecological-fallacy",
    "href": "slides/19-dataviz-in-practice.html#the-ecological-fallacy",
    "title": "Dataviz In Practice",
    "section": "The ecological fallacy",
    "text": "The ecological fallacy"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#show-the-data",
    "href": "slides/19-dataviz-in-practice.html#show-the-data",
    "title": "Dataviz In Practice",
    "section": "Show the data",
    "text": "Show the data"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#case-study-2",
    "href": "slides/19-dataviz-in-practice.html#case-study-2",
    "title": "Dataviz In Practice",
    "section": "Case study 2",
    "text": "Case study 2\n\nthe_disease &lt;- \"Measles\" \ndat &lt;- us_contagious_diseases |&gt; \n  filter(!state %in% c(\"Hawaii\",\"Alaska\") & disease == the_disease) |&gt; \n  mutate(rate = count / population * 10000 * 52 / weeks_reporting) |&gt;  \n  mutate(state = reorder(state, ifelse(year &lt;= 1963, rate, NA),  \n                         median, na.rm = TRUE))"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#heatmaps",
    "href": "slides/19-dataviz-in-practice.html#heatmaps",
    "title": "Dataviz In Practice",
    "section": "Heatmaps",
    "text": "Heatmaps\n\nlibrary(RColorBrewer)\ndat |&gt; ggplot(aes(year, state, fill = rate)) + \n  geom_tile(color = \"grey50\") + \n  scale_x_continuous(expand = c(0,0)) + \n  scale_fill_gradientn(colors = brewer.pal(9, \"Reds\"), trans = \"sqrt\") + \n  geom_vline(xintercept = 1963, col = \"blue\") + \n  theme_minimal() +   \n  theme(panel.grid = element_blank(),  \n        legend.position = \"bottom\",  \n        text = element_text(size = 8)) + \n  labs(title = the_disease, x = \"\", y = \"\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#heatmaps-1",
    "href": "slides/19-dataviz-in-practice.html#heatmaps-1",
    "title": "Dataviz In Practice",
    "section": "Heatmaps",
    "text": "Heatmaps"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#using-position",
    "href": "slides/19-dataviz-in-practice.html#using-position",
    "title": "Dataviz In Practice",
    "section": "Using position",
    "text": "Using position\nWe will show each state and the avearge:\n\navg &lt;- us_contagious_diseases |&gt; \n  filter(disease == the_disease) |&gt; group_by(year) |&gt; \n  summarize(us_rate = sum(count, na.rm = TRUE) /  \n              sum(population, na.rm = TRUE) * 10000)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#using-position-1",
    "href": "slides/19-dataviz-in-practice.html#using-position-1",
    "title": "Dataviz In Practice",
    "section": "Using position",
    "text": "Using position\n\ndat |&gt;  \n  filter(!is.na(rate)) |&gt; \n    ggplot() + \n  geom_line(aes(year, rate, group = state),  color = \"grey50\",  \n            show.legend = FALSE, alpha = 0.2, linewidth = 1) + \n  geom_line(mapping = aes(year, us_rate),  data = avg, linewidth = 1) + \n  scale_y_continuous(trans = \"sqrt\", breaks = c(5, 25, 125, 300)) +  \n  ggtitle(\"Cases per 10,000 by state\") +  \n  xlab(\"\") + ylab(\"\") + \n  geom_text(data = data.frame(x = 1955, y = 50),  \n            mapping = aes(x, y, label = \"US average\"),  \n            color = \"black\") +  \n  geom_vline(xintercept = 1963, col = \"blue\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#using-position-2",
    "href": "slides/19-dataviz-in-practice.html#using-position-2",
    "title": "Dataviz In Practice",
    "section": "Using position",
    "text": "Using position\n\n\n\nHome"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#scatterplots-adding-regions",
    "href": "slides/19-dataviz-in-practice.html#scatterplots-adding-regions",
    "title": "Dataviz In Practice",
    "section": "Scatterplots: adding regions",
    "text": "Scatterplots: adding regions\n\nTo confirm that indeed these countries are from the regions we expect, we can use color to represent continent."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#faceting-one-variable",
    "href": "slides/19-dataviz-in-practice.html#faceting-one-variable",
    "title": "Dataviz In Practice",
    "section": "Faceting: one variable",
    "text": "Faceting: one variable\n\n# out.width=\"100%\": fills 100% of the available content width of the page\n#| code-line-numbers: \"4\"\nfilter(gapminder, year %in% c(1962, 2012)) |&gt; \n  ggplot(aes(fertility, life_expectancy, col = continent)) + \n  geom_point() + \n  facet_grid(. ~ year) # `.` not using that variable\n\n\nThis plot clearly shows that the majority of countries have moved from the developing world cluster to the western world one."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-for-two-countries",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-for-two-countries",
    "title": "Dataviz In Practice",
    "section": "Time series plots for two countries",
    "text": "Time series plots for two countries\n\nThe codeThe wrong plots\n\n\n\ncountries &lt;- c(\"South Korea\", \"Germany\") \ngapminder |&gt; filter(country %in% countries) |&gt;  \n  ggplot(aes(year,fertility)) + \n  geom_line()"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#time-series-plots-by-grouping-correct",
    "href": "slides/19-dataviz-in-practice.html#time-series-plots-by-grouping-correct",
    "title": "Dataviz In Practice",
    "section": "Time series plots by grouping (correct)",
    "text": "Time series plots by grouping (correct)\n\nThe codeThe correct plots\n\n\n\nTo let ggplot know that there are two curves that need to be made separately, we assign each set of points to a group, one for each country:\n\n\ncountries &lt;- c(\"South Korea\",\"Germany\") \ngapminder |&gt; filter(country %in% countries & !is.na(fertility)) |&gt;  \n  ggplot(aes(year, fertility, group = country)) + \n  geom_line()"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#assigning-colors-to-groups",
    "href": "slides/19-dataviz-in-practice.html#assigning-colors-to-groups",
    "title": "Dataviz In Practice",
    "section": "Assigning colors to groups",
    "text": "Assigning colors to groups\n\nThe codeThe plots\n\n\n\ncountries &lt;- c(\"South Korea\",\"Germany\") \ngapminder |&gt; filter(country %in% countries & !is.na(fertility)) |&gt;  \n  ggplot(aes(year,fertility, col = country)) + \n  geom_line()"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#the-plots",
    "href": "slides/19-dataviz-in-practice.html#the-plots",
    "title": "Dataviz In Practice",
    "section": "The plots",
    "text": "The plots"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#labels-are-better",
    "href": "slides/19-dataviz-in-practice.html#labels-are-better",
    "title": "Dataviz In Practice",
    "section": "Labels are better",
    "text": "Labels are better\n\nThe codeThe plot\n\n\n\nlibrary(geomtextpath) \ngapminder |&gt;  \n  filter(country %in% countries) |&gt;  \n  ggplot(aes(year, life_expectancy, col = country, label = country)) + \n  geom_textpath() + # draw text(label) that follows a curve\n  theme(legend.position = \"none\") # remove legend"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#the-plot",
    "href": "slides/19-dataviz-in-practice.html#the-plot",
    "title": "Dataviz In Practice",
    "section": "The plot",
    "text": "The plot"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#motivating-question",
    "href": "slides/19-dataviz-in-practice.html#motivating-question",
    "title": "Dataviz In Practice",
    "section": "Motivating question",
    "text": "Motivating question\n\nWhen general audiences are asked if poor countries have become poorer and rich countries become richer, the majority answers yes.\nBy using stratification, histograms, smooth densities, and boxplots, we will be able to understand if this is in fact the case.\ntransformations can sometimes help provide more informative summaries and plots."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#gdp-per-day",
    "href": "slides/19-dataviz-in-practice.html#gdp-per-day",
    "title": "Dataviz In Practice",
    "section": "GDP per day",
    "text": "GDP per day\n\nThe codeThe graph\n\n\n\nHere is a histogram of per day incomes from 1970:\n\n\npast_year &lt;- 1970 \ngapminder |&gt;  \n  filter(year == past_year & !is.na(gdp)) |&gt; \n  ggplot(aes(dollars_per_day)) +  \n  geom_histogram(binwidth = 1, color = \"black\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#base-10",
    "href": "slides/19-dataviz-in-practice.html#base-10",
    "title": "Dataviz In Practice",
    "section": "Base 10",
    "text": "Base 10\n\nThe codeThe Graph\n\n\n\nFor an example in which base 10 makes more sense, consider population sizes:\n\n\ngapminder |&gt;  \n  filter(year == past_year) |&gt; \n  ggplot(aes(log10(population))) + \n  geom_histogram(binwidth = 0.5, color = \"black\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#the-code-11",
    "href": "slides/19-dataviz-in-practice.html#the-code-11",
    "title": "Dataviz In Practice",
    "section": "The code",
    "text": "The code\n\nFor an example in which base 10 makes more sense, consider population sizes:\n\n\ngapminder |&gt;  \n  filter(year == past_year) |&gt; \n  ggplot(aes(log10(population))) + \n  geom_histogram(binwidth = 0.5, color = \"black\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#the-graph-5",
    "href": "slides/19-dataviz-in-practice.html#the-graph-5",
    "title": "Dataviz In Practice",
    "section": "The Graph",
    "text": "The Graph"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#use-transformed-scale",
    "href": "slides/19-dataviz-in-practice.html#use-transformed-scale",
    "title": "Dataviz In Practice",
    "section": "Use Transformed scale",
    "text": "Use Transformed scale\n\nThe codeThe graph\n\n\n\nTo show logged sclaes, instead of logging the values first, we apply a scale layer:\n\n\ngapminder |&gt;  \n  filter(year == past_year & !is.na(gdp)) |&gt; \n  ggplot(aes(dollars_per_day)) +  \n  geom_histogram(binwidth = 1, color = \"black\") + \n  scale_x_continuous(trans = \"log2\")"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#comparing-distributions-data-prep",
    "href": "slides/19-dataviz-in-practice.html#comparing-distributions-data-prep",
    "title": "Dataviz In Practice",
    "section": "Comparing distributions: data prep",
    "text": "Comparing distributions: data prep\n\ngapminder &lt;- gapminder |&gt;  \n  mutate(group = case_when( \n    region %in% c(\"Western Europe\", \"Northern Europe\",\"Southern Europe\",  \n                    \"Northern America\",  \n                  \"Australia and New Zealand\") ~ \"West\", \n    region %in% c(\"Eastern Asia\", \"South-Eastern Asia\") ~ \"East Asia\", \n    region %in% c(\"Caribbean\", \"Central America\",  \n                  \"South America\") ~ \"Latin America\", \n    continent == \"Africa\" &  \n      region != \"Northern Africa\" ~ \"Sub-Saharan\", \n    TRUE ~ \"Others\")) |&gt;  \n  mutate(group = factor(group, levels = c(\"Others\", \"Latin America\",  \n                                          \"East Asia\", \"Sub-Saharan\", \n                                          \"West\")))"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#boxplots-show-data",
    "href": "slides/19-dataviz-in-practice.html#boxplots-show-data",
    "title": "Dataviz In Practice",
    "section": "Boxplots + show data",
    "text": "Boxplots + show data\n\nThe codeThe plot\n\n\n\nBoxplots have the limitation that by summarizing the data into five numbers, we might miss important characteristics of the data.\nOne way to avoid this is by showing the data.\n\n\np + geom_point(alpha = 0.5)"
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#limit-of-boxplots",
    "href": "slides/19-dataviz-in-practice.html#limit-of-boxplots",
    "title": "Dataviz In Practice",
    "section": "Limit of boxplots",
    "text": "Limit of boxplots\n\nShowing each individual point does not always reveal important characteristics of the distribution.\nBoxplots help with this by providing a five-number summary, but this has limitations too.\nFor example, boxplots will not permit us to discover bimodal distributions."
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#example",
    "href": "slides/19-dataviz-in-practice.html#example",
    "title": "Dataviz In Practice",
    "section": "Example",
    "text": "Example\n\nThe codeThe graph\n\n\n\nset.seed(1987) \nz &lt;- sample(c(0,1), 1000, replace = TRUE, prob = c(0.25, 0.75)) \nx &lt;- rnorm(1000)*z + rnorm(1000, 5)*(1 - z) # if z_i=1, x_i comes from N(0,1).  \np1 &lt;- data.frame(x=x) |&gt;  \n  ggplot(aes(x)) +  \n  geom_density(fill = 1, show.legend=FALSE, alpha = 0.2) + # fill=1: the first color in the palette. To see the color, `scales::hue_pal()(1) `\n  scale_x_continuous(limits=c(-4,8.5)) \np2 &lt;- data.frame(g= \"\", x=x) |&gt; ggplot(aes(g, x)) + geom_boxplot() + xlab(\"\") + # create empty first column\n  theme(axis.ticks = element_blank()) \n# the first part can be: ggplot(data.frame(x = x), aes(y = x)) + geom_boxplot()\n\ngridExtra::grid.arrange(p1, p2, nrow = 1)"
  },
  {
    "objectID": "psets/hw1.html",
    "href": "psets/hw1.html",
    "title": "Problem set 1",
    "section": "",
    "text": "Download source\n\nMake sure you have a GitHub account. In your GitHub account, create a GitHub repository named STAT3000.\nCreate an RStudio Project, e.g., stat3000, connected to the GitHub repo (clone or connect existing).\nAnswer each item inside this Quarto file. Show commands/code where requested.",
    "crumbs": [
      "HW-1"
    ]
  },
  {
    "objectID": "psets/hw1.html#instructionssetup",
    "href": "psets/hw1.html#instructionssetup",
    "title": "Problem set 1",
    "section": "",
    "text": "Download source\n\nMake sure you have a GitHub account. In your GitHub account, create a GitHub repository named STAT3000.\nCreate an RStudio Project, e.g., stat3000, connected to the GitHub repo (clone or connect existing).\nAnswer each item inside this Quarto file. Show commands/code where requested.",
    "crumbs": [
      "HW-1"
    ]
  },
  {
    "objectID": "psets/hw1.html#tasks",
    "href": "psets/hw1.html#tasks",
    "title": "Problem set 1",
    "section": "2 Tasks",
    "text": "2 Tasks\n\nProject folders\nIn your project root, create the folders: hw/, img/, data/, code/, docs/.\nProvide either:\n\nthe Unix commands you used, or\nthe R commands you used\n\n# Your commands here\n\nRStudio project + Quarto document\nCreate a Quarto document named hw1.qmd (this file).\nInclude a screenshot of your RStudio session showing:\n\nFiles pane (project structure)\nGit pane (if available)\n\nGitHub + repo setup\nIn your Quarto document, include:\n\nthe repo URL\na screenshot showing the repo page on GitHub\n\nCreate and include a plot image\nCreate a simple plot in R (any plot you like), save it as img/plot.png, and include it below.\n\n  # Example idea (you can change it):\n  # png(\"img/plot.png\", width = 800, height = 500) #open png device \n  # plot(cars)\n  # dev.off() # close the device\n\n\n\nDefine a function and compute real roots In this document, define coefficients \\(a=2\\), \\(b=-5\\), \\(c=-3\\). Consider \\(f(x) = ax^2 + bx + c\\). Print the real solutions of \\(f(x)=0\\) (if any).\n\nIf the discriminant is negative, print a message like \"No real roots\".\n\n\n  # a &lt;- 2\n  # b &lt;- -5\n  # c &lt;- -3\n  # \n  # disc &lt;- b^2 - 4*a*c\n  # disc\n\n  # Your code here to print only real roots\n\nGraph the quadratic on a specified interval Make a graph of \\(f(x)\\) versus \\(x\\) for \\(x \\in (-6, 6)\\). Add:\n\na horizontal line at \\(y = 0\\)\npoints for the real roots (if they exist)\n\n# x &lt;- seq(-6, 6, length.out = 400)\n# fx &lt;- a*x^2 + b*x + c\n\n# Hint: use plot(x, fx, type=\"l\") and abline(h=0)\nWrite coefficients to a text file using Unix Use Unix to create a file data/coefs.txt containing a single line with:\n2 -5 -3\nShow the Unix commands you used:\n# Your commands here\nCopy the Quarto file using Unix Use Unix to copy hw1.qmd into code/ and name it quadratic.qmd. Show the Unix command(s):\n# Your commands here\nRead coefficients from file using a relative path\nEdit code/quadratic.qmd so it reads a, b, c from data/coefs.txt using a relative path. In this document, show the R code you used (it should also appear in quadratic.qmd).\n# Your code here (example outline):\n\n# coefs &lt;- scan(\"data/coefs.txt\") #read numbers/string and return a vector\n\n# a &lt;- coefs[1]; b &lt;- coefs[2]; c &lt;- coefs[3]\n\n# then compute real roots again\nSwitch to an absolute path and test portability\nIn code/quadratic.qmd, replace the relative path with: file.path(getwd(), \"data/coefs.txt\") Render it once to confirm it works.\nThen move the entire project folder to a new folder name (e.g., RtmpXXXX). Re-render code/quadratic.qmd. Does it still render? Briefly explain what happened, then switch back to a relative path and confirm it renders again.\nRender to PDF and publish to GitHub Pages-style docs folder\nRender a PDF version of hw1.qmd (or code/quadratic.qmd) and place the PDF into docs/. Show the terminal command(s) you typed:\n# Your command here. This shuold be run in a Linux terminal. \n# This command assumes your current directory is the parent directory containing `hw/hw1.qmd`. Otherwise, make appropriate change to the path to hw1.qmd\n#install any missing packages on the fly\n\nquarto render hw/hw1.qmd --to pdf  \ncp hw/hw1.pdf docs/\n\nGit workflow Make at least three commits with meaningful messages, such as:\n\n\nAdd initial project structure\nAdd quadratic root computation\nAdd rendering output to docs\nIn this document, paste the output of:\ngit log --oneline --decorate -n 5\n\n\nPush to GitHub Push your work to GitHub. In this document, include:\n\n\na screenshot of your GitHub repo showing the folders img/, data/, code/, docs/\nthe link to the rendered PDF file in your repo (if applicable)",
    "crumbs": [
      "HW-1"
    ]
  },
  {
    "objectID": "psets/hw1.html#submission-checklist",
    "href": "psets/hw1.html#submission-checklist",
    "title": "Problem set 1",
    "section": "3 Submission checklist",
    "text": "3 Submission checklist\n\nRepo exists and is named HW1\nhw1.qmd renders without errors\nimg/plot.png exists and is included in the document\ndata/coefs.txt exists and is read using a relative path\ndocs/ contains the rendered PDF\nAt least three commits + pushed to GitHub",
    "crumbs": [
      "HW-1"
    ]
  },
  {
    "objectID": "slides/19-dataviz-in-practice.html#boxplot-maybe-insufficient",
    "href": "slides/19-dataviz-in-practice.html#boxplot-maybe-insufficient",
    "title": "Dataviz In Practice",
    "section": "Boxplot maybe insufficient",
    "text": "Boxplot maybe insufficient\n\nThe codeThe graph\n\n\n\nset.seed(1987) \nz &lt;- sample(c(0,1), 1000, replace = TRUE, prob = c(0.25, 0.75)) \nx &lt;- rnorm(1000)*z + rnorm(1000, 5)*(1 - z) # if z_i=1, x_i comes from N(0,1).  \np1 &lt;- data.frame(x=x) |&gt;  \n  ggplot(aes(x)) +  \n  geom_density(fill = 1, show.legend=FALSE, alpha = 0.2) + # fill=1: the first color in the palette. To see the color, `scales::hue_pal()(1) `\n  scale_x_continuous(limits=c(-4,8.5)) \np2 &lt;- data.frame(g= \"\", x=x) |&gt; ggplot(aes(g, x)) + geom_boxplot() + xlab(\"\") + # create empty first column\n  theme(axis.ticks = element_blank()) \n# the first part can be: ggplot(data.frame(x = x), aes(y = x)) + geom_boxplot()\n\ngridExtra::grid.arrange(p1, p2, nrow = 1)"
  },
  {
    "objectID": "psets/hw2.html",
    "href": "psets/hw2.html",
    "title": "Problem set 2",
    "section": "",
    "text": "Download source\nFor these exercises, do not load any packages other than dslabs.\nMake sure to use vectorization whenever possible (avoid loops unless explicitly allowed).\nlibrary(dslabs)"
  },
  {
    "objectID": "psets/hw2.html#qmd",
    "href": "psets/hw2.html#qmd",
    "title": "Problem set 2",
    "section": "",
    "text": "title: “Problem set 2” date: “” format: html: toc: true number-sections: true —\nDownload source\nFor these exercises, do not load any packages other than dslabs.\nMake sure to use vectorization whenever possible (avoid loops unless explicitly allowed).\n\nlibrary(dslabs)"
  },
  {
    "objectID": "psets/hw2.html#section",
    "href": "psets/hw2.html#section",
    "title": "Problem set 2",
    "section": "1 1",
    "text": "1 1\nWhat is the sum of the first 150 positive integers? Use the functions seq and sum to compute the sum with R for any n.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-1",
    "href": "psets/hw2.html#section-1",
    "title": "Problem set 2",
    "section": "2 2",
    "text": "2 2\nLoad the murders dataset from dslabs. Use the function str to examine the structure of the murders object.\n\nWhat are the column names used by the data frame for these five variables: state name, abbreviation, region, population, total murders?\nShow the subset of murders showing states with less than 1.2 per 100,000 deaths.\nShow all variables.\n\n\nstr(murders)\n\n'data.frame':   51 obs. of  5 variables:\n $ state     : chr  \"Alabama\" \"Alaska\" \"Arizona\" \"Arkansas\" ...\n $ abb       : chr  \"AL\" \"AK\" \"AZ\" \"AR\" ...\n $ region    : Factor w/ 4 levels \"Northeast\",\"South\",..: 2 4 4 2 4 4 1 2 2 2 ...\n $ population: num  4779736 710231 6392017 2915918 37253956 ...\n $ total     : num  135 19 232 93 1257 ...\n\n\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-2",
    "href": "psets/hw2.html#section-2",
    "title": "Problem set 2",
    "section": "3 3",
    "text": "3 3\nShow the subset of murders showing states with less than 1.2 per 100,000 deaths and in the Northeast of the US. Do not show the region variable.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-3",
    "href": "psets/hw2.html#section-3",
    "title": "Problem set 2",
    "section": "4 4",
    "text": "4 4\nAmong states with a murder rate less than 1.2 per 100,000, show the smallest population state (show the state name, population, and rate).\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-4",
    "href": "psets/hw2.html#section-4",
    "title": "Problem set 2",
    "section": "5 5",
    "text": "5 5\nShow the state with a population of more than 8 million with the lowest murder rate (show the state name, population, and rate).\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-5",
    "href": "psets/hw2.html#section-5",
    "title": "Problem set 2",
    "section": "6 6",
    "text": "6 6\nCompute the murder rate for each region of the US (total murders divided by total population times 100,000). Return a data frame with one row per region and columns region and rate.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-6",
    "href": "psets/hw2.html#section-6",
    "title": "Problem set 2",
    "section": "7 7",
    "text": "7 7\nCreate a vector of numbers that starts at 5, does not pass 60, and adds numbers in increments of 3/8: 5, 5 + 3/8, 5 + 6/8, and so on.\nHow many numbers does the list have? Hint: use seq and length.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-7",
    "href": "psets/hw2.html#section-7",
    "title": "Problem set 2",
    "section": "8 8",
    "text": "8 8\nMake this data frame:\n\ntemp_f &lt;- c(72, 95, 41, 86, 78, 33)\ncity &lt;- c(\"Chicago\", \"Lagos\", \"Oslo\", \"Rio de Janeiro\", \n          \"San Juan\", \"Toronto\")\ncity_temps &lt;- data.frame(name = city, temperature_f = temp_f)\ncity_temps\n\n            name temperature_f\n1        Chicago            72\n2          Lagos            95\n3           Oslo            41\n4 Rio de Janeiro            86\n5       San Juan            78\n6        Toronto            33\n\n\nAdd a new column called temperature_c containing the temperatures in Celsius. Keep all existing columns.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-8",
    "href": "psets/hw2.html#section-8",
    "title": "Problem set 2",
    "section": "9 9",
    "text": "9 9\nWrite a function euler2 that computes the following sum for any n:\n\\[\nS_n = 1 + \\frac{1}{2^2} + \\frac{1}{3^2} + \\dots + \\frac{1}{n^2}.\n\\]\nYour function should:\n\ntake a single input n\nreturn a single number\n\nTest your function at n = 10 and n = 100.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-9",
    "href": "psets/hw2.html#section-9",
    "title": "Problem set 2",
    "section": "10 10",
    "text": "10 10\nShow that as \\(n\\) gets bigger, \\(S_n\\) gets closer to \\(\\pi^2/6\\) by plotting \\(S_n\\) versus \\(n\\) for \\(n = 1,2,\\dots,2000\\) with a horizontal dashed line at \\(\\pi^2/6\\).\nHints:\n\nCreate a vector n &lt;- 1:2000\nUse sapply(n, euler2) (vectorization through apply is fine)\nUse abline(h = ..., lty = 2)\n\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-10",
    "href": "psets/hw2.html#section-10",
    "title": "Problem set 2",
    "section": "11 11",
    "text": "11 11\nUse the %in% operator and the predefined object state.abb to create a logical vector that answers the question: which of the following are actual abbreviations?\nAL, AK, AZ, AR, AA\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-11",
    "href": "psets/hw2.html#section-11",
    "title": "Problem set 2",
    "section": "12 12",
    "text": "12 12\nExtend the code you used in the previous exercise to report the one entry that is not an actual abbreviation.\nHint: use ! then which to obtain an index.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-12",
    "href": "psets/hw2.html#section-12",
    "title": "Problem set 2",
    "section": "13 13",
    "text": "13 13\nIn the murders dataset, use %in% to show all variables for Florida, California, and New York, in that order.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-13",
    "href": "psets/hw2.html#section-13",
    "title": "Problem set 2",
    "section": "14 14",
    "text": "14 14\nWrite a function called vandermonde_helper2 that for any x and n, returns the vector:\n\\[\n(1, x, x^2, x^3, \\dots, x^n).\n\\]\nShow the results for x = 2 and n = 6.\nRestrictions:\n\nDo not use a loop.\nUse vectorization (e.g., ^ with 0:n).\n\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-14",
    "href": "psets/hw2.html#section-14",
    "title": "Problem set 2",
    "section": "15 15",
    "text": "15 15\nCreate a vector using:\n\nn &lt;- 20000\np &lt;- 0.35\nset.seed(2025-9-18)\nx &lt;- sample(c(0,1), n, prob = c(1 - p, p), replace = TRUE)\n\nCompute the length of each stretch of consecutive 1s (run lengths of 1s) and then plot the distribution of these values.\n\nDo not use a loop.\nHint: use rle(x).\n\nThen compare the empirical proportions to a geometric distribution prediction by printing a small table for run lengths 1 through 8.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-15",
    "href": "psets/hw2.html#section-15",
    "title": "Problem set 2",
    "section": "16 16",
    "text": "16 16\nIn the murders dataset:\n\nCompute the national average murder rate (total murders / total population * 100,000).\nCreate a logical vector indicating which states have both a murder rate higher than the national average and population greater than 6 million.\nUse ifelse to create a character vector labeling states:\n\n\"High Crime, High Pop\" if rate &gt; national average and pop &gt; 6 million\n\"High Crime, Low Pop\" if rate &gt; national average and pop ≤ 6 million\n\"Lower Crime\" otherwise\n\n\nFinally, create a table of counts of these labels with table().\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-16",
    "href": "psets/hw2.html#section-16",
    "title": "Problem set 2",
    "section": "17 17",
    "text": "17 17\nUse order, rank, and sort functions on the murder rates to answer the following:\nWhat is the murder rate of the state that ranks 12th in terms of murder rate (from highest to lowest)?\nShow your work by:\n\ncreating a murder rate vector called rate\nusing the appropriate function(s) to find the 12th ranked value\n\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-17",
    "href": "psets/hw2.html#section-17",
    "title": "Problem set 2",
    "section": "18 18",
    "text": "18 18\nWrite a function called compute_harmonic_mean that takes a numeric vector and returns the harmonic mean:\n\\[\n\\frac{n}{\\sum_{i=1}^n \\frac{1}{x_i}}.\n\\]\nThe function should return NA if any values are zero or negative.\nTest your function on the vector c(1, 2, 4, 8) and show that it returns approximately 2.133333.\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-18",
    "href": "psets/hw2.html#section-18",
    "title": "Problem set 2",
    "section": "19 19",
    "text": "19 19\nCreate a function called safe_divide that takes two arguments x and y and returns their ratio x/y, but returns the string \"Cannot divide by zero\" when y is zero.\nUse vectorization so that the function works element-wise on vectors.\nTest it on:\nx &lt;- c(10, 20, 30)\ny &lt;- c(2, 0, 5)\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2.html#section-19",
    "href": "psets/hw2.html#section-19",
    "title": "Problem set 2",
    "section": "20 20",
    "text": "20 20\nUsing the murders dataset, write a function called classify_state_safety that takes a state name as input and returns a classification based on the murder rate:\n\n\"Very Safe\" if rate &lt; 1\n\"Safe\" if 1 ≤ rate &lt; 3\n\"Moderate\" if 3 ≤ rate &lt; 5\n\"High Risk\" if rate ≥ 5\n\nIf the state name is not found, return \"State not found\".\nTest your function on:\n\n\"Vermont\"\n\"Texas\"\n\"California\"\n\"NotAState\"\n\nThen use sapply to classify all states and create a table showing how many states fall into each safety category using table().\n\n# Your code here"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html",
    "href": "psets/hw2_more_scaffold.html",
    "title": "Problem set 2",
    "section": "",
    "text": "Download source\nFor these exercises, do not load any packages other than dslabs.\nMake sure to use vectorization whenever possible (avoid loops unless explicitly allowed).\n# Load only the allowed package\nlibrary(dslabs)"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section",
    "href": "psets/hw2_more_scaffold.html#section",
    "title": "Problem set 2",
    "section": "1 ",
    "text": "1 \nWhat is the sum of the first 150 positive integers? Use the functions seq and sum to compute the sum with R for any n.\n\n# Step 1: define n\nn &lt;- 150\n\n# Step 2: create the sequence 1, 2, ..., n\nx &lt;- seq(1, n)\n\n# Step 3: take the sum\n# (replace NA with your answer)\nans &lt;- NA\nans\n\n[1] NA\n\n\n\n# Extension: write one line that works for any n (change n above)\n# sum(seq(1, n))"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-1",
    "href": "psets/hw2_more_scaffold.html#section-1",
    "title": "Problem set 2",
    "section": "2 ",
    "text": "2 \nLoad the murders dataset from dslabs. Use the function str to examine the structure of the murders object.\n\nWhat are the column names used by the data frame for these five variables: state name, abbreviation, region, population, total murders?\nShow the subset of murders showing states with less than 1.2 per 100,000 deaths.\nShow all variables.\n\n\n# Examine the structure\nstr(murders)\n\n'data.frame':   51 obs. of  5 variables:\n $ state     : chr  \"Alabama\" \"Alaska\" \"Arizona\" \"Arkansas\" ...\n $ abb       : chr  \"AL\" \"AK\" \"AZ\" \"AR\" ...\n $ region    : Factor w/ 4 levels \"Northeast\",\"South\",..: 2 4 4 2 4 4 1 2 2 2 ...\n $ population: num  4779736 710231 6392017 2915918 37253956 ...\n $ total     : num  135 19 232 93 1257 ...\n\n# Step: show column names\nnames(murders)\n\n[1] \"state\"      \"abb\"        \"region\"     \"population\" \"total\"     \n\n\n\n# Step 1: compute murder rate per 100,000\nrate &lt;- murders$total / murders$population * 100000\n\n# Step 2: identify which states have rate &lt; 1.2\nidx &lt;- rate &lt; 1.2\n\n# Step 3: subset the data frame using idx\nmurders_low &lt;- murders[idx, ]\n\n# Step 4: show the subset\nmurders_low\n\n           state abb        region population total\n12        Hawaii  HI          West    1360301     7\n13         Idaho  ID          West    1567582    12\n16          Iowa  IA North Central    3046355    21\n20         Maine  ME     Northeast    1328361    11\n24     Minnesota  MN North Central    5303925    53\n30 New Hampshire  NH     Northeast    1316470     5\n35  North Dakota  ND North Central     672591     4\n38        Oregon  OR          West    3831074    36\n42  South Dakota  SD North Central     814180     8\n45          Utah  UT          West    2763885    22\n46       Vermont  VT     Northeast     625741     2\n51       Wyoming  WY          West     563626     5"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-2",
    "href": "psets/hw2_more_scaffold.html#section-2",
    "title": "Problem set 2",
    "section": "3 ",
    "text": "3 \nShow the subset of murders showing states with less than 1.2 per 100,000 deaths and in the Northeast of the US. Do not show the region variable.\n\n# Step 1: compute rate (or reuse from Q2 if still in your environment)\nrate &lt;- murders$total / murders$population * 100000\n\n# Step 2: logical condition for low-rate states\nlow &lt;- rate &lt; 1.2\n\n# Step 3: logical condition for Northeast region\nne &lt;- murders$region == \"Northeast\"\n\n# Step 4: combine conditions (use &)\nkeep &lt;- low & ne\n\n# Step 5: subset rows\nout &lt;- murders[keep, ]\n\n# Step 6: remove the region column\n# Hint: use out[, -which(names(out)==\"region\")] or select columns by name\nout_no_region &lt;- out[, names(out) != \"region\"]\n\nout_no_region\n\n           state abb population total\n20         Maine  ME    1328361    11\n30 New Hampshire  NH    1316470     5\n46       Vermont  VT     625741     2"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-3",
    "href": "psets/hw2_more_scaffold.html#section-3",
    "title": "Problem set 2",
    "section": "4 ",
    "text": "4 \nAmong states with a murder rate less than 1.2 per 100,000, show the smallest population state (show the state name, population, and rate).\n\n# Step 1: compute rate\nrate &lt;- murders$total / murders$population * 100000\n\n# Step 2: subset to states with rate &lt; 1.2\nlow &lt;- rate &lt; 1.2\n\n# Step 3: get populations for just those states\npop_low &lt;- murders$population[low]\n\n# Step 4: find index (within the low subset) of the smallest population\n# Hint: use which.min\nj &lt;- which.min(pop_low)\n\n# Step 5: convert to the original row index\n# Hint: which(low) gives the row numbers that are TRUE\nrows_low &lt;- which(low)\ni &lt;- rows_low[j]\n\n# Step 6: report state, population, and rate (as a small data frame)\ndata.frame(\n  state = murders$state[i],\n  population = murders$population[i],\n  rate = rate[i]\n)\n\n    state population      rate\n1 Wyoming     563626 0.8871131"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-4",
    "href": "psets/hw2_more_scaffold.html#section-4",
    "title": "Problem set 2",
    "section": "5 ",
    "text": "5 \nShow the state with a population of more than 8 million with the lowest murder rate (show the state name, population, and rate).\n\n# Step 1: compute rate\nrate &lt;- murders$total / murders$population * 100000\n\n# Step 2: create logical vector for pop &gt; 8 million\nbig &lt;- murders$population &gt; 8e6\n\n# Step 3: compute rates for those states\nrate_big &lt;- rate[big]\n\n# Step 4: find the smallest rate among big-pop states\nj &lt;- which.min(rate_big)\n\n# Step 5: map back to original row index\nrows_big &lt;- which(big)\ni &lt;- rows_big[j]\n\n# Step 6: report\ndata.frame(\n  state = murders$state[i],\n  population = murders$population[i],\n  rate = rate[i]\n)\n\n     state population    rate\n1 New York   19378102 2.66796"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-5",
    "href": "psets/hw2_more_scaffold.html#section-5",
    "title": "Problem set 2",
    "section": "6 ",
    "text": "6 \nCompute the murder rate for each region of the US (total murders divided by total population times 100,000). Return a data frame with one row per region and columns region and rate.\n\n# Step 1: list the region names\nregions &lt;- unique(murders$region)\nregions\n\n[1] South         West          Northeast     North Central\nLevels: Northeast South North Central West\n\n\n\n# Step 2: compute total murders per region\nmurders_by_region &lt;- tapply(murders$total, murders$region, sum)\n\n# Step 3: compute total population per region\npop_by_region &lt;- tapply(murders$population, murders$region, sum)\n\n# Step 4: compute rates per region\nrate_by_region &lt;- murders_by_region / pop_by_region * 100000\n\n# Step 5: build a data frame\nregion_rates &lt;- data.frame(\n  region = names(rate_by_region),\n  rate = as.numeric(rate_by_region)\n)\n\nregion_rates\n\n         region     rate\n1     Northeast 2.655592\n2         South 3.626558\n3 North Central 2.731334\n4          West 2.656175"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-6",
    "href": "psets/hw2_more_scaffold.html#section-6",
    "title": "Problem set 2",
    "section": "7 ",
    "text": "7 \nCreate a vector of numbers that starts at 5, does not pass 60, and adds numbers in increments of 3/8: 5, 5 + 3/8, 5 + 6/8, and so on.\nHow many numbers does the list have? Hint: use seq and length.\n\n# Step 1: define start, end, and step\nstart &lt;- 5\nend &lt;- 60\nstep &lt;- 3/8\n\n# Step 2: generate the sequence\nv &lt;- seq(from = start, to = end, by = step)\n\n# Step 3: check first few values\nhead(v)\n\n[1] 5.000 5.375 5.750 6.125 6.500 6.875\n\n# Step 4: how many values?\nlength(v)\n\n[1] 147"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-7",
    "href": "psets/hw2_more_scaffold.html#section-7",
    "title": "Problem set 2",
    "section": "8 ",
    "text": "8 \nMake this data frame:\n\ntemp_f &lt;- c(72, 95, 41, 86, 78, 33)\ncity &lt;- c(\"Chicago\", \"Lagos\", \"Oslo\", \"Rio de Janeiro\", \n          \"San Juan\", \"Toronto\")\ncity_temps &lt;- data.frame(name = city, temperature_f = temp_f)\ncity_temps\n\n            name temperature_f\n1        Chicago            72\n2          Lagos            95\n3           Oslo            41\n4 Rio de Janeiro            86\n5       San Juan            78\n6        Toronto            33\n\n\nAdd a new column called temperature_c containing the temperatures in Celsius. Keep all existing columns.\n\n# Step 1: write the conversion formula\n# C = (F - 32) * 5/9\n\n# Step 2: add the new column\ncity_temps$temperature_c &lt;- (city_temps$temperature_f - 32) * 5/9\n\n# Step 3: show the updated data frame\ncity_temps\n\n            name temperature_f temperature_c\n1        Chicago            72    22.2222222\n2          Lagos            95    35.0000000\n3           Oslo            41     5.0000000\n4 Rio de Janeiro            86    30.0000000\n5       San Juan            78    25.5555556\n6        Toronto            33     0.5555556"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-8",
    "href": "psets/hw2_more_scaffold.html#section-8",
    "title": "Problem set 2",
    "section": "9 ",
    "text": "9 \nWrite a function euler2 that computes the following sum for any n:\n\\[\nS_n = 1 + \\frac{1}{2^2} + \\frac{1}{3^2} + \\dots + \\frac{1}{n^2}.\n\\]\nYour function should:\n\ntake a single input n\nreturn a single number\n\nTest your function at n = 10 and n = 100.\n\n# Step 1: define the function skeleton\neuler2 &lt;- function(n) {\n  # Step 2: create the vector 1:n\n  k &lt;- 1:n\n  \n  # Step 3: compute the terms 1/k^2\n  terms &lt;- 1 / (k^2)\n  \n  # Step 4: sum the terms\n  sum(terms)\n}\n\n# Step 5: test\neuler2(10)\n\n[1] 1.549768\n\neuler2(100)\n\n[1] 1.634984"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-9",
    "href": "psets/hw2_more_scaffold.html#section-9",
    "title": "Problem set 2",
    "section": "10 ",
    "text": "10 \nShow that as \\(n\\) gets bigger, \\(S_n\\) gets closer to \\(\\pi^2/6\\) by plotting \\(S_n\\) versus \\(n\\) for \\(n = 1,2,\\dots,2000\\) with a horizontal dashed line at \\(\\pi^2/6\\).\nHints:\n\nCreate a vector n &lt;- 1:2000\nUse sapply(n, euler2) (vectorization through apply is fine)\nUse abline(h = ..., lty = 2)\n\n\n# Step 1: vector of n values\nn_vals &lt;- 1:2000\n\n# Step 2: compute S_n for each n\nS &lt;- sapply(n_vals, euler2)\n\n# Step 3: plot S_n vs n\nplot(n_vals, S, type = \"l\",\n     xlab = \"n\", ylab = \"S_n\")\n\n# Step 4: add horizontal line at pi^2/6\nabline(h = pi^2/6, lty = 2)\n\n\n\n# Step 5 (optional): print last value and difference\ntail(S, 1)\n\n[1] 1.644434\n\ntail(S, 1) - pi^2/6\n\n[1] -0.000499875"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-10",
    "href": "psets/hw2_more_scaffold.html#section-10",
    "title": "Problem set 2",
    "section": "11 ",
    "text": "11 \nUse the %in% operator and the predefined object state.abb to create a logical vector that answers the question: which of the following are actual abbreviations?\nAL, AK, AZ, AR, AA\n\n# Step 1: make a vector of abbreviations to check\ntest &lt;- c(\"AL\", \"AK\", \"AZ\", \"AR\", \"AA\")\n\n# Step 2: check membership in state.abb\nis_real &lt;- test %in% state.abb\n\n# Step 3: show results\nis_real\n\n[1]  TRUE  TRUE  TRUE  TRUE FALSE"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-11",
    "href": "psets/hw2_more_scaffold.html#section-11",
    "title": "Problem set 2",
    "section": "12 ",
    "text": "12 \nExtend the code you used in the previous exercise to report the one entry that is not an actual abbreviation.\nHint: use ! then which to obtain an index.\n\ntest &lt;- c(\"AL\", \"AK\", \"AZ\", \"AR\", \"AA\")\n\n# Step 1: logical vector of \"not in\"\nnot_real &lt;- !(test %in% state.abb)\n\n# Step 2: find the position(s) that are TRUE\nidx &lt;- which(not_real)\n\n# Step 3: report the entry (or entries)\ntest[idx]\n\n[1] \"AA\""
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-12",
    "href": "psets/hw2_more_scaffold.html#section-12",
    "title": "Problem set 2",
    "section": "13 ",
    "text": "13 \nIn the murders dataset, use %in% to show all variables for Florida, California, and New York, in that order.\n\n# Step 1: make a vector of target states in the order requested\ntargets &lt;- c(\"Florida\", \"California\", \"New York\")\n\n# Step 2: subset using %in%\nsub &lt;- murders[murders$state %in% targets, ]\n\n# Step 3: reorder rows to match the order in targets\n# Hint: match gives positions\nsub_ordered &lt;- sub[match(targets, sub$state), ]\n\n# Step 4: display\nsub_ordered\n\n        state abb    region population total\n10    Florida  FL     South   19687653   669\n5  California  CA      West   37253956  1257\n33   New York  NY Northeast   19378102   517"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-13",
    "href": "psets/hw2_more_scaffold.html#section-13",
    "title": "Problem set 2",
    "section": "14 ",
    "text": "14 \nWrite a function called vandermonde_helper2 that for any x and n, returns the vector:\n\\[\n(1, x, x^2, x^3, \\dots, x^n).\n\\]\nShow the results for x = 2 and n = 6.\nRestrictions:\n\nDo not use a loop.\nUse vectorization (e.g., ^ with 0:n).\n\n\n# Step 1: define the function\nvandermonde_helper2 &lt;- function(x, n) {\n  # Step 2: create exponents 0,1,2,...,n\n  e &lt;- 0:n\n  \n  # Step 3: compute x^e (vectorized)\n  x^e\n}\n\n# Step 4: test\nvandermonde_helper2(2, 6)\n\n[1]  1  2  4  8 16 32 64"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-14",
    "href": "psets/hw2_more_scaffold.html#section-14",
    "title": "Problem set 2",
    "section": "15 ",
    "text": "15 \nCreate a vector using:\n\nn &lt;- 20000\np &lt;- 0.35\nset.seed(2025-9-18)\nx &lt;- sample(c(0,1), n, prob = c(1 - p, p), replace = TRUE)\n\nCompute the length of each stretch of consecutive 1s (run lengths of 1s) and then plot the distribution of these values.\n\nDo not use a loop.\nHint: use rle(x).\n\nThen compare the empirical proportions to a geometric distribution prediction by printing a small table for run lengths 1 through 8.\n\n# Step 1: run-length encoding\nr &lt;- rle(x)\n\n# Step 2: extract run lengths where the run value is 1\nones_lengths &lt;- r$lengths[r$values == 1]\n\n# Step 3: look at first few run lengths\nhead(ones_lengths)\n\n[1] 1 2 1 2 1 1\n\n# Step 4: plot distribution (histogram or barplot)\n# Option A: histogram\nhist(ones_lengths, breaks = 30,\n     xlab = \"Run length of 1s\", main = \"Distribution of run lengths of 1s\")\n\n\n\n# Step 5: empirical proportions for run lengths 1:8\ntab &lt;- table(ones_lengths)\nemp_counts &lt;- as.numeric(tab[as.character(1:8)])\nemp_counts[is.na(emp_counts)] &lt;- 0\nemp_probs &lt;- emp_counts / length(ones_lengths)\n\n# Step 6: theoretical geometric comparison\n# For Bernoulli(p), P(run length = k) = (1-p) * p^(k-1)\nk &lt;- 1:8\ntheory_probs &lt;- (1 - p) * p^(k - 1)\n\n# Step 7: show a comparison table\ncomparison &lt;- data.frame(\n  run_length = k,\n  empirical_prob = emp_probs,\n  theory_prob = theory_probs\n)\ncomparison\n\n  run_length empirical_prob  theory_prob\n1          1   0.6491810536 0.6500000000\n2          2   0.2273129703 0.2275000000\n3          3   0.0836653386 0.0796250000\n4          4   0.0254537406 0.0278687500\n5          5   0.0084108012 0.0097540625\n6          6   0.0042054006 0.0034139219\n7          7   0.0006640106 0.0011948727\n8          8   0.0008853475 0.0004182054"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-15",
    "href": "psets/hw2_more_scaffold.html#section-15",
    "title": "Problem set 2",
    "section": "16 ",
    "text": "16 \nIn the murders dataset:\n\nCompute the national average murder rate (total murders / total population * 100,000).\nCreate a logical vector indicating which states have both a murder rate higher than the national average and population greater than 6 million.\nUse ifelse to create a character vector labeling states:\n\n\"High Crime, High Pop\" if rate &gt; national average and pop &gt; 6 million\n\"High Crime, Low Pop\" if rate &gt; national average and pop ≤ 6 million\n\"Lower Crime\" otherwise\n\n\nFinally, create a table of counts of these labels with table().\n\n# Step 1: state-level rate\nrate &lt;- murders$total / murders$population * 100000\n\n# Step 2: national average rate\nnational_rate &lt;- sum(murders$total) / sum(murders$population) * 100000\nnational_rate\n\n[1] 3.034555\n\n# Step 3: conditions\nhigh_crime &lt;- rate &gt; national_rate\nhigh_pop &lt;- murders$population &gt; 6e6\n\n# Step 4: label using ifelse (nested ifelse)\nlabels &lt;- ifelse(high_crime & high_pop, \"High Crime, High Pop\",\n                 ifelse(high_crime & !high_pop, \"High Crime, Low Pop\",\n                        \"Lower Crime\"))\n\n# Step 5: counts\ntable(labels)\n\nlabels\nHigh Crime, High Pop  High Crime, Low Pop          Lower Crime \n                   9                   10                   32 \n\n# Step 6 (optional): show states in each category\ndata.frame(state = murders$state, rate = rate, population = murders$population, label = labels)\n\n                  state       rate population                label\n1               Alabama  2.8244238    4779736          Lower Crime\n2                Alaska  2.6751860     710231          Lower Crime\n3               Arizona  3.6295273    6392017 High Crime, High Pop\n4              Arkansas  3.1893901    2915918  High Crime, Low Pop\n5            California  3.3741383   37253956 High Crime, High Pop\n6              Colorado  1.2924531    5029196          Lower Crime\n7           Connecticut  2.7139722    3574097          Lower Crime\n8              Delaware  4.2319369     897934  High Crime, Low Pop\n9  District of Columbia 16.4527532     601723  High Crime, Low Pop\n10              Florida  3.3980688   19687653 High Crime, High Pop\n11              Georgia  3.7903226    9920000 High Crime, High Pop\n12               Hawaii  0.5145920    1360301          Lower Crime\n13                Idaho  0.7655102    1567582          Lower Crime\n14             Illinois  2.8369608   12830632          Lower Crime\n15              Indiana  2.1900730    6483802          Lower Crime\n16                 Iowa  0.6893484    3046355          Lower Crime\n17               Kansas  2.2081106    2853118          Lower Crime\n18             Kentucky  2.6732010    4339367          Lower Crime\n19            Louisiana  7.7425810    4533372  High Crime, Low Pop\n20                Maine  0.8280881    1328361          Lower Crime\n21             Maryland  5.0748655    5773552  High Crime, Low Pop\n22        Massachusetts  1.8021791    6547629          Lower Crime\n23             Michigan  4.1786225    9883640 High Crime, High Pop\n24            Minnesota  0.9992600    5303925          Lower Crime\n25          Mississippi  4.0440846    2967297  High Crime, Low Pop\n26             Missouri  5.3598917    5988927  High Crime, Low Pop\n27              Montana  1.2128379     989415          Lower Crime\n28             Nebraska  1.7521372    1826341          Lower Crime\n29               Nevada  3.1104763    2700551  High Crime, Low Pop\n30        New Hampshire  0.3798036    1316470          Lower Crime\n31           New Jersey  2.7980319    8791894          Lower Crime\n32           New Mexico  3.2537239    2059179  High Crime, Low Pop\n33             New York  2.6679599   19378102          Lower Crime\n34       North Carolina  2.9993237    9535483          Lower Crime\n35         North Dakota  0.5947151     672591          Lower Crime\n36                 Ohio  2.6871225   11536504          Lower Crime\n37             Oklahoma  2.9589340    3751351          Lower Crime\n38               Oregon  0.9396843    3831074          Lower Crime\n39         Pennsylvania  3.5977513   12702379 High Crime, High Pop\n40         Rhode Island  1.5200933    1052567          Lower Crime\n41       South Carolina  4.4753235    4625364  High Crime, Low Pop\n42         South Dakota  0.9825837     814180          Lower Crime\n43            Tennessee  3.4509357    6346105 High Crime, High Pop\n44                Texas  3.2013603   25145561 High Crime, High Pop\n45                 Utah  0.7959810    2763885          Lower Crime\n46              Vermont  0.3196211     625741          Lower Crime\n47             Virginia  3.1246001    8001024 High Crime, High Pop\n48           Washington  1.3829942    6724540          Lower Crime\n49        West Virginia  1.4571013    1852994          Lower Crime\n50            Wisconsin  1.7056487    5686986          Lower Crime\n51              Wyoming  0.8871131     563626          Lower Crime"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-16",
    "href": "psets/hw2_more_scaffold.html#section-16",
    "title": "Problem set 2",
    "section": "17 ",
    "text": "17 \nUse order, rank, and sort functions on the murder rates to answer the following:\nWhat is the murder rate of the state that ranks 12th in terms of murder rate (from highest to lowest)?\nShow your work by:\n\ncreating a murder rate vector called rate\nusing the appropriate function(s) to find the 12th ranked value\n\n\n# Step 1: rate vector\nrate &lt;- murders$total / murders$population * 100000\n\n# Step 2: order indices from highest to lowest\nord &lt;- order(rate, decreasing = TRUE)\n\n# Step 3: 12th state index\ni &lt;- ord[12]\n\n# Step 4: report the rate and the state name\ndata.frame(\n  rank = 12,\n  state = murders$state[i],\n  rate = rate[i]\n)\n\n  rank     state     rate\n1   12 Tennessee 3.450936\n\n# Optional checks using sort and rank:\n# sort(rate, decreasing=TRUE)[12]\n# which(rank(-rate) == 12)"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-17",
    "href": "psets/hw2_more_scaffold.html#section-17",
    "title": "Problem set 2",
    "section": "18 ",
    "text": "18 \nWrite a function called compute_harmonic_mean that takes a numeric vector and returns the harmonic mean:\n\\[\n\\frac{n}{\\sum_{i=1}^n \\frac{1}{x_i}}.\n\\]\nThe function should return NA if any values are zero or negative.\nTest your function on the vector c(1, 2, 4, 8) and show that it returns approximately 2.133333.\n\ncompute_harmonic_mean &lt;- function(x) {\n  # Step 1: check for any non-positive values\n  if (any(x &lt;= 0)) return(NA)\n  \n  # Step 2: compute harmonic mean\n  n &lt;- length(x)\n  n / sum(1 / x)\n}\n\n# Test\ncompute_harmonic_mean(c(1, 2, 4, 8))\n\n[1] 2.133333"
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-18",
    "href": "psets/hw2_more_scaffold.html#section-18",
    "title": "Problem set 2",
    "section": "19 ",
    "text": "19 \nCreate a function called safe_divide that takes two arguments x and y and returns their ratio x/y, but returns the string \"Cannot divide by zero\" when y is zero.\nUse vectorization so that the function works element-wise on vectors.\nTest it on:\nx &lt;- c(10, 20, 30)\ny &lt;- c(2, 0, 5)\n\nsafe_divide &lt;- function(x, y) {\n  # Step 1: start with numeric division\n  out &lt;- x / y\n  \n  # Step 2: replace entries where y == 0\n  # Important: output must be character if we include a string\n  out_char &lt;- as.character(out)\n  out_char[y == 0] &lt;- \"Cannot divide by zero\"\n  \n  out_char\n}\n\n# Test\nx &lt;- c(10, 20, 30)\ny &lt;- c(2, 0, 5)\nsafe_divide(x, y)\n\n[1] \"5\"                     \"Cannot divide by zero\" \"6\""
  },
  {
    "objectID": "psets/hw2_more_scaffold.html#section-19",
    "href": "psets/hw2_more_scaffold.html#section-19",
    "title": "Problem set 2",
    "section": "20 ",
    "text": "20 \nUsing the murders dataset, write a function called classify_state_safety that takes a state name as input and returns a classification based on the murder rate:\n\n\"Very Safe\" if rate &lt; 1\n\"Safe\" if 1 ≤ rate &lt; 3\n\"Moderate\" if 3 ≤ rate &lt; 5\n\"High Risk\" if rate ≥ 5\n\nIf the state name is not found, return \"State not found\".\nTest your function on:\n\n\"Vermont\"\n\"Texas\"\n\"California\"\n\"NotAState\"\n\nThen use sapply to classify all states and create a table showing how many states fall into each safety category using table().\n\n# Step 1: precompute state murder rates (named vector is helpful)\nrate &lt;- murders$total / murders$population * 100000\nrate_named &lt;- setNames(rate, murders$state)\n\n# Step 2: write function\nclassify_state_safety &lt;- function(state_name) {\n  # Step 2a: check if state exists\n  if (!(state_name %in% names(rate_named))) return(\"State not found\")\n  \n  # Step 2b: extract rate\n  r &lt;- rate_named[state_name]\n  \n  # Step 2c: classify using if/else\n  if (r &lt; 1) {\n    \"Very Safe\"\n  } else if (r &lt; 3) {\n    \"Safe\"\n  } else if (r &lt; 5) {\n    \"Moderate\"\n  } else {\n    \"High Risk\"\n  }\n}\n\n# Step 3: test on required states\nclassify_state_safety(\"Vermont\")\n\n[1] \"Very Safe\"\n\nclassify_state_safety(\"Texas\")\n\n[1] \"Moderate\"\n\nclassify_state_safety(\"California\")\n\n[1] \"Moderate\"\n\nclassify_state_safety(\"NotAState\")\n\n[1] \"State not found\"\n\n\n\n# Step 4: classify all states using sapply\ncats &lt;- sapply(murders$state, classify_state_safety)\n\n# Step 5: count categories\ntable(cats)\n\ncats\nHigh Risk  Moderate      Safe Very Safe \n        4        15        20        12"
  },
  {
    "objectID": "psets/hw2_medium_hint.html",
    "href": "psets/hw2_medium_hint.html",
    "title": "Problem set 2",
    "section": "",
    "text": "Download source\nFor these exercises, do not load any packages other than dslabs.\nMake sure to use vectorization whenever possible (avoid loops unless explicitly allowed).\n# Load only the allowed package\nlibrary(dslabs)",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section",
    "href": "psets/hw2_medium_hint.html#section",
    "title": "Problem set 2",
    "section": "1",
    "text": "1\nWhat is the sum of the first 150 positive integers? Use the functions seq and sum to compute the sum with R for any n.\n\n# Step 1: define n\nn &lt;- 150\n\n# Step 2: create the sequence 1, 2, ..., n\n# x &lt;- \n\n# Step 3: compute the sum of x\n# ans &lt;- \n\n# Step 4: print ans\n# ans",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-1",
    "href": "psets/hw2_medium_hint.html#section-1",
    "title": "Problem set 2",
    "section": "2",
    "text": "2\nLoad the murders dataset from dslabs. Use the function str to examine the structure of the murders object.\n\nWhat are the column names used by the data frame for these five variables: state name, abbreviation, region, population, total murders?\nShow the subset of murders showing states with less than 1.2 per 100,000 deaths.\nShow all variables.\n\n\n# Examine structure\nstr(murders)\n\n'data.frame':   51 obs. of  5 variables:\n $ state     : chr  \"Alabama\" \"Alaska\" \"Arizona\" \"Arkansas\" ...\n $ abb       : chr  \"AL\" \"AK\" \"AZ\" \"AR\" ...\n $ region    : Factor w/ 4 levels \"Northeast\",\"South\",..: 2 4 4 2 4 4 1 2 2 2 ...\n $ population: num  4779736 710231 6392017 2915918 37253956 ...\n $ total     : num  135 19 232 93 1257 ...\n\n# Step: print the column names\n# names(murders)\n\n\n# Step 1: compute murder rate per 100,000 into a vector called rate\n# rate &lt;- \n\n# Step 2: create a logical vector called idx for states with rate &lt; 1.2\n# idx &lt;- \n\n# Step 3: subset murders using idx\n# murders[idx, ]",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-2",
    "href": "psets/hw2_medium_hint.html#section-2",
    "title": "Problem set 2",
    "section": "3",
    "text": "3\nShow the subset of murders showing states with less than 1.2 per 100,000 deaths and in the Northeast of the US. Do not show the region variable.\n\n# Step 1: compute rate (or reuse from Q2)\n# rate &lt;- \n\n# Step 2: create logical vectors low and ne\n# low &lt;- \n# ne &lt;- \n\n# Step 3: combine conditions into keep\n# keep &lt;- \n\n# Step 4: subset and remove region column\n# out &lt;- \n# out_no_region &lt;- \n\n# out_no_region",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-3",
    "href": "psets/hw2_medium_hint.html#section-3",
    "title": "Problem set 2",
    "section": "4",
    "text": "4\nAmong states with a murder rate less than 1.2 per 100,000, show the smallest population state (show the state name, population, and rate).\n\n# Step 1: compute rate\n# rate &lt;- \n\n# Step 2: restrict to low-rate states\n# low &lt;- \n\n# Step 3: find the row index of the smallest population among those\n# Hint: use which(low) and which.min(...)\n# i &lt;- \n\n# Step 4: report as a small data frame with columns state, population, rate\n# data.frame(...)",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-4",
    "href": "psets/hw2_medium_hint.html#section-4",
    "title": "Problem set 2",
    "section": "5",
    "text": "5\nShow the state with a population of more than 8 million with the lowest murder rate (show the state name, population, and rate).\n\n# Step 1: compute rate\n# rate &lt;- \n\n# Step 2: create logical vector big for population &gt; 8 million\n# big &lt;- \n\n# Step 3: find the row index i of the smallest rate among big-pop states\n# i &lt;- \n\n# Step 4: report state, population, rate\n# data.frame(...)",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-5",
    "href": "psets/hw2_medium_hint.html#section-5",
    "title": "Problem set 2",
    "section": "6",
    "text": "6\nCompute the murder rate for each region of the US (total murders divided by total population times 100,000). Return a data frame with one row per region and columns region and rate.\n\n# Step 1: compute total murders by region\n# murders_by_region &lt;- tapply( , , sum)\n\n# Step 2: compute total population by region\n# pop_by_region &lt;- tapply( , , sum)\n\n# Step 3: compute rates\n# rate_by_region &lt;- \n\n# Step 4: make a data frame with region names and rates\n# region_rates &lt;- data.frame(...)\n# region_rates",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-6",
    "href": "psets/hw2_medium_hint.html#section-6",
    "title": "Problem set 2",
    "section": "7",
    "text": "7\nCreate a vector of numbers that starts at 5, does not pass 60, and adds numbers in increments of 3/8.\nHow many numbers does the list have?\n\n# Step 1: define start, end, step\nstart &lt;- 5\nend &lt;- 60\nstep &lt;- 3/8\n\n# Step 2: create the sequence v\n# v &lt;- \n\n# Step 3: show the first 6 values\n# head(v)\n\n# Step 4: show the length\n# length(v)",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-7",
    "href": "psets/hw2_medium_hint.html#section-7",
    "title": "Problem set 2",
    "section": "8",
    "text": "8\nMake this data frame:\n\ntemp_f &lt;- c(72, 95, 41, 86, 78, 33)\ncity &lt;- c(\"Chicago\", \"Lagos\", \"Oslo\", \"Rio de Janeiro\", \n          \"San Juan\", \"Toronto\")\ncity_temps &lt;- data.frame(name = city, temperature_f = temp_f)\ncity_temps\n\n            name temperature_f\n1        Chicago            72\n2          Lagos            95\n3           Oslo            41\n4 Rio de Janeiro            86\n5       San Juan            78\n6        Toronto            33\n\n\nAdd a new column called temperature_c containing the temperatures in Celsius. Keep all existing columns.\n\n# Step 1: compute Celsius using (F - 32) * 5/9\n# city_temps$temperature_c &lt;- \n\n# Step 2: print city_temps\n# city_temps",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-8",
    "href": "psets/hw2_medium_hint.html#section-8",
    "title": "Problem set 2",
    "section": "9",
    "text": "9\nWrite a function euler2 that computes:\n\\[\nS_n = 1 + \\frac{1}{2^2} + \\frac{1}{3^2} + \\dots + \\frac{1}{n^2}.\n\\]\nTest your function at n = 10 and n = 100.\n\n# Step 1: write the function\neuler2 &lt;- function(n) {\n  # Step: create k &lt;- 1:n\n  # Step: compute terms &lt;- 1/(k^2)\n  # Step: return sum(terms)\n}\n\n# Step 2: test\n# euler2(10)\n# euler2(100)",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-9",
    "href": "psets/hw2_medium_hint.html#section-9",
    "title": "Problem set 2",
    "section": "10",
    "text": "10\nPlot \\(S_n\\) versus \\(n\\) for \\(n = 1,2,\\dots,2000\\) with a horizontal dashed line at \\(\\pi^2/6\\).\n\n# Step 1: create n_vals &lt;- 1:2000\n# n_vals &lt;- \n\n# Step 2: compute S for each n using sapply\n# S &lt;- \n\n# Step 3: plot\n# plot(n_vals, S, type=\"l\", xlab=\"n\", ylab=\"S_n\")\n\n# Step 4: add dashed line at pi^2/6\n# abline(h = , lty = 2)",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-10",
    "href": "psets/hw2_medium_hint.html#section-10",
    "title": "Problem set 2",
    "section": "11",
    "text": "11\nUse %in% and state.abb to create a logical vector for: AL, AK, AZ, AR, AA.\n\ntest &lt;- c(\"AL\", \"AK\", \"AZ\", \"AR\", \"AA\")\n\n# Step 1: create is_real\n# is_real &lt;- \n\n# Step 2: print is_real\n# is_real",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-11",
    "href": "psets/hw2_medium_hint.html#section-11",
    "title": "Problem set 2",
    "section": "12",
    "text": "12\nReport the one entry that is not an actual abbreviation.\n\ntest &lt;- c(\"AL\", \"AK\", \"AZ\", \"AR\", \"AA\")\n\n# Step 1: create not_real using !\n# not_real &lt;- \n\n# Step 2: find index with which()\n# idx &lt;- \n\n# Step 3: print the entry\n# test[idx]",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-12",
    "href": "psets/hw2_medium_hint.html#section-12",
    "title": "Problem set 2",
    "section": "13",
    "text": "13\nUsing %in%, show all variables for Florida, California, and New York, in that order.\n\ntargets &lt;- c(\"Florida\", \"California\", \"New York\")\n\n# Step 1: subset murders to those states\n# sub &lt;- \n\n# Step 2: reorder rows using match()\n# sub_ordered &lt;- \n\n# Step 3: print sub_ordered\n# sub_ordered",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-13",
    "href": "psets/hw2_medium_hint.html#section-13",
    "title": "Problem set 2",
    "section": "14",
    "text": "14\nWrite a function vander_helper(x, n) that returns \\((1, x, x^2, \\dots, x^n)\\). Show results for x=2, n=6.\nRestrictions: no loop.\n\nvander_helper &lt;- function(x, n) {\n  # Step: create exponents 0:n\n  # Step: return x^(0:n)\n}\n\n# Test:\n# vander_helper(2, 6)",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-14",
    "href": "psets/hw2_medium_hint.html#section-14",
    "title": "Problem set 2",
    "section": "15",
    "text": "15\nCreate a vector using:\n\nn &lt;- 20000\np &lt;- 0.35\nset.seed(2025-9-18)\nx &lt;- sample(c(0,1), n, prob = c(1 - p, p), replace = TRUE)\n\nCompute the length of each stretch of consecutive 1s (run lengths of 1s) and plot the distribution.\n\nDo not use a loop.\nHint: use rle(x).\n\nThen compare empirical proportions to the geometric prediction for run lengths 1 through 8.\n\n# Step 1: compute r &lt;- rle(x)\n# r &lt;- \n\n# Step 2: extract ones_lengths (lengths where values == 1)\n# ones_lengths &lt;- \n\n# Step 3: plot distribution (hist or barplot)\n# hist(ones_lengths, breaks = 30)\n\n# Step 4: empirical proportions for k=1:8\n# tab &lt;- table(ones_lengths)\n# emp_counts &lt;- as.numeric(tab[as.character(1:8)])\n# emp_counts[is.na(emp_counts)] &lt;- 0\n# emp_probs &lt;- emp_counts / length(ones_lengths)\n\n# Step 5: theoretical probabilities (1-p)*p^(k-1)\n# k &lt;- 1:8\n# theory_probs &lt;- \n\n# Step 6: make a comparison data frame\n# comparison &lt;- data.frame(run_length = k, empirical_prob = emp_probs, theory_prob = theory_probs)\n# comparison",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-15",
    "href": "psets/hw2_medium_hint.html#section-15",
    "title": "Problem set 2",
    "section": "16",
    "text": "16\nIn the murders dataset:\n\nCompute the national average murder rate.\nCreate labels using ifelse:\n\n\"High Crime, High Pop\" if rate &gt; national average and pop &gt; 6 million\n\"High Crime, Low Pop\" if rate &gt; national average and pop ≤ 6 million\n\"Lower Crime\" otherwise\n\n\nThen show a table() of the labels.\n\n# Step 1: state-level rate\n# rate &lt;- \n\n# Step 2: national average rate\n# national_rate &lt;- \n\n# Step 3: logical vectors high_crime and high_pop\n# high_crime &lt;- \n# high_pop &lt;- \n\n# Step 4: labels using nested ifelse\n# labels &lt;- \n\n# Step 5: table(labels)\n# table(labels)",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-16",
    "href": "psets/hw2_medium_hint.html#section-16",
    "title": "Problem set 2",
    "section": "17",
    "text": "17\nWhat is the murder rate of the state that ranks 12th in terms of murder rate (from highest to lowest)?\nShow your work using order (and optionally check with sort or rank).\n\n# Step 1: rate vector\n# rate &lt;- \n\n# Step 2: ord &lt;- order(rate, decreasing = TRUE)\n# ord &lt;- \n\n# Step 3: i &lt;- ord[12]\n# i &lt;- \n\n# Step 4: report state and rate\n# data.frame(state = murders$state[i], rate = rate[i])",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-17",
    "href": "psets/hw2_medium_hint.html#section-17",
    "title": "Problem set 2",
    "section": "18",
    "text": "18\nWrite a function compute_harmonic_mean that returns the harmonic mean of a numeric vector, but returns NA if any values are zero or negative. Test on c(1,2,4,8) and show it is about 2.133333.\n\ncompute_harmonic_mean &lt;- function(x) {\n  # Step 1: if any x &lt;= 0, return NA\n  # Step 2: compute n &lt;- length(x)\n  # Step 3: return n / sum(1/x)\n}\n\n# Test:\n# compute_harmonic_mean(c(1, 2, 4, 8))",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-18",
    "href": "psets/hw2_medium_hint.html#section-18",
    "title": "Problem set 2",
    "section": "19",
    "text": "19\nCreate a function safe_divide(x, y) that returns x/y but returns \"Cannot divide by zero\" when y is zero. Make it work element-wise on vectors (vectorized). Test it on:\nx &lt;- c(10, 20, 30)\ny &lt;- c(2, 0, 5)\n\nsafe_divide &lt;- function(x, y) {\n  # Step 1: compute out &lt;- x/y\n  # Step 2: convert to character so you can store the message\n  # Step 3: replace entries where y == 0\n}\n\n# Test:\n# x &lt;- c(10, 20, 30)\n# y &lt;- c(2, 0, 5)\n# safe_divide(x, y)",
    "crumbs": [
      "HW-2"
    ]
  },
  {
    "objectID": "psets/hw2_medium_hint.html#section-19",
    "href": "psets/hw2_medium_hint.html#section-19",
    "title": "Problem set 2",
    "section": "20",
    "text": "20\nWrite a function classify_state_safety(state_name) that returns:\n\n\"Very Safe\" if rate &lt; 1\n\"Safe\" if 1 ≤ rate &lt; 3\n\"Moderate\" if 3 ≤ rate &lt; 5\n\"High Risk\" if rate ≥ 5\n\"State not found\" if the state is not in the dataset\n\nTest on \"Vermont\", \"Texas\", \"California\", \"NotAState\".\nThen use sapply to classify all states and use table() to count how many fall into each category.\n\n# Step 1: compute a named vector of rates\n# rate &lt;- murders$total / murders$population * 100000\n# rate_named &lt;- setNames(rate, murders$state)\n\nclassify_state_safety &lt;- function(state_name) {\n  # Step 2: check if state_name is in names(rate_named)\n  # Step 3: pull out r &lt;- rate_named[state_name]\n  # Step 4: return the correct label using if/else\n}\n\n# Tests:\n# classify_state_safety(\"Vermont\")\n# classify_state_safety(\"Texas\")\n# classify_state_safety(\"California\")\n# classify_state_safety(\"NotAState\")\n\n\n# Step 5: classify all states with sapply\n# cats &lt;- sapply(murders$state, classify_state_safety)\n\n# Step 6: count categories\n# table(cats)",
    "crumbs": [
      "HW-2"
    ]
  }
]